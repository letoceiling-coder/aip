# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–∞ –¥–ª—è –ê–ò–ü

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ö–∞—Ä—Ç–∞ –±–æ—Ç–∞ (FSM)](#–∫–∞—Ä—Ç–∞-–±–æ—Ç–∞-fsm)
5. [–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–ø–æ—à–∞–≥–æ–≤—ã–π-–ø–ª–∞–Ω-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
6. [API –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏](#api-–¥–ª—è-–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)
7. [–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
8. [–°–±–æ—Ä –∏ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö](#—Å–±–æ—Ä-–∏-–∑–∞–ø–∏—Å—å-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –¶–µ–ª—å
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Telegram-—á–∞—Ç-–±–æ—Ç–∞ –¥–ª—è –ê—É–¥–∏—Ç–æ—Ä—Å–∫–æ-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–æ–π –≥—Ä—É–ø–ø—ã ¬´–ê–ò–ü¬ª (–±–µ—Ç–∞-–≤–µ—Ä—Å–∏—è):
- –°–±–æ—Ä –∑–∞—è–≤–æ–∫ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- –í—ã–¥–∞—á–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (—á–µ–∫-–ª–∏—Å—Ç—ã)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ Telegram-–∫–∞–Ω–∞–ª
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Laravel 11, PHP 8.2+
- **Database**: MySQL/PostgreSQL
- **Telegram SDK**: `letoceiling-coder/telegram` (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- **Admin Panel**: Vue 3 + TypeScript
- **API**: RESTful API —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ bot.md
1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Telegram-–∫–∞–Ω–∞–ª –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º
2. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏:
   - –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–æ–≥–æ–≤–æ—Ä—ã (8 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
   - –ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é (—Ñ–æ—Ä–º–∞ —Å 3 –ø–æ–ª—è–º–∏)
   - –°—Å—ã–ª–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
3. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è:
   - –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–µ
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îî‚îÄ‚îÄ Controllers/
‚îÇ       ‚îî‚îÄ‚îÄ Api/
‚îÇ           ‚îú‚îÄ‚îÄ BotController.php (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏)
‚îÇ           ‚îî‚îÄ‚îÄ BotInteractionController.php (–Ω–æ–≤—ã–π - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π)
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Bot.php (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ BotUser.php (–Ω–æ–≤—ã–π - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ BotSubscription.php (–Ω–æ–≤—ã–π - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ BotConsultation.php (–Ω–æ–≤—ã–π - –∑–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é)
‚îÇ   ‚îú‚îÄ‚îÄ BotMaterial.php (–Ω–æ–≤—ã–π - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ BotMaterialCategory.php (–Ω–æ–≤—ã–π - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ TelegramService.php (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π - –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã)
‚îÇ   ‚îú‚îÄ‚îÄ BotHandlerService.php (–Ω–æ–≤—ã–π - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ BotSubscriptionService.php (–Ω–æ–≤—ã–π - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ BotMenuService.php (–Ω–æ–≤—ã–π - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–Ω—é)
‚îÇ   ‚îú‚îÄ‚îÄ BotFormService.php (–Ω–æ–≤—ã–π - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º)
‚îÇ   ‚îú‚îÄ‚îÄ BotMaterialService.php (–Ω–æ–≤—ã–π - —Ä–∞–±–æ—Ç–∞ —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏)
‚îÇ   ‚îî‚îÄ‚îÄ BotLoggerService.php (–Ω–æ–≤—ã–π - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îî‚îÄ‚îÄ Console/
    ‚îî‚îÄ‚îÄ Commands/
        ‚îî‚îÄ‚îÄ BotWebhookCommand.php (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–ª—è long polling)

database/migrations/
‚îú‚îÄ‚îÄ 2025_XX_XX_create_bot_users_table.php
‚îú‚îÄ‚îÄ 2025_XX_XX_create_bot_subscriptions_table.php
‚îú‚îÄ‚îÄ 2025_XX_XX_create_bot_material_categories_table.php
‚îú‚îÄ‚îÄ 2025_XX_XX_create_bot_materials_table.php
‚îî‚îÄ‚îÄ 2025_XX_XX_create_bot_consultations_table.php

resources/js/pages/admin/
‚îî‚îÄ‚îÄ BotManagement.vue (–Ω–æ–≤—ã–π - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–æ—Ç–∞ –∏ –∑–∞—è–≤–∫–∞–º–∏)
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSON (–ø–æ–ª–µ `settings` —Ç–∞–±–ª–∏—Ü—ã `bots`)
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Ä–∞–∑–¥–µ–ª—ã
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `bots`
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. bot_users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞)

```sql
CREATE TABLE bot_users (
    id BIGINT UNSIGNED PRIMARY KEY,  -- Telegram user ID
    bot_id BIGINT UNSIGNED NOT NULL,
    username VARCHAR(255) NULLABLE,
    first_name VARCHAR(255) NULLABLE,
    last_name VARCHAR(255) NULLABLE,
    language_code VARCHAR(10) NULLABLE,
    is_subscribed BOOLEAN DEFAULT FALSE,  -- –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª
    subscription_checked_at TIMESTAMP NULLABLE,
    current_state VARCHAR(255) NULLABLE,  -- –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM
    state_data JSON NULLABLE,  -- –î–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–æ–ª–Ω—è–µ–º–∞—è —Ñ–æ—Ä–º–∞)
    last_interaction_at TIMESTAMP NULLABLE,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    FOREIGN KEY (bot_id) REFERENCES bots(id) ON DELETE CASCADE,
    INDEX idx_bot_user (bot_id, id),
    INDEX idx_subscription (bot_id, is_subscribed)
);
```

### 2. bot_subscriptions (–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫)

```sql
CREATE TABLE bot_subscriptions (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    bot_id BIGINT UNSIGNED NOT NULL,
    user_id BIGINT UNSIGNED NOT NULL,
    channel_id BIGINT NOT NULL,  -- Telegram channel ID (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)
    channel_username VARCHAR(255) NULLABLE,
    is_subscribed BOOLEAN DEFAULT FALSE,
    checked_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP,
    
    FOREIGN KEY (bot_id) REFERENCES bots(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES bot_users(id) ON DELETE CASCADE,
    INDEX idx_user_check (bot_id, user_id, checked_at)
);
```

### 3. bot_material_categories (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)

```sql
CREATE TABLE bot_material_categories (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    bot_id BIGINT UNSIGNED NOT NULL,
    name VARCHAR(255) NOT NULL,  -- –ù–∞–∑–≤–∞–Ω–∏–µ: "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", "–ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ", etc.
    description TEXT NULLABLE,  -- –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    order_index INT DEFAULT 0,  -- –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    FOREIGN KEY (bot_id) REFERENCES bots(id) ON DELETE CASCADE,
    INDEX idx_bot_order (bot_id, order_index)
);
```

### 4. bot_materials (–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)

```sql
CREATE TABLE bot_materials (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    category_id BIGINT UNSIGNED NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT NULLABLE,
    file_type ENUM('file', 'url', 'document') DEFAULT 'file',
    file_path VARCHAR(500) NULLABLE,  -- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ storage
    file_url VARCHAR(500) NULLABLE,  -- –í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞
    file_id VARCHAR(255) NULLABLE,  -- Telegram file_id (–µ—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram)
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    download_count INT DEFAULT 0,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    FOREIGN KEY (category_id) REFERENCES bot_material_categories(id) ON DELETE CASCADE,
    INDEX idx_category_order (category_id, order_index)
);
```

### 5. bot_consultations (–ó–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é)

```sql
CREATE TABLE bot_consultations (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    bot_id BIGINT UNSIGNED NOT NULL,
    user_id BIGINT UNSIGNED NOT NULL,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(50) NOT NULL,
    description TEXT NULLABLE,  -- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
    status ENUM('new', 'in_progress', 'closed') DEFAULT 'new',
    admin_notes TEXT NULLABLE,
    telegram_notified BOOLEAN DEFAULT FALSE,  -- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω—É
    telegram_notified_at TIMESTAMP NULLABLE,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    FOREIGN KEY (bot_id) REFERENCES bots(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES bot_users(id) ON DELETE CASCADE,
    INDEX idx_bot_status (bot_id, status, created_at),
    INDEX idx_user (user_id, created_at)
);
```

### 6. bot_materials_media (–°–≤—è–∑—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `bot_materials.media_id` ‚Üí `media.id`

### 7. bot_logs (–õ–æ–≥–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

```sql
CREATE TABLE bot_logs (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    bot_id BIGINT UNSIGNED NOT NULL,
    user_id BIGINT UNSIGNED NULLABLE,
    update_id BIGINT NULLABLE,  -- Telegram update_id
    event_type VARCHAR(50) NOT NULL,  -- 'message', 'callback_query', 'subscription_check', etc.
    action VARCHAR(100) NULLABLE,  -- 'start', 'menu_main', 'consultation_form', etc.
    data JSON NULLABLE,  -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    response_status VARCHAR(50) NULLABLE,  -- 'success', 'error', 'skipped'
    error_message TEXT NULLABLE,
    created_at TIMESTAMP,
    
    FOREIGN KEY (bot_id) REFERENCES bots(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES bot_users(id) ON DELETE SET NULL,
    INDEX idx_bot_event (bot_id, event_type, created_at),
    INDEX idx_user (user_id, created_at)
);
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã bots

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `bots` (—á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏—é):

```sql
ALTER TABLE bots ADD COLUMN required_channel_id BIGINT NULLABLE;
ALTER TABLE bots ADD COLUMN required_channel_username VARCHAR(255) NULLABLE;
ALTER TABLE bots ADD COLUMN admin_telegram_ids JSON NULLABLE;  -- [123456789, 987654321]
ALTER TABLE bots ADD COLUMN yandex_maps_url VARCHAR(500) NULLABLE;
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSON –ø–æ–ª–µ `settings` –ø–æ–¥ –∫–ª—é—á–æ–º `messages` –¥–ª—è –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ settings JSON

```json
{
    "messages": {
        "subscription": {
            "required_text": "–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–∞—à –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram-–∫–∞–Ω–∞–ª.",
            "subscribe_button": "üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram",
            "check_button": "‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è"
        },
        "consultation": {
            "description": "–ï—Å–ª–∏ –≤–∞—à–µ–º—É –±–∏–∑–Ω–µ—Å—É –Ω—É–∂–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞,\n–ê–ò–ü –≤–æ–∑—å–º—ë—Ç –Ω–∞ —Å–µ–±—è –≤—Å–µ –ø—Ä–∞–≤–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã.\n\n–û–±—Ä–∞—â–∞—è—Å—å –∫ –Ω–∞–º, –≤—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞–µ—Ç–µ—Å—å –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–∏ –±–∏–∑–Ω–µ—Å–∞,\n–∞ –Ω–µ –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–∞—Ö.",
            "form_name_label": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:",
            "form_phone_label": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω:",
            "form_description_label": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å):",
            "thank_you": "–°–ø–∞—Å–∏–±–æ.\n–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
            "start_button": "üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
            "skip_description_button": "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
        },
        "materials": {
            "list_description": "–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç—ã,\n—Å–æ–±—Ä–∞–Ω–Ω—ã–µ –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º.\n\n–û–Ω–∏ –ø–æ–º–æ–≥—É—Ç —É–≤–∏–¥–µ—Ç—å —Ä–∏—Å–∫–∏ –∏ –ø–æ–Ω—è—Ç—å,\n–≥–¥–µ –±–∏–∑–Ω–µ—Å —É—è–∑–≤–∏–º.",
            "download_button": "‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
            "back_to_list": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"
        },
        "menu": {
            "materials_button": "üìÇ –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–æ–≥–æ–≤–æ—Ä—ã",
            "consultation_button": "üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
            "review_button": "‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞—Ö",
            "back_to_menu": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"
        },
        "notifications": {
            "consultation_template": "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é\n\n–ò–º—è: {name}\n–¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n–û–ø–∏—Å–∞–Ω–∏–µ: {description}\n–î–∞—Ç–∞: {date}"
        }
    },
    "webhook": {
        "allowed_updates": ["message", "callback_query"],
        "max_connections": 40,
        "secret_token": null
    },
    "other_settings": {
        "phone_validation_strict": false,
        "subscription_check_timeout": 5,
        "max_description_length": 1000
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ù–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

---

## üó∫ –ö–∞—Ä—Ç–∞ –±–æ—Ç–∞ (FSM - Finite State Machine)

### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   START/IDLE    ‚îÇ ‚Üê –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ /start ‚Üí CHECK_SUBSCRIPTION
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CHECK_SUBSCRIPTION  ‚îÇ ‚Üê –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí SHOW_SUBSCRIBE_SCREEN
         ‚îú‚îÄ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí MAIN_MENU
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ SHOW_SUBSCRIBE_     ‚îÇ ‚Üê –≠–∫—Ä–∞–Ω —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ      SCREEN         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ "–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è" ‚Üí CHECK_SUBSCRIPTION (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    MAIN_MENU        ‚îÇ ‚Üê –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ "–ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã" ‚Üí MATERIALS_LIST
         ‚îú‚îÄ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é" ‚Üí CONSULTATION_DESCRIPTION
         ‚îú‚îÄ "–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤" ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MATERIALS_LIST     ‚îÇ ‚Üê –°–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí MATERIAL_CATEGORY
         ‚îú‚îÄ "–ù–∞–∑–∞–¥" ‚Üí MAIN_MENU
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MATERIAL_CATEGORY   ‚îÇ ‚Üê –ö–∞—Ä—Ç–æ—á–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ "–°–∫–∞—á–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã" ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞/—Å—Å—ã–ª–∫–∏
         ‚îú‚îÄ "–ù–∞–∑–∞–¥" ‚Üí MATERIALS_LIST
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONSULTATION_       ‚îÇ ‚Üê –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
‚îÇ   DESCRIPTION       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é" ‚Üí CONSULTATION_FORM_NAME
         ‚îú‚îÄ "–ù–∞–∑–∞–¥" ‚Üí MAIN_MENU
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONSULTATION_FORM_  ‚îÇ ‚Üê –í–≤–æ–¥ –∏–º–µ–Ω–∏
‚îÇ       NAME          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –í–≤–æ–¥ –∏–º–µ–Ω–∏ ‚Üí CONSULTATION_FORM_PHONE
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONSULTATION_FORM_  ‚îÇ ‚Üê –í–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
‚îÇ      PHONE          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –í–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Üí CONSULTATION_FORM_DESCRIPTION
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONSULTATION_FORM_  ‚îÇ ‚Üê –í–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ    DESCRIPTION      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –í–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏—è ‚Üí CONSULTATION_SUBMIT
         ‚îú‚îÄ –ü—Ä–æ–ø—É—Å–∫ ‚Üí CONSULTATION_SUBMIT
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONSULTATION_SUBMIT ‚îÇ ‚Üê –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ –û—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí MAIN_MENU (—Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–°–ø–∞—Å–∏–±–æ...")
```

### –ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)

```php
// app/Constants/BotStates.php
class BotStates
{
    const IDLE = 'idle';
    const CHECK_SUBSCRIPTION = 'check_subscription';
    const SHOW_SUBSCRIBE_SCREEN = 'show_subscribe_screen';
    const MAIN_MENU = 'main_menu';
    const MATERIALS_LIST = 'materials_list';
    const MATERIAL_CATEGORY = 'material_category';
    const CONSULTATION_DESCRIPTION = 'consultation_description';
    const CONSULTATION_FORM_NAME = 'consultation_form_name';
    const CONSULTATION_FORM_PHONE = 'consultation_form_phone';
    const CONSULTATION_FORM_DESCRIPTION = 'consultation_form_description';
    const CONSULTATION_SUBMIT = 'consultation_submit';
}
```

---

## üìù –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (1-2 –¥–Ω—è)

#### 1.1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_users`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_subscriptions`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_material_categories`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_materials` (—Å –ø–æ–ª–µ–º `media_id` –¥–ª—è —Å–≤—è–∑–∏ —Å –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_consultations`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `bot_logs` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `bots` (required_channel_id, admin_telegram_ids, etc.)

#### 1.2. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- [ ] `app/Models/BotUser.php`
- [ ] `app/Models/BotSubscription.php`
- [ ] `app/Models/BotMaterialCategory.php`
- [ ] `app/Models/BotMaterial.php`
- [ ] `app/Models/BotConsultation.php`
- [ ] `app/Models/BotLog.php` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `app/Models/Bot.php` (–¥–æ–±–∞–≤–∏—Ç—å relationships)

#### 1.3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] `app/Constants/BotStates.php`
- [ ] `app/Constants/BotActions.php`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config/telegram.php` (–¥–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

#### 1.4. –°–æ–∑–¥–∞–Ω–∏–µ Request –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] `app/Http/Requests/UpdateBotSettingsRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
- [ ] `app/Http/Requests/StoreConsultationRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- [ ] `app/Http/Requests/StoreMaterialRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- [ ] `app/Http/Requests/UpdateMaterialRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- [ ] `app/Http/Requests/StoreMaterialCategoryRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–î–µ—Ç–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –°–º. `BOT_VALIDATION_GUIDE.md` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

### –≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (2-3 –¥–Ω—è)

#### 2.1. BotSubscriptionService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ Telegram-–∫–∞–Ω–∞–ª

**–ú–µ—Ç–æ–¥—ã**:
- `checkSubscription(int $botId, int $userId, int $channelId): bool`
- `getChannelMember(int $botId, int $userId, int $channelId): array`
- `saveSubscriptionCheck(int $botId, int $userId, int $channelId, bool $isSubscribed): void`

**–õ–æ–≥–∏–∫–∞**:
```php
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Telegram API: getChatMember
// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ bot_subscriptions
// –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```

#### 2.2. BotMenuService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–Ω—é

**–ú–µ—Ç–æ–¥—ã**:
- `getMainMenuKeyboard(): array` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `getMaterialsListKeyboard(int $botId): array` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `getMaterialCategoryKeyboard(int $categoryId): array` - –∫–∞—Ä—Ç–æ—á–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `getConsultationKeyboard(): array` - –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- `getBackKeyboard(string $backState): array` - –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"

**–§–æ—Ä–º–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** (Inline Keyboard):
```php
[
    [
        ['text' => 'üìÇ –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã', 'callback_data' => 'menu_materials'],
        ['text' => 'üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é', 'callback_data' => 'menu_consultation']
    ],
    [
        ['text' => '‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤', 'url' => 'https://yandex.ru/maps/...']
    ]
]
```

#### 2.3. BotFormService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º (–∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é)

**–ú–µ—Ç–æ–¥—ã**:
- `startConsultationForm(int $botId, int $userId): void` - –Ω–∞—á–∞–ª–æ —Ñ–æ—Ä–º—ã
- `validateFormField(string $field, string $value, array $botSettings): array` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—è —Ñ–æ—Ä–º—ã
- `saveFormField(int $userId, string $field, string $value): void` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—è (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
- `submitConsultationForm(int $userId): BotConsultation` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã (—Å —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
- `getFormData(int $userId): array` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –∏–∑ state_data
- `sanitizeInput(string $value, string $field): string` - –æ—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π**:
- **–ò–º—è**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞, –º–∞–∫—Å–∏–º—É–º 255, —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã, —Ç–æ—á–∫–∏
- **–¢–µ–ª–µ—Ñ–æ–Ω**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –º–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤, —Ñ–æ—Ä–º–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `phone_validation_strict`
  - –°—Ç—Ä–æ–≥–∞—è: `+7XXXXXXXXXX` –∏–ª–∏ `8XXXXXXXXXX`
  - –ú—è–≥–∫–∞—è: –Ω–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π —Ü–∏—Ñ—Ä—ã
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, –º–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `max_description_length` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)

**–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**:
–î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `state_data` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JSON):
```json
{
    "consultation": {
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "phone": "+79001234567",
        "description": "–ù—É–∂–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –Ω–∞–ª–æ–≥–∞–º"
    }
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
–ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ—Å—å–±–æ–π –≤–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ.

#### 2.4. BotMaterialService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

**–ú–µ—Ç–æ–¥—ã**:
- `getCategories(int $botId): Collection`
- `getCategoryMaterials(int $categoryId): Collection`
- `sendMaterial(int $botId, int $userId, int $materialId): array` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞/—Å—Å—ã–ª–∫–∏
- `incrementDownloadCount(int $materialId): void`
- `getMaterialFilePath(int $materialId): ?string` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
- `getMaterialFileUrl(int $materialId): ?string` - –ø–æ–ª—É—á–µ–Ω–∏–µ URL —Ñ–∞–π–ª–∞

**–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Telegram**:
- –ï—Å–ª–∏ `file_type = 'telegram_file_id'` –∏ `file_id` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º `sendDocument` —Å `file_id` (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±)
- –ï—Å–ª–∏ `file_type = 'file'` –∏ `media_id` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
  - –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `media`
  - –ï—Å–ª–∏ —Ñ–∞–π–ª –±—ã–ª —Ä–∞–Ω–µ–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram –∏ `file_id` —Å–æ—Ö—Ä–∞–Ω–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º `file_id`
  - –ò–Ω–∞—á–µ ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `InputFile` –ø–æ –ø—É—Ç–∏ –∏–∑ `media.metadata.path`
- –ï—Å–ª–∏ `file_type = 'file'` –∏ `file_path` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±) ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ `InputFile`
- –ï—Å–ª–∏ `file_type = 'url'` ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π –∏–∑ `file_url`

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π**:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–∞ ‚Üí —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `media`, —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `media_id`
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ ‚Üí —Ñ–∞–π–ª –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö)
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Üí –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ–º `media_id`

#### 2.5. BotLoggerService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

**–ú–µ—Ç–æ–¥—ã**:
- `logMessage(int $botId, int $userId, array $update, string $action, ?string $error = null): void`
- `logCallbackQuery(int $botId, int $userId, array $update, string $action, ?string $error = null): void`
- `logSubscriptionCheck(int $botId, int $userId, bool $isSubscribed): void`
- `logConsultationCreated(int $botId, int $userId, int $consultationId): void`

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –í —Ç–∞–±–ª–∏—Ü—É `bot_logs` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- –í —Ñ–∞–π–ª –ª–æ–≥–æ–≤ Laravel: `storage/logs/bot_{bot_id}.log`
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –≠—Ç–∞–ø 3: –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (BotHandlerService) (3-4 –¥–Ω—è)

#### 3.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞

```php
class BotHandlerService
{
    protected TelegramService $telegram;
    protected BotSubscriptionService $subscription;
    protected BotMenuService $menu;
    protected BotFormService $form;
    protected BotMaterialService $material;
    protected BotLoggerService $logger;
    
    public function handleUpdate(Bot $bot, array $update): void
    {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        // –ü–æ–ª—É—á–∞–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        // –ù–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    }
    
    protected function handleMessage(Bot $bot, BotUser $user, array $message): void
    protected function handleCallbackQuery(Bot $bot, BotUser $user, array $callbackQuery): void
    protected function handleCommand(Bot $bot, BotUser $user, string $command, array $message): void
    protected function handleState(Bot $bot, BotUser $user, string $state, array $message): void
}
```

#### 3.2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start

```php
protected function handleStartCommand(Bot $bot, BotUser $user): void
{
    // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É
    // 3. –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
    // 4. –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
}
```

#### 3.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Ñ–æ—Ä–º—ã

```php
protected function handleConsultationForm(Bot $bot, BotUser $user, string $field, string $value): void
{
    switch ($user->current_state) {
        case BotStates::CONSULTATION_FORM_NAME:
            $this->form->saveFormField($user->id, 'name', $value);
            $this->askForPhone($bot, $user);
            break;
            
        case BotStates::CONSULTATION_FORM_PHONE:
            $this->form->saveFormField($user->id, 'phone', $value);
            $this->askForDescription($bot, $user);
            break;
            
        case BotStates::CONSULTATION_FORM_DESCRIPTION:
            $this->form->saveFormField($user->id, 'description', $value);
            $this->submitConsultation($bot, $user);
            break;
    }
}
```

#### 3.4. –û–±—Ä–∞–±–æ—Ç–∫–∞ callback_query (–∫–Ω–æ–ø–∫–∏)

```php
protected function handleCallbackQuery(Bot $bot, BotUser $user, array $callbackQuery): void
{
    $data = $callbackQuery['data'];
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ callback_data
    if (str_starts_with($data, 'menu_')) {
        $this->handleMenuAction($bot, $user, $data);
    } elseif (str_starts_with($data, 'material_category_')) {
        $categoryId = (int) str_replace('material_category_', '', $data);
        $this->showMaterialCategory($bot, $user, $categoryId);
    } elseif (str_starts_with($data, 'material_download_')) {
        $materialId = (int) str_replace('material_download_', '', $data);
        $this->sendMaterial($bot, $user, $materialId);
    } elseif ($data === 'back_main_menu') {
        $this->showMainMenu($bot, $user);
    }
    
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
    $this->telegram->answerCallbackQuery($bot->token, $callbackQuery['id']);
}
```

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å webhook (1 –¥–µ–Ω—å)

#### 4.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ BotController::handleWebhook

```php
public function handleWebhook(Request $request, string $id): JsonResponse
{
    $bot = Bot::findOrFail($id);
    
    if (!$bot->is_active) {
        return response()->json(['ok' => true]); // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ secret_token (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
    // ...
    
    $update = $request->all();
    
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    Log::channel('bot')->info("Bot {$bot->id} received update", [
        'update_id' => $update['update_id'] ?? null,
        'type' => $this->getUpdateType($update),
    ]);
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ BotHandlerService
    try {
        $handler = app(BotHandlerService::class);
        $handler->handleUpdate($bot, $update);
    } catch (\Exception $e) {
        Log::channel('bot')->error("Error handling update for bot {$bot->id}", [
            'error' => $e->getMessage(),
            'trace' => $e->getTraceAsString(),
        ]);
    }
    
    return response()->json(['ok' => true]);
}
```

### –≠—Ç–∞–ø 5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ TelegramService (1 –¥–µ–Ω—å)

#### 5.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

```php
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
public function sendMessageWithKeyboard(
    string $token, 
    int $chatId, 
    string $text, 
    array $keyboard = []
): array

// –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
public function sendDocument(
    string $token, 
    int $chatId, 
    string $filePath, 
    ?string $caption = null
): array

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–∞–Ω–∞–ª–∞
public function getChatMember(
    string $token, 
    int $chatId, 
    int $userId
): array

// –û—Ç–≤–µ—Ç –Ω–∞ callback_query
public function answerCallbackQuery(
    string $token, 
    string $callbackQueryId, 
    ?string $text = null
): array

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
public function editMessageText(
    string $token, 
    int $chatId, 
    int $messageId, 
    string $text, 
    array $keyboard = []
): array
```

### –≠—Ç–∞–ø 6: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - API (2-3 –¥–Ω—è)

#### 6.1. Request –∫–ª–∞—Å—Å—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–°–æ–∑–¥–∞—Ç—å FormRequest –∫–ª–∞—Å—Å—ã**:
- `app/Http/Requests/UpdateBotSettingsRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
- `app/Http/Requests/StoreConsultationRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- `app/Http/Requests/StoreMaterialRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `app/Http/Requests/UpdateMaterialRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `app/Http/Requests/StoreMaterialCategoryRequest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–î–µ—Ç–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**:
- –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω—ã –≤ `BOT_VALIDATION_GUIDE.md`
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–≥–∞—è/–º—è–≥–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞)

#### 6.2. BotManagementController (–Ω–æ–≤—ã–π)

**Endpoints**:

```
GET    /api/v1/bot-management/{botId}/consultations        - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
GET    /api/v1/bot-management/{botId}/consultations/{id}   - –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏
PUT    /api/v1/bot-management/{botId}/consultations/{id}   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
GET    /api/v1/bot-management/{botId}/settings             - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
PUT    /api/v1/bot-management/{botId}/settings             - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
GET    /api/v1/bot-management/{botId}/materials/categories - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
POST   /api/v1/bot-management/{botId}/materials/categories - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
PUT    /api/v1/bot-management/{botId}/materials/categories/{id} - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
DELETE /api/v1/bot-management/{botId}/materials/categories/{id} - –£–¥–∞–ª–µ–Ω–∏–µ
GET    /api/v1/bot-management/{botId}/materials            - –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
POST   /api/v1/bot-management/{botId}/materials            - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
PUT    /api/v1/bot-management/{botId}/materials/{id}       - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
DELETE /api/v1/bot-management/{botId}/materials/{id}       - –£–¥–∞–ª–µ–Ω–∏–µ
GET    /api/v1/bot-management/{botId}/statistics           - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞
GET    /api/v1/bot-management/{botId}/users                - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

#### 6.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ API

**–°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫**:
```json
{
    "success": true,
    "data": {
        "consultations": [
            {
                "id": 1,
                "user": {
                    "id": 123456789,
                    "username": "john_doe",
                    "first_name": "John"
                },
                "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
                "phone": "+79001234567",
                "description": "–ù—É–∂–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",
                "status": "new",
                "created_at": "2025-01-15T10:30:00Z"
            }
        ],
        "total": 10,
        "filters": {
            "status": "new",
            "date_from": "2025-01-01",
            "date_to": "2025-01-31"
        }
    }
}
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**:
```json
{
    "success": true,
    "data": {
        "total_users": 150,
        "active_users_30d": 45,
        "total_consultations": 23,
        "consultations_by_status": {
            "new": 5,
            "in_progress": 10,
            "closed": 8
        },
        "materials_downloads": 120,
        "popular_materials": [
            {
                "id": 1,
                "title": "–ß–µ–∫-–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é",
                "downloads": 45
            }
        ]
    }
}
```

### –≠—Ç–∞–ø 7: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (3-4 –¥–Ω—è)

#### 7.1. BotManagement.vue (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

**–†–∞–∑–¥–µ–ª—ã**:
- –¢–∞–±—ã: "–ó–∞—è–≤–∫–∏", "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã", "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"

**–ó–∞—è–≤–∫–∏**:
- –¢–∞–±–ª–∏—Ü–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞ –æ—Ç/–¥–æ)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–∫–∏ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã**:
- –î—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- CRUD –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**:
  - –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ (drag & drop –∏–ª–∏ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞)
  - –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞–∑–¥–µ–ª–æ–º Media)
  - –£–∫–∞–∑–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–∏ (–¥–ª—è —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö)
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Telegram file_id (–µ—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –±–æ—Ç)
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, PDF, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∞, –æ–ø–∏—Å–∞–Ω–∏—è)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (order_index)
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (is_active)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏:**
  - ID –∫–∞–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: -1001234567890) - –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞ @userinfobot
  - –ò–ª–∏ username –∫–∞–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: @aip_channel) - –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª" - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–µ
  - –ü–æ–¥—Å–∫–∞–∑–∫–∞: "–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫"
  - **–¢–µ–∫—Å—Ç —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏** - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —Ç–µ–∫—Å—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
  - **–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏** - –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
  - **–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏** - –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç "–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è"
- **Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö)
  - –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
  - –ö–∞–∂–¥—ã–π ID —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
  - –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
  - –ü–æ–¥—Å–∫–∞–∑–∫–∞: "ID –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É –±–æ—Ç–∞ @userinfobot"
  - **–®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —à–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ
- **–°—Å—ã–ª–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã** (–¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤")
- **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** (–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—è `welcome_message`)
  - –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
- **–¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞** (–Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª):
  - **–†–∞–∑–¥–µ–ª "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è":**
    - –¢–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è —É—Å–ª—É–≥–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π)
    - –¢–µ–∫—Å—Ç—ã –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –æ–ø–∏—Å–∞–Ω–∏–µ)
    - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ ("–°–ø–∞—Å–∏–±–æ...")
    - –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –≤ —Ñ–æ—Ä–º–µ
  - **–†–∞–∑–¥–µ–ª "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã":**
    - –û–ø–∏—Å–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    - –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  - **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:**
    - –¢–µ–∫—Å—Ç—ã –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å—Ç—Ä–æ–≥–∞—è/–º—è–≥–∫–∞—è)
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–µ
  - –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**:
- –ì—Ä–∞—Ñ–∏–∫–∏ (Chart.js –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

#### 7.2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
resources/js/components/bot/
‚îú‚îÄ‚îÄ ConsultationTable.vue
‚îú‚îÄ‚îÄ ConsultationDetail.vue
‚îú‚îÄ‚îÄ MaterialCategoryTree.vue
‚îú‚îÄ‚îÄ MaterialForm.vue
‚îú‚îÄ‚îÄ BotSettingsForm.vue        # –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ –í–∫–ª–∞–¥–∫–∞ "–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–ª–µ "ID –∫–∞–Ω–∞–ª–∞" (—á–∏—Å–ª–æ–≤–æ–µ, —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å")
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–ª–µ "Username –∫–∞–Ω–∞–ª–∞" (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ, –±–µ–∑ @, —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å")
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–ª–µ "–°—Å—ã–ª–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã" (URL, —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" (textarea, —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º)
‚îÇ   ‚îú‚îÄ‚îÄ –í–∫–ª–∞–¥–∫–∞ "–¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†–∞–∑–¥–µ–ª "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª"
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—Å—Ç —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†–∞–∑–¥–µ–ª "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—Å—Ç—ã –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†–∞–∑–¥–µ–ª "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã"
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –û–ø–∏—Å–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –†–∞–∑–¥–µ–ª "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ –í–∫–ª–∞–¥–∫–∞ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å—Ç—Ä–æ–≥–∞—è/–º—è–≥–∫–∞—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ –ö–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", "–°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—é", "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"
‚îî‚îÄ‚îÄ BotStatistics.vue
```

### –≠—Ç–∞–ø 8: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º (1 –¥–µ–Ω—å)

#### 8.1. –°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```php
class BotNotificationService
{
    public function notifyNewConsultation(Bot $bot, BotConsultation $consultation): void
    {
        $adminIds = $bot->settings['admin_telegram_ids'] ?? [];
        
        if (empty($adminIds)) {
            return;
        }
        
        $message = $this->formatConsultationMessage($consultation);
        
        foreach ($adminIds as $adminId) {
            $this->telegram->sendMessage(
                $bot->token,
                $adminId,
                $message,
                ['parse_mode' => 'HTML']
            );
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–ª–∞–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        $consultation->update([
            'telegram_notified' => true,
            'telegram_notified_at' => now(),
        ]);
    }
    
    protected function formatConsultationMessage(BotConsultation $consultation): string
    {
        return "<b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</b>\n\n"
            . "–ò–º—è: {$consultation->name}\n"
            . "–¢–µ–ª–µ—Ñ–æ–Ω: {$consultation->phone}\n"
            . "–û–ø–∏—Å–∞–Ω–∏–µ: {$consultation->description}\n"
            . "–î–∞—Ç–∞: " . $consultation->created_at->format('d.m.Y H:i');
    }
}
```

### –≠—Ç–∞–ø 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ (2-3 –¥–Ω—è)

#### 9.1. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- [ ] –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

#### 9.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç Telegram
- [ ] –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

#### 9.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [ ] CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

### –≠—Ç–∞–ø 10: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1-2 –¥–Ω—è)

#### 10.1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î

#### 10.2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–±–Ω–æ–≤–∏—Ç—å `PROJECT_DOCUMENTATION.md`
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

---

## üìä API –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–æ—Ç–∞

#### GET /api/v1/bot-management/{botId}/settings

**–û—Ç–≤–µ—Ç**:
```json
{
    "success": true,
    "data": {
        "required_channel_id": -1001234567890,
        "required_channel_username": "@aip_channel",
        "admin_telegram_ids": [123456789, 987654321],
        "yandex_maps_url": "https://yandex.ru/maps/org/...",
        "welcome_message": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å..."
    }
}
```

#### PUT /api/v1/bot-management/{botId}/settings

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
    "required_channel_id": -1001234567890,
    "required_channel_username": "aip_channel",
    "admin_telegram_ids": [123456789, 987654321],
    "yandex_maps_url": "https://yandex.ru/maps/org/...",
    "welcome_message": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å...",
    "messages": {
        "subscription": {
            "required_text": "–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è...",
            "subscribe_button": "üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram",
            "check_button": "‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è"
        },
        "consultation": {
            "description": "–ï—Å–ª–∏ –≤–∞—à–µ–º—É –±–∏–∑–Ω–µ—Å—É –Ω—É–∂–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è...",
            "form_name_label": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:",
            "form_phone_label": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω:",
            "form_description_label": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ...):",
            "thank_you": "–°–ø–∞—Å–∏–±–æ.\n–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
            "start_button": "üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
            "skip_description_button": "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
        },
        "materials": {
            "list_description": "–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º...",
            "download_button": "‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
            "back_to_list": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"
        },
        "menu": {
            "materials_button": "üìÇ –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–æ–≥–æ–≤–æ—Ä—ã",
            "consultation_button": "üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
            "review_button": "‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞—Ö",
            "back_to_menu": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"
        },
        "notifications": {
            "consultation_template": "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é\n\n–ò–º—è: {name}\n–¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n–û–ø–∏—Å–∞–Ω–∏–µ: {description}\n–î–∞—Ç–∞: {date}"
        }
    },
    "other_settings": {
        "phone_validation_strict": false,
        "max_description_length": 1000,
        "subscription_check_timeout": 5
    }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**:
- `required_channel_id` - ID –∫–∞–Ω–∞–ª–∞ (—á–∏—Å–ª–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤)
- `required_channel_username` - username –∫–∞–Ω–∞–ª–∞ –ë–ï–ó —Å–∏–º–≤–æ–ª–∞ @ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `aip_channel`, –Ω–µ `@aip_channel`)
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ª–∏–±–æ `required_channel_id`, –ª–∏–±–æ `required_channel_username`, –ª–∏–±–æ –æ–±–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É ID)
- –ï—Å–ª–∏ –æ–±–∞ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- `admin_telegram_ids` - –º–∞—Å—Å–∏–≤ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–∏—Å–ª–∞)
- `yandex_maps_url` - –ø–æ–ª–Ω—ã–π URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞—Ö
- `welcome_message` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–∞–∫—Å–∏–º—É–º 4096 —Å–∏–º–≤–æ–ª–æ–≤)
- `messages` - –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `other_settings` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–∏–º–∏—Ç—ã, —Ç–∞–π–º–∞—É—Ç—ã)

**–í–∞–ª–∏–¥–∞—Ü–∏—è** (–¥–µ—Ç–∞–ª–∏ –≤ `BOT_VALIDATION_GUIDE.md`):
- –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ username –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç (–±–µ–∑ @, —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ)
- –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ channel_id –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ —á–∏—Å–ª–æ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º endpoint (GET /api/v1/bot-management/{botId}/check-channel)
- –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –≤ `messages` –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏ - —Ç–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –∫–æ–¥–∞
- URL –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ –¥–æ–º–µ–Ω yandex.ru/maps
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 4096 —Å–∏–º–≤–æ–ª–∞–º–∏ (–ª–∏–º–∏—Ç Telegram)
- ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–∞–∫ –º–∞—Å—Å–∏–≤ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º (—Ç–∞–π–º–∞—É—Ç, –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏

#### GET /api/v1/bot-management/{botId}/consultations

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `status` (optional): new|in_progress|closed
- `date_from` (optional): YYYY-MM-DD
- `date_to` (optional): YYYY-MM-DD
- `page` (optional): –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `per_page` (optional): —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)

#### PUT /api/v1/bot-management/{botId}/consultations/{id}

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
    "status": "in_progress",
    "admin_notes": "–°–≤—è–∑–∞–ª—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º"
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

#### POST /api/v1/bot-management/{botId}/materials/categories

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
    "name": "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ",
    "description": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –±–∏–∑–Ω–µ—Å–∞",
    "order_index": 1
}
```

#### POST /api/v1/bot-management/{botId}/materials

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ (multipart/form-data)**:
```
title: "–ß–µ–∫-–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é"
category_id: 1
description: "–ü–æ–¥—Ä–æ–±–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç..."
file_type: "file"
file: [File upload]
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
```json
{
    "title": "–ß–µ–∫-–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é",
    "category_id": 1,
    "description": "–ü–æ–¥—Ä–æ–±–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç...",
    "file_type": "file",
    "media_id": 123  // ID —Ñ–∞–π–ª–∞ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏
}
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞**:
```json
{
    "title": "–ü–æ–ª–µ–∑–Ω–∞—è —Å—Ç–∞—Ç—å—è",
    "category_id": 1,
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ...",
    "file_type": "url",
    "file_url": "https://example.com/article.pdf"
}
```

**–í–∞—Ä–∏–∞–Ω—Ç 4: Telegram file_id (–µ—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram)**:
```json
{
    "title": "–î–æ–∫—É–º–µ–Ω—Ç –∏–∑ Telegram",
    "category_id": 1,
    "file_type": "telegram_file_id",
    "file_id": "BAACAgIAAxkBAAI..."
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: 
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞, —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫—É (—Ç–∞–±–ª–∏—Ü–∞ `media`)
- –°–≤—è–∑—å –º–µ–∂–¥—É `bot_materials` –∏ `media` —á–µ—Ä–µ–∑ –ø–æ–ª–µ `media_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–∏–≥—Ä–∞—Ü–∏—é)
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `media_id`, —Ñ–∞–π–ª –±–µ—Ä–µ—Ç—Å—è –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã

---

## üìù –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

1. **INFO** - –û–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Å–æ–æ–±—â–µ–Ω–∏—è, –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ –º–µ–Ω—é)
2. **WARNING** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª, –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
3. **ERROR** - –û—à–∏–±–∫–∏ (–Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—à–∏–±–∫–∏ –ë–î)
4. **DEBUG** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

### –ö–∞–Ω–∞–ª—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**config/logging.php**:
```php
'channels' => [
    // ...
    'bot' => [
        'driver' => 'daily',
        'path' => storage_path('logs/bot.log'),
        'level' => env('LOG_LEVEL', 'debug'),
        'days' => 14,
    ],
    
    'bot_errors' => [
        'driver' => 'daily',
        'path' => storage_path('logs/bot_errors.log'),
        'level' => 'error',
        'days' => 30,
    ],
],
```

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

```json
{
    "timestamp": "2025-01-15T10:30:00.123456Z",
    "level": "info",
    "bot_id": 1,
    "user_id": 123456789,
    "event": "message_received",
    "action": "menu_main",
    "data": {
        "text": "/start",
        "update_id": 12345
    }
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ bot_logs

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–±–æ—Ç—É
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ SQL
- –ò—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –†–æ—Å—Ç —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –º–µ—Ç–æ–¥–∞ (—Ñ–∞–π–ª—ã + –ë–î –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π)

---

## üíæ –°–±–æ—Ä –∏ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö

### –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–°–±–æ—Ä**:
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ (`/start`)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ (username –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è)

**–•—Ä–∞–Ω–µ–Ω–∏–µ**: –¢–∞–±–ª–∏—Ü–∞ `bot_users`

### –î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏

**–°–±–æ—Ä**:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–Ω—é
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è"
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ 5 –º–∏–Ω—É—Ç

**–•—Ä–∞–Ω–µ–Ω–∏–µ**: –¢–∞–±–ª–∏—Ü–∞ `bot_subscriptions` (–∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫)

### –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏

**–°–±–æ—Ä**:
- –ü–æ—à–∞–≥–æ–≤–æ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `state_data` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `bot_consultations`

**–•—Ä–∞–Ω–µ–Ω–∏–µ**:
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ: `bot_users.state_data` (JSON)
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ: `bot_consultations`

### –î–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–°–±–æ—Ä**:
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –°—á–µ—Ç—á–∏–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

**–•—Ä–∞–Ω–µ–Ω–∏–µ**: 
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: –¢–∞–±–ª–∏—Ü—ã `bot_material_categories` –∏ `bot_materials`
- –§–∞–π–ª—ã: –¢–∞–±–ª–∏—Ü–∞ `media` (—á–µ—Ä–µ–∑ —Å–≤—è–∑—å `bot_materials.media_id`)
- –í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏: –ü–æ–ª–µ `bot_materials.file_url`
- Telegram file_id: –ü–æ–ª–µ `bot_materials.file_id`

### –õ–æ–≥–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

**–°–±–æ—Ä**:
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ö–∞–∂–¥–∞—è callback_query
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫

**–•—Ä–∞–Ω–µ–Ω–∏–µ**:
- –§–∞–π–ª—ã: `storage/logs/bot.log`, `storage/logs/bot_errors.log`
- –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): `bot_logs`

### –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**GDPR/–°–æ–≥–ª–∞—Å–∏–µ**:
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–ª–∞–≥ —Å–æ–≥–ª–∞—Å–∏—è –≤ `bot_users.consent_given`
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–æ–º–∞–Ω–¥–∞ `/delete_my_data`)

---

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫)

### –§–∞–∑–∞ 1: Backend Core (–ù–µ–¥–µ–ª—è 1)
1. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–∏
2. BotSubscriptionService
3. BotMenuService
4. BotHandlerService (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å webhook

### –§–∞–∑–∞ 2: –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (–ù–µ–¥–µ–ª—è 2)
6. –û–±—Ä–∞–±–æ—Ç–∫–∞ /start –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
7. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
8. BotFormService –∏ —Ñ–æ—Ä–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
9. BotMaterialService –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
10. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ TelegramService

### –§–∞–∑–∞ 3: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–ù–µ–¥–µ–ª—è 3)
11. API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
12. Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞—è–≤–æ–∫
13. Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
14. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
15. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –§–∞–∑–∞ 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ (–ù–µ–¥–µ–ª—è 4)
16. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
17. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
18. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
19. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
20. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é, –∫–æ–≥–¥–∞:

‚úÖ –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –ö–æ–º–∞–Ω–¥–∞ /start —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç  
‚úÖ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è  
‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –§–æ—Ä–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è  
‚úÖ –ó–∞—è–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î  
‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞—è–≤–∫–∏  
‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã  
‚úÖ –õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  

---

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ secret_token –¥–ª—è webhook
   - –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —á–µ—Ä–µ–∑ middleware
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ (5 –º–∏–Ω—É—Ç)
   - –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å)

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**:
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤
   - –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ bot_id
   - –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (cron job)

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - Try-catch –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
   - Graceful degradation (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å, –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –¢–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - –¢–µ—Å—Ç–æ–≤–∞—è –≥—Ä—É–ø–ø–∞/–∫–∞–Ω–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
   - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Telegram Bot API Documentation](https://core.telegram.org/bots/api)
- [Laravel Documentation](https://laravel.com/docs)
- [Vue 3 Documentation](https://vuejs.org/)
- –¢–ó: `bot.md`
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥: 
  - `app/Services/TelegramService.php`
  - `app/Http/Controllers/Api/BotController.php`
  - `app/Http/Controllers/Api/v1/MediaController.php` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π)
  - `app/Models/Media.php` (–º–æ–¥–µ–ª—å –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤)

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `BOT_MATERIALS_ADMIN_GUIDE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- `BOT_SETTINGS_GUIDE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±–æ—Ç–∞ (–∫–∞–Ω–∞–ª—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, —Å–æ–æ–±—â–µ–Ω–∏—è)
- `BOT_VALIDATION_GUIDE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è)
- `BOT_SETTINGS_CHECKLIST.md` - –ß–µ–∫–ª–∏—Å—Ç –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–Ω–æ—Ç—ã)
- `BOT_STATE_MAP.md` - –ö–∞—Ä—Ç–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –±–æ—Ç–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `BOT_USER_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞ (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)
- `BOT_QUICK_START.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞**: 2025-01-15  
**–í–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

