import{_ as F,r as g,c as n,a as t,t as i,b as c,d as b,C as z,v as p,o as l,n as G,k as j,x as W,F as U,q as V,h as T,p as A,w as Q,D as H,f as P,e as X,m as Y,l as Z}from"./admin-CfhLddku.js";import{b as E,a as S,c as J,d as K}from"./api-DccBIR6h.js";import{S as h}from"./sweetalert2.esm.all-C0u8rGqG.js";import $ from"./Media-CemA0awk.js";const ee={name:"ConsultationDetail",props:{consultation:{type:Object,required:!0},botId:{type:[String,Number],required:!0}},emits:["close","updated"],setup(a,{emit:e}){const u=g(!1),o=g({status:a.consultation.status,admin_notes:a.consultation.admin_notes||""});return{form:o,saving:u,saveConsultation:async()=>{u.value=!0;try{const s=await E(`/bot-management/${a.botId}/consultations/${a.consultation.id}`,o.value);if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ")}await h.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated"),e("close")}catch(s){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:s.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ",icon:"error",confirmButtonText:"ÐžÐš"})}finally{u.value=!1}},formatDate:s=>new Date(s).toLocaleString("ru-RU")}}},te={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},oe={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},se={class:"sticky top-0 bg-background border-b border-border p-6"},re={class:"flex items-center justify-between"},le={class:"text-lg font-semibold"},ne={class:"p-6 space-y-6"},de={key:0},ae={class:"bg-muted/30 rounded-lg p-4"},ie={class:"text-sm"},ue={key:0,class:"text-sm"},me={key:1,class:"text-sm"},be={class:"space-y-3"},ce={class:"text-sm"},fe={class:"text-sm"},ge={key:0},xe={class:"text-sm whitespace-pre-wrap"},pe={class:"text-sm"},ve={class:"flex gap-2 pt-4 border-t border-border"},_e=["disabled"];function ye(a,e,u,o,m,y){return l(),n("div",te,[t("div",oe,[t("div",se,[t("div",re,[t("h3",le,"Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÑÐ²ÐºÐ¸ #"+i(u.consultation.id),1),t("button",{onClick:e[0]||(e[0]=s=>a.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",ne,[u.consultation.user?(l(),n("div",de,[e[5]||(e[5]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",-1)),t("div",ae,[t("p",ie,"ID: "+i(u.consultation.user.telegram_user_id),1),u.consultation.user.username?(l(),n("p",ue,"@"+i(u.consultation.user.username),1)):c("",!0),u.consultation.user.first_name?(l(),n("p",me,i(u.consultation.user.first_name)+" "+i(u.consultation.user.last_name||""),1)):c("",!0)])])):c("",!0),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð·Ð°ÑÐ²ÐºÐµ",-1)),t("div",be,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð˜Ð¼Ñ",-1)),t("p",ce,i(u.consultation.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½",-1)),t("p",fe,i(u.consultation.phone),1)]),u.consultation.description?(l(),n("div",ge,[e[8]||(e[8]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),t("p",xe,i(u.consultation.description),1)])):c("",!0),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.status=s),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[9]||(e[9]=[t("option",{value:"new"},"ÐÐ¾Ð²Ð°Ñ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°",-1)])],512),[[z,o.form.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°",-1)),b(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.admin_notes=s),rows:"4",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ..."},null,512),[[p,o.form.admin_notes]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ",-1)),t("p",pe,i(o.formatDate(u.consultation.created_at)),1)])])]),t("div",ve,[t("button",{onClick:e[3]||(e[3]=s=>a.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{onClick:e[4]||(e[4]=(...s)=>o.saveConsultation&&o.saveConsultation(...s)),disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},i(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,_e)])])])])}const ke=F(ee,[["render",ye]]),we={name:"ConsultationTable",components:{ConsultationDetail:ke},props:{botId:{type:[String,Number],required:!0}},setup(a){const e=g(!1),u=g([]),o=g(null),m=g(1),y=g(20),s=g(0),r=g({status:"",date_from:"",date_to:""}),f=async()=>{e.value=!0;try{const C={page:m.value,per_page:y.value,...r.value},B=await S(`/bot-management/${a.botId}/consultations`,C);if(!B.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº");const I=await B.json();u.value=I.data.consultations||[],s.value=I.data.total||0}catch(C){console.error("Error fetching consultations:",C)}finally{e.value=!1}},w=()=>{r.value={status:"",date_from:"",date_to:""},m.value=1,f()},k=C=>{o.value=C},M=C=>({new:"ÐÐ¾Ð²Ð°Ñ",in_progress:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",closed:"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°"})[C]||C,v=C=>({new:"bg-blue-500/10 text-blue-500",in_progress:"bg-yellow-500/10 text-yellow-500",closed:"bg-green-500/10 text-green-500"})[C]||"bg-gray-500/10 text-gray-500",q=C=>new Date(C).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return G(m,()=>{f()}),j(()=>{f()}),{loading:e,consultations:u,selectedConsultation:o,currentPage:m,perPage:y,total:s,filters:r,fetchConsultations:f,resetFilters:w,showDetail:k,getStatusLabel:M,getStatusClass:v,formatDate:q}}},he={class:"consultation-table space-y-4"},Ce={class:"bg-muted/30 rounded-lg border border-border p-4"},Me={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Be={class:"flex items-end"},Ie={key:0,class:"text-center py-12"},Ue={key:1,class:"bg-background rounded-lg border border-border overflow-hidden"},Ve={class:"overflow-x-auto"},Se={class:"w-full"},Fe={class:"divide-y divide-border"},Te={class:"px-6 py-4 text-sm"},Ee={class:"px-6 py-4 text-sm"},je={class:"px-6 py-4 text-sm"},qe={class:"px-6 py-4"},De={class:"px-6 py-4 text-sm"},Pe={class:"px-6 py-4 text-right"},ze=["onClick"],Ae={key:0,class:"px-6 py-4 border-t border-border flex items-center justify-between"},Ne={class:"text-sm text-muted-foreground"},Le={class:"flex gap-2"},Re=["disabled"],Ge=["disabled"];function Oe(a,e,u,o,m,y){const s=T("ConsultationDetail");return l(),n("div",he,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between"},[t("h2",{class:"text-2xl font-semibold"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ")],-1)),t("div",Ce,[t("div",Me,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.filters.status=r),onChange:e[1]||(e[1]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[10]||(e[10]=[t("option",{value:""},"Ð’ÑÐµ",-1),t("option",{value:"new"},"ÐÐ¾Ð²Ñ‹Ðµ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)])],544),[[z,o.filters.status]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð¾Ñ‚",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.filters.date_from=r),type:"date",onChange:e[3]||(e[3]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[p,o.filters.date_from]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð´Ð¾",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.filters.date_to=r),type:"date",onChange:e[5]||(e[5]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[p,o.filters.date_to]])]),t("div",Be,[t("button",{onClick:e[6]||(e[6]=(...r)=>o.resetFilters&&o.resetFilters(...r)),class:"w-full h-10 px-4 border border-border bg-background hover:bg-muted/10 rounded-lg"}," Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ")])])]),o.loading?(l(),n("div",Ie,[...e[14]||(e[14]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°ÑÐ²Ð¾Ðº...",-1)])])):c("",!0),o.loading?c("",!0):(l(),n("div",Ue,[t("div",Ve,[t("table",Se,[e[15]||(e[15]=t("thead",{class:"bg-muted/30 border-b border-border"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð˜Ð¼Ñ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð”Ð°Ñ‚Ð°"),t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase"},"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ")])],-1)),t("tbody",Fe,[(l(!0),n(U,null,V(o.consultations,r=>(l(),n("tr",{key:r.id,class:"hover:bg-muted/10"},[t("td",Te,i(r.id),1),t("td",Ee,i(r.name),1),t("td",je,i(r.phone),1),t("td",qe,[t("span",{class:A(["px-2 py-1 text-xs rounded-md",o.getStatusClass(r.status)])},i(o.getStatusLabel(r.status)),3)]),t("td",De,i(o.formatDate(r.created_at)),1),t("td",Pe,[t("button",{onClick:f=>o.showDetail(r),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð”ÐµÑ‚Ð°Ð»Ð¸ ",8,ze)])]))),128))])])]),o.total>o.perPage?(l(),n("div",Ae,[t("div",Ne," ÐŸÐ¾ÐºÐ°Ð·Ð°Ð½Ð¾ "+i((o.currentPage-1)*o.perPage+1)+" - "+i(Math.min(o.currentPage*o.perPage,o.total))+" Ð¸Ð· "+i(o.total),1),t("div",Le,[t("button",{onClick:e[7]||(e[7]=r=>o.currentPage--),disabled:o.currentPage===1,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," ÐÐ°Ð·Ð°Ð´ ",8,Re),t("button",{onClick:e[8]||(e[8]=r=>o.currentPage++),disabled:o.currentPage*o.perPage>=o.total,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," Ð’Ð¿ÐµÑ€ÐµÐ´ ",8,Ge)])])):c("",!0)])),o.selectedConsultation?(l(),W(s,{key:2,consultation:o.selectedConsultation,"bot-id":u.botId,onClose:e[9]||(e[9]=r=>o.selectedConsultation=null),onUpdated:o.fetchConsultations},null,8,["consultation","bot-id","onUpdated"])):c("",!0)])}const Ke=F(we,[["render",Oe]]),Qe={name:"MaterialForm",props:{botId:{type:[String,Number],required:!0},categoryId:{type:[String,Number],default:null},material:{type:Object,default:null}},emits:["close","saved"],setup(a,{emit:e}){const u=g(!1),o=g(!1),m=g(!1),y=g(""),s=g([]),r=g(null),f=g(null),w=g(null),k=g(!!a.material),M=g([]),v=g({title:"",category_id:a.categoryId||null,description:"",file_type:"file",file_url:"",file_id:"",media_id:null,order_index:0,is_active:!0}),q=async()=>{try{const d=await S(`/bot-management/${a.botId}/materials/categories`);if(d.ok){const _=await d.json();M.value=_.data||[]}}catch(d){console.error("Error fetching categories:",d)}},C=async()=>{o.value=!0;try{const d={};y.value&&(d.search=y.value);const _=await S("/media",d);if(_.ok){const D=await _.json();s.value=D.data||[]}}catch(d){console.error("Error fetching media:",d)}finally{o.value=!1}},B=()=>{v.value.file_url="",v.value.file_id="",v.value.media_id=null,r.value=null,f.value=null},I=d=>{const _=d.target.files[0];_&&(r.value=_,v.value.media_id=null,f.value=null)},N=d=>{v.value.media_id=d.id,f.value=d,r.value=null},L=()=>{v.value.media_id&&(m.value=!1)},R=d=>{if(!d)return"0 B";const _=1024,D=["B","KB","MB","GB"],O=Math.floor(Math.log(d)/Math.log(_));return Math.round(d/Math.pow(_,O)*100)/100+" "+D[O]},x=async()=>{u.value=!0;try{const d=new FormData;if(d.append("title",v.value.title),d.append("category_id",v.value.category_id),d.append("description",v.value.description||""),d.append("file_type",v.value.file_type),d.append("order_index",v.value.order_index||0),d.append("is_active",v.value.is_active?1:0),v.value.file_type==="file")if(r.value)d.append("file",r.value);else if(v.value.media_id)d.append("media_id",v.value.media_id);else throw new Error("ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð»Ð¸ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸");else v.value.file_type==="url"?d.append("file_url",v.value.file_url):v.value.file_type==="telegram_file_id"&&d.append("file_id",v.value.file_id);let _;if(k.value?_=await E(`/bot-management/${a.botId}/materials/${a.material.id}`,d):_=await J(`/bot-management/${a.botId}/materials`,d),!_.ok){const D=await _.json().catch(()=>({}));throw new Error(D.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°")}await h.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("saved"),e("close")}catch(d){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:d.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error",confirmButtonText:"ÐžÐš"})}finally{u.value=!1}};return a.material&&(v.value={title:a.material.title||"",category_id:a.material.category_id||a.categoryId||null,description:a.material.description||"",file_type:a.material.file_type||"file",file_url:a.material.file_url||"",file_id:a.material.file_id||"",media_id:a.material.media_id||null,order_index:a.material.order_index||0,is_active:a.material.is_active!==void 0?a.material.is_active:!0},a.material.media&&(f.value=a.material.media)),G(m,d=>{d&&C()}),G(y,()=>{m.value&&C()}),j(()=>{q()}),{saving:u,loadingMedia:o,showMediaPicker:m,mediaSearch:y,mediaFiles:s,selectedFile:r,selectedMedia:f,fileInput:w,isEditMode:k,categories:M,form:v,fetchMediaFiles:C,handleFileTypeChange:B,handleFileSelect:I,selectMedia:N,confirmMediaSelection:L,formatFileSize:R,saveMaterial:x}}},He={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Je={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},We={class:"sticky top-0 bg-background border-b border-border p-6"},Xe={class:"flex items-center justify-between"},Ye={class:"text-lg font-semibold"},Ze=["value"],$e={key:0},et={class:"space-y-3"},tt={key:0,class:"text-xs text-muted-foreground mt-1"},ot={key:0,class:"text-xs text-muted-foreground mt-1"},st={key:1},rt={key:2},lt={class:"flex items-center gap-2"},nt={class:"flex gap-4 pt-4 border-t border-border"},dt=["disabled"],at={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},it={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},ut={class:"p-6 border-b border-border"},mt={class:"flex items-center justify-between"},bt={class:"flex-1 overflow-y-auto p-6"},ct={key:0,class:"text-center py-12"},ft={key:1,class:"text-center py-12 text-muted-foreground"},gt={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},xt=["onClick"],pt={class:"text-sm font-medium truncate"},vt={class:"text-xs text-muted-foreground mt-1"},_t={class:"p-6 border-t border-border"},yt=["disabled"];function kt(a,e,u,o,m,y){return l(),n("div",He,[t("div",Je,[t("div",We,[t("div",Xe,[t("h3",Ye,i(o.isEditMode?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»"),1),t("button",{onClick:e[0]||(e[0]=s=>a.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("form",{onSubmit:e[13]||(e[13]=Q((...s)=>o.saveMaterial&&o.saveMaterial(...s),["prevent"])),class:"p-6 space-y-6"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.title=s),type:"text",required:"",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.title]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ *",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.category_id=s),required:"",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[e[18]||(e[18]=t("option",{value:""},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",-1)),(l(!0),n(U,null,V(o.categories,s=>(l(),n("option",{key:s.id,value:s.id},i(s.name),9,Ze))),128))],512),[[z,o.form.category_id,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.description=s),rows:"4",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.description]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° *",-1)),b(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.file_type=s),required:"",onChange:e[5]||(e[5]=(...s)=>o.handleFileTypeChange&&o.handleFileTypeChange(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[21]||(e[21]=[t("option",{value:"file"},"Ð¤Ð°Ð¹Ð» (Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð»Ð¸ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸)",-1),t("option",{value:"url"},"Ð’Ð½ÐµÑˆÐ½ÑÑ ÑÑÑ‹Ð»ÐºÐ°",-1),t("option",{value:"telegram_file_id"},"Telegram file_id",-1)])],544),[[z,o.form.file_type]])]),o.form.file_type==="file"?(l(),n("div",$e,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¤Ð°Ð¹Ð»",-1)),t("div",et,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» ",-1)),t("input",{ref:"fileInput",type:"file",onChange:e[6]||(e[6]=(...s)=>o.handleFileSelect&&o.handleFileSelect(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),o.selectedFile?(l(),n("p",tt," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+i(o.selectedFile.name),1)):c("",!0)]),e[25]||(e[25]=t("div",{class:"text-center text-sm text-muted-foreground"},"Ð¸Ð»Ð¸",-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=s=>o.showMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},i(o.form.media_id?"Ð¤Ð°Ð¹Ð» Ð²Ñ‹Ð±Ñ€Ð°Ð½":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»"),1),o.selectedMedia?(l(),n("p",ot," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+i(o.selectedMedia.name),1)):c("",!0)])])])):c("",!0),o.form.file_type==="url"?(l(),n("div",st,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"URL *",-1)),b(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.file_url=s),type:"url",required:"",placeholder:"https://example.com/file.pdf",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.file_url]])])):c("",!0),o.form.file_type==="telegram_file_id"?(l(),n("div",rt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram file_id *",-1)),b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.file_id=s),type:"text",required:"",placeholder:"BQACAgIAAxkBAAI...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background font-mono text-sm"},null,512),[[p,o.form.file_id]]),e[29]||(e[29]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ file_id Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ð² Ñ„Ð°Ð¹Ð» Ð±Ð¾Ñ‚Ñƒ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð² Ð¾Ñ‚Ð²ÐµÑ‚ API ",-1))])):c("",!0),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.order_index=s),type:"number",min:"0",placeholder:"0",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.order_index,void 0,{number:!0}]])]),t("div",null,[t("label",lt,[b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.is_active=s),type:"checkbox",class:"w-4 h-4"},null,512),[[H,o.form.is_active]]),e[31]||(e[31]=t("span",null,"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» Ð°ÐºÑ‚Ð¸Ð²ÐµÐ½",-1))])]),t("div",nt,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>a.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},i(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,dt)])],32),o.showMediaPicker?(l(),n("div",at,[t("div",it,[t("div",ut,[t("div",mt,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[14]||(e[14]=s=>o.showMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")]),b(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.mediaSearch=s),type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ„Ð°Ð¹Ð»Ð°...",class:"w-full mt-4 h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.mediaSearch]])]),t("div",bt,[o.loadingMedia?(l(),n("div",ct,[...e[33]||(e[33]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð²...",-1)])])):o.mediaFiles.length===0?(l(),n("div",ft," Ð¤Ð°Ð¹Ð»Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ ")):(l(),n("div",gt,[(l(!0),n(U,null,V(o.mediaFiles,s=>(l(),n("div",{key:s.id,onClick:r=>o.selectMedia(s),class:A(["p-4 border rounded-lg cursor-pointer transition-colors",o.form.media_id===s.id?"border-accent bg-accent/10":"border-border hover:bg-muted/10"])},[t("div",pt,i(s.name),1),t("div",vt,i(o.formatFileSize(s.size)),1)],10,xt))),128))]))]),t("div",_t,[t("button",{onClick:e[16]||(e[16]=(...s)=>o.confirmMediaSelection&&o.confirmMediaSelection(...s)),disabled:!o.form.media_id,class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ",8,yt)])])])):c("",!0)])])}const wt=F(Qe,[["render",kt]]),ht={name:"MaterialCategoryTree",components:{MaterialForm:wt,Media:$},props:{botId:{type:[String,Number],required:!0}},setup(a){const e=g(!1),u=g([]),o=g(!1),m=g(!1),y=g(null),s=g(null),r=async()=>{e.value=!0;try{const x=await S(`/bot-management/${a.botId}/materials/categories`);if(!x.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹");const d=await x.json();u.value=d.data||[];for(const _ of u.value)await w(_)}catch(x){console.error("Error fetching categories:",x)}finally{e.value=!1}},f=async()=>{const{value:x}=await h.fire({title:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",html:`
                    <input id="swal-icon" class="swal2-input" placeholder="Ð˜ÐºÐ¾Ð½ÐºÐ° (ÑÐ¼Ð¾Ð´Ð·Ð¸, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ðŸ§©)" maxlength="10">
                    <input id="swal-name" class="swal2-input" placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" required>
                    <textarea id="swal-description" class="swal2-textarea" placeholder="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"></textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº" value="0">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°",preConfirm:()=>{const d=document.getElementById("swal-name").value;return d?{name:d,icon:document.getElementById("swal-icon").value||null,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0}:(h.showValidationMessage("ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"),!1)}});if(x)try{if(!(await J(`/bot-management/${a.botId}/materials/categories`,x)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await h.fire({title:"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r(),o.value=!1}catch(d){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:d.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},w=async x=>{try{const d=await S(`/bot-management/${a.botId}/materials`,{category_id:x.id});if(d.ok){const _=await d.json();x.materials=_.data||[]}}catch(d){console.error("Error fetching materials:",d)}},k=async x=>{if((await h.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ?",text:`ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ "${x.name}" Ð¸ Ð²ÑÐµ ÐµÑ‘ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await K(`/bot-management/${a.botId}/materials/categories/${x.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await h.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(_){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:_.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},M=async x=>{if((await h.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»?",text:`ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» "${x.title}" Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await K(`/bot-management/${a.botId}/materials/${x.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°");await h.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(_){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:_.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error"})}},v=async x=>{const{value:d}=await h.fire({title:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",html:`
                    <input id="swal-icon" class="swal2-input" placeholder="Ð˜ÐºÐ¾Ð½ÐºÐ° (ÑÐ¼Ð¾Ð´Ð·Ð¸, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ðŸ§©)" value="${x.icon||""}" maxlength="10">
                    <input id="swal-name" class="swal2-input" placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" value="${x.name}">
                    <textarea id="swal-description" class="swal2-textarea" placeholder="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ">${x.description||""}</textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº" value="${x.order_index}">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°",preConfirm:()=>({name:document.getElementById("swal-name").value,icon:document.getElementById("swal-icon").value||null,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0})});if(d)try{if(!(await E(`/bot-management/${a.botId}/materials/categories/${x.id}`,d)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await h.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(_){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:_.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},q=x=>{s.value=x,m.value=!0},C=x=>{y.value=x,s.value=null,m.value=!0},B=g(!1),I=g(null),N=async x=>{I.value=x,B.value=!0},L=async x=>{if(!(!I.value||!x))try{if(!(await E(`/bot-management/${a.botId}/materials/categories/${I.value.id}`,{media_id:x.id})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");B.value=!1,I.value=null,await h.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(d){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:d.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}},R=async x=>{try{if(!(await E(`/bot-management/${a.botId}/materials/categories/${x.id}`,{media_id:null})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°");await h.fire({title:"Ð¤Ð°Ð¹Ð» ÑƒÐ´Ð°Ð»ÐµÐ½",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(d){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:d.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}};return j(()=>{r()}),{loading:e,categories:u,showCategoryModal:o,showMaterialForm:m,selectedCategory:y,selectedMaterial:s,fetchCategories:r,createCategory:f,deleteCategory:k,deleteMaterial:M,editCategory:v,editMaterial:q,showMaterialModal:C,selectCategoryFile:N,showMediaPicker:B,selectedCategoryForFile:I,handleFileSelected:L,removeCategoryFile:R}}},Ct={class:"material-category-tree space-y-4"},Mt={class:"flex items-center justify-between"},Bt={key:0,class:"text-center py-12"},It={key:1,class:"space-y-4"},Ut={class:"flex items-center justify-between mb-4"},Vt={class:"text-lg font-semibold"},St={key:0},Ft={key:0,class:"text-sm text-muted-foreground mt-1"},Tt={key:1,class:"text-xs text-muted-foreground mt-1"},Et={class:"flex gap-2"},jt=["onClick"],qt=["onClick"],Dt=["onClick"],Pt={key:0,class:"space-y-2"},zt={class:"font-medium"},At={key:0,class:"text-sm text-muted-foreground"},Nt={class:"text-xs text-muted-foreground"},Lt={class:"flex gap-2"},Rt=["onClick"],Gt=["onClick"],Ot={key:1,class:"text-sm text-muted-foreground p-3"},Kt={key:0,class:"text-center py-12 text-muted-foreground"},Qt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Ht={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md"},Jt={class:"p-6"},Wt={key:3,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},Xt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},Yt={class:"p-6 border-b border-border flex-shrink-0"},Zt={class:"flex items-center justify-between"},$t={class:"flex-1 overflow-y-auto min-h-0"};function eo(a,e,u,o,m,y){const s=T("Media");return l(),n("div",Ct,[t("div",Mt,[e[4]||(e[4]=t("h2",{class:"text-2xl font-semibold"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("button",{onClick:e[0]||(e[0]=r=>o.showCategoryModal=!0),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ ")]),o.loading?(l(),n("div",Bt,[...e[5]||(e[5]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²...",-1)])])):c("",!0),o.loading?c("",!0):(l(),n("div",It,[(l(!0),n(U,null,V(o.categories,r=>(l(),n("div",{key:r.id,class:"bg-card rounded-lg border border-border p-4"},[t("div",Ut,[t("div",null,[t("h3",Vt,[r.icon?(l(),n("span",St,i(r.icon),1)):c("",!0),X(i(r.name),1)]),r.description?(l(),n("p",Ft,i(r.description),1)):c("",!0),r.media?(l(),n("p",Tt," ðŸ“Ž Ð¤Ð°Ð¹Ð»: "+i(r.media.name),1)):c("",!0)]),t("div",Et,[r.media_id?(l(),n("button",{key:1,onClick:f=>o.removeCategoryFile(r),class:"px-3 py-1 text-xs bg-orange-500 hover:bg-orange-600 text-white rounded"}," ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» ",8,qt)):(l(),n("button",{key:0,onClick:f=>o.selectCategoryFile(r),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," ðŸ“Ž Ð¤Ð°Ð¹Ð» ",8,jt)),t("button",{onClick:f=>o.deleteCategory(r),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Dt)])]),r.materials&&r.materials.length>0?(l(),n("div",Pt,[(l(!0),n(U,null,V(r.materials,f=>(l(),n("div",{key:f.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("div",null,[t("p",zt,i(f.title),1),f.description?(l(),n("p",At,i(f.description),1)):c("",!0),t("p",Nt," Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹: "+i(f.download_count||0),1)]),t("div",Lt,[t("button",{onClick:w=>o.editMaterial(f),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",8,Rt),t("button",{onClick:w=>o.deleteMaterial(f),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Gt)])]))),128))])):(l(),n("div",Ot," ÐÐµÑ‚ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² "))]))),128)),o.categories.length===0?(l(),n("div",Kt," ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ. ")):c("",!0)])),o.showCategoryModal?(l(),n("div",Qt,[t("div",Ht,[t("div",Jt,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",-1)),t("button",{onClick:e[1]||(e[1]=(...r)=>o.createCategory&&o.createCategory(...r)),class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg"}," ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ñƒ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ "),t("button",{onClick:e[2]||(e[2]=r=>o.showCategoryModal=!1),class:"w-full mt-2 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° ")])])])):c("",!0),o.showMediaPicker?(l(),n("div",Wt,[t("div",Xt,[t("div",Yt,[t("div",Zt,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[3]||(e[3]=r=>{o.showMediaPicker=!1,o.selectedCategoryForFile=null}),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",$t,[P(s,{"selection-mode":!0,"count-file":1,"selected-files":o.selectedCategoryForFile?.media_id?[{id:o.selectedCategoryForFile.media_id}]:[],onFileSelected:o.handleFileSelected},null,8,["selected-files","onFileSelected"])])])])):c("",!0)])}const to=F(ht,[["render",eo]]),oo={name:"BotSettingsForm",props:{botId:{type:[String,Number],required:!0}},emits:["updated"],setup(a,{emit:e}){const u=g(!1),o=g(!1),m=g({required_channel_id:null,required_channel_username:"",admin_telegram_ids:[],yandex_maps_url:"",welcome_message:"",other_settings:{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}),y=async()=>{u.value=!0;try{const w=await S(`/bot-management/${a.botId}/settings`);if(!w.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº");const k=await w.json();if(k.success&&k.data){const M=k.data.settings||{},v=M.messages||{};m.value={required_channel_id:k.data.required_channel_id||null,required_channel_username:k.data.required_channel_username||"",admin_telegram_ids:k.data.admin_telegram_ids||[],yandex_maps_url:k.data.yandex_maps_url||"",welcome_message:k.data.welcome_message||"",messages:{subscription:v.subscription||{required_text:"",subscribe_button:"",check_button:""},consultation:v.consultation||{description:"",form_name_label:"",form_phone_label:"",form_description_label:"",thank_you:"",start_button:"",skip_description_button:""},materials:v.materials||{list_description:"",download_button:"",back_to_list:""},menu:v.menu||{materials_button:"",consultation_button:"",review_button:"",back_to_menu:""},notifications:v.notifications||{consultation_template:""}},other_settings:M.other_settings||{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}}}catch(w){console.error("Error fetching settings:",w)}finally{u.value=!1}},s=async()=>{o.value=!0;try{const w=await E(`/bot-management/${a.botId}/settings`,{required_channel_id:m.value.required_channel_id,required_channel_username:m.value.required_channel_username,admin_telegram_ids:m.value.admin_telegram_ids,yandex_maps_url:m.value.yandex_maps_url,welcome_message:m.value.welcome_message,settings:{messages:m.value.messages,other_settings:m.value.other_settings}});if(!w.ok){const k=await w.json().catch(()=>({}));throw new Error(k.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº")}await h.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated")}catch(w){h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:w.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº",icon:"error",confirmButtonText:"ÐžÐš"})}finally{o.value=!1}},r=()=>{m.value.admin_telegram_ids.push(null)},f=w=>{m.value.admin_telegram_ids.splice(w,1)};return j(()=>{y()}),{loading:u,saving:o,activeTab,tabs,form:m,fetchSettings:y,saveSettings:s,addAdmin:r,removeAdmin:f}}},so={class:"bot-settings-form space-y-6"},ro={class:"border-b border-border"},lo={class:"flex -mb-px"},no=["onClick"],ao={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-4"},io={class:"space-y-2"},uo=["onUpdate:modelValue"],mo=["onClick"],bo={key:1,class:"bg-card rounded-lg border border-border p-6 space-y-6"},co={class:"space-y-4"},fo={class:"space-y-4 pt-4 border-t border-border"},go={class:"space-y-4 pt-4 border-t border-border"},xo={class:"space-y-4 pt-4 border-t border-border"},po={class:"space-y-4 pt-4 border-t border-border"},vo={key:2,class:"bg-card rounded-lg border border-border p-6 space-y-4"},_o={class:"flex items-center gap-2"},yo={class:"flex gap-4"},ko=["disabled"];function wo(a,e,u,o,m,y){return l(),n("div",so,[e[64]||(e[64]=t("h2",{class:"text-2xl font-semibold"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±Ð¾Ñ‚Ð°",-1)),t("div",ro,[t("nav",lo,[(l(!0),n(U,null,V(o.tabs,s=>(l(),n("button",{key:s.key,onClick:r=>o.activeTab=s.key,class:A(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===s.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},i(s.label),11,no))),128))])]),t("form",{onSubmit:e[26]||(e[26]=Q((...s)=>o.saveSettings&&o.saveSettings(...s),["prevent"])),class:"space-y-6"},[o.activeTab==="main"?(l(),n("div",ao,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold"},"ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"ID ÐºÐ°Ð½Ð°Ð»Ð°",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.required_channel_id=s),type:"number",placeholder:"-1001234567890",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.required_channel_id,void 0,{number:!0}]]),e[28]||(e[28]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ID ÐºÐ°Ð½Ð°Ð»Ð° (Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¾Ñ‚Ð° @userinfobot) ",-1))]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium mb-2"},"Username ÐºÐ°Ð½Ð°Ð»Ð°",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.required_channel_username=s),type:"text",placeholder:"aip_channel",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.required_channel_username]]),e[30]||(e[30]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Username ÐºÐ°Ð½Ð°Ð»Ð° Ð±ÐµÐ· ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° @ ",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram ID Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²",-1)),t("div",io,[(l(!0),n(U,null,V(o.form.admin_telegram_ids,(s,r)=>(l(),n("div",{key:r,class:"flex gap-2"},[b(t("input",{"onUpdate:modelValue":f=>o.form.admin_telegram_ids[r]=f,type:"number",placeholder:"123456789",class:"flex-1 h-10 px-3 border border-border rounded-lg bg-background"},null,8,uo),[[p,o.form.admin_telegram_ids[r],void 0,{number:!0}]]),t("button",{type:"button",onClick:f=>o.removeAdmin(r),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,mo)]))),128)),t("button",{type:"button",onClick:e[2]||(e[2]=(...s)=>o.addAdmin&&o.addAdmin(...s)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° ")])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ñ‹",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.yandex_maps_url=s),type:"url",placeholder:"https://yandex.ru/maps/org/...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.yandex_maps_url]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.welcome_message=s),rows:"6",placeholder:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.welcome_message]])])])):c("",!0),o.activeTab==="messages"?(l(),n("div",bo,[e[59]||(e[59]=t("h3",{class:"text-lg font-semibold"},"Ð¢ÐµÐºÑÑ‚Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð±Ð¾Ñ‚Ð°",-1)),t("div",co,[e[38]||(e[38]=t("h4",{class:"text-md font-medium"},"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° ÐºÐ°Ð½Ð°Ð»",-1)),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.form.messages.subscription.required_text=s),rows:"3",placeholder:"Ð”Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð±ÐµÑ‚Ð°-Ð²ÐµÑ€ÑÐ¸Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.messages.subscription.required_text]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),b(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.messages.subscription.subscribe_button=s),type:"text",placeholder:"ðŸ”” ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° Telegram",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.subscription.subscribe_button]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸",-1)),b(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.form.messages.subscription.check_button=s),type:"text",placeholder:"âœ… Ð¯ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð»ÑÑ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.subscription.check_button]])])]),t("div",fo,[e[46]||(e[46]=t("h4",{class:"text-md font-medium"},"ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ",-1)),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.messages.consultation.description=s),rows:"4",placeholder:"Ð•ÑÐ»Ð¸ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð±Ð¸Ð·Ð½ÐµÑÑƒ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.messages.consultation.description]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð˜Ð¼Ñ"',-1)),b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.messages.consultation.form_name_label=s),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¸Ð¼Ñ:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.consultation.form_name_label]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"',-1)),b(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.messages.consultation.form_phone_label=s),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.consultation.form_phone_label]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"',-1)),b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.messages.consultation.form_description_label=s),type:"text",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾...):",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.consultation.form_description_label]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.messages.consultation.thank_you=s),rows:"2",placeholder:"Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾. ÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.messages.consultation.thank_you]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"',-1)),b(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.form.messages.consultation.start_button=s),type:"text",placeholder:"ðŸ“ Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.consultation.start_button]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"',-1)),b(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.form.messages.consultation.skip_description_button=s),type:"text",placeholder:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.consultation.skip_description_button]])])]),t("div",go,[e[50]||(e[50]=t("h4",{class:"text-md font-medium"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),b(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.form.messages.materials.list_description=s),rows:"3",placeholder:"ÐœÑ‹ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð»Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¿Ð¾ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑÐ¼...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[p,o.form.messages.materials.list_description]])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.form.messages.materials.download_button=s),type:"text",placeholder:"â¬‡ï¸ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.materials.download_button]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´"',-1)),b(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.form.messages.materials.back_to_list=s),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.materials.back_to_list]])])]),t("div",xo,[e[55]||(e[55]=t("h4",{class:"text-md font-medium"},"Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",-1)),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"',-1)),b(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.form.messages.menu.materials_button=s),type:"text",placeholder:"ðŸ“‚ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.menu.materials_button]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ"',-1)),b(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>o.form.messages.menu.consultation_button=s),type:"text",placeholder:"ðŸ“ž Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.menu.consultation_button]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐžÑ‚Ð·Ñ‹Ð²"',-1)),b(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.form.messages.menu.review_button=s),type:"text",placeholder:"â­ ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð² Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ð°Ñ…",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.menu.review_button]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ"',-1)),b(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.form.messages.menu.back_to_menu=s),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.messages.menu.back_to_menu]])])]),t("div",po,[e[58]||(e[58]=t("h4",{class:"text-md font-medium"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼",-1)),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¨Ð°Ð±Ð»Ð¾Ð½ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½Ð¾Ð²Ð¾Ð¹ Ð·Ð°ÑÐ²ÐºÐµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=s=>o.form.messages.notifications.consultation_template=s),rows:"6",placeholder:`ÐÐ¾Ð²Ð°Ñ Ð·Ð°ÑÐ²ÐºÐ° Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ

Ð˜Ð¼Ñ: {name}
Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: {phone}
ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: {description}
Ð”Ð°Ñ‚Ð°: {date}`,class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none font-mono text-sm"},null,512),[[p,o.form.messages.notifications.consultation_template]]),e[57]||(e[57]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: {name}, {phone}, {description}, {date} ",-1))])])])):c("",!0),o.activeTab==="advanced"?(l(),n("div",vo,[e[63]||(e[63]=t("h3",{class:"text-lg font-semibold"},"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[t("label",_o,[b(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>o.form.other_settings.phone_validation_strict=s),type:"checkbox",class:"w-4 h-4"},null,512),[[H,o.form.other_settings.phone_validation_strict]]),e[60]||(e[60]=t("span",null,"Ð¡Ñ‚Ñ€Ð¾Ð³Ð°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°",-1))])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium mb-2"},"ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð»Ð¸Ð½Ð° Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[24]||(e[24]=s=>o.form.other_settings.max_description_length=s),type:"number",min:"10",max:"5000",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.other_settings.max_description_length,void 0,{number:!0}]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸ (ÑÐµÐº)",-1)),b(t("input",{"onUpdate:modelValue":e[25]||(e[25]=s=>o.form.other_settings.subscription_check_timeout=s),type:"number",min:"1",max:"30",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[p,o.form.other_settings.subscription_check_timeout,void 0,{number:!0}]])])])):c("",!0),t("div",yo,[t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50"},i(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"),9,ko)])],32)])}const ho=F(oo,[["render",wo]]),Co={name:"BotStatistics",props:{botId:{type:[String,Number],required:!0}},setup(a){const e=g(!1),u=g(null),o=async()=>{e.value=!0;try{const m=await S(`/bot-management/${a.botId}/statistics`);if(!m.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸");const y=await m.json();y.success&&y.data&&(u.value=y.data)}catch(m){console.error("Error fetching statistics:",m)}finally{e.value=!1}};return j(()=>{o()}),{loading:e,statistics:u}}},Mo={class:"bot-statistics space-y-6"},Bo={key:0,class:"text-center py-12"},Io={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Uo={class:"bg-card rounded-lg border border-border p-6"},Vo={class:"text-3xl font-semibold"},So={class:"bg-card rounded-lg border border-border p-6"},Fo={class:"text-3xl font-semibold"},To={class:"bg-card rounded-lg border border-border p-6"},Eo={class:"text-3xl font-semibold"},jo={class:"bg-card rounded-lg border border-border p-6"},qo={class:"text-3xl font-semibold"},Do={key:2,class:"bg-card rounded-lg border border-border p-6"},Po={class:"grid grid-cols-3 gap-4"},zo={class:"text-2xl font-semibold"},Ao={class:"text-2xl font-semibold"},No={class:"text-2xl font-semibold"},Lo={key:3,class:"bg-card rounded-lg border border-border p-6"},Ro={class:"space-y-2"},Go={class:"font-medium"},Oo={class:"text-sm text-muted-foreground"};function Ko(a,e,u,o,m,y){return l(),n("div",Mo,[e[10]||(e[10]=t("h2",{class:"text-2xl font-semibold"},"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",-1)),o.loading?(l(),n("div",Bo,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸...",-1)])])):c("",!0),!o.loading&&o.statistics?(l(),n("div",Io,[t("div",Uo,[e[1]||(e[1]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",-1)),t("p",Vo,i(o.statistics.total_users||0),1)]),t("div",So,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð° 30 Ð´Ð½ÐµÐ¹",-1)),t("p",Fo,i(o.statistics.active_users_30d||0),1)]),t("div",To,[e[3]||(e[3]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÑÐ²Ð¾Ðº",-1)),t("p",Eo,i(o.statistics.total_consultations||0),1)]),t("div",jo,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),t("p",qo,i(o.statistics.materials_downloads||0),1)])])):c("",!0),!o.loading&&o.statistics?(l(),n("div",Do,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼",-1)),t("div",Po,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-muted-foreground"},"ÐÐ¾Ð²Ñ‹Ðµ",-1)),t("p",zo,i(o.statistics.consultations_by_status?.new||0),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-muted-foreground"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1)),t("p",Ao,i(o.statistics.consultations_by_status?.in_progress||0),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-muted-foreground"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)),t("p",No,i(o.statistics.consultations_by_status?.closed||0),1)])])])):c("",!0),!o.loading&&o.statistics&&o.statistics.popular_materials?.length>0?(l(),n("div",Lo,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",Ro,[(l(!0),n(U,null,V(o.statistics.popular_materials,s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("p",Go,i(s.title),1),t("p",Oo,i(s.download_count||0)+" ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹",1)]))),128))])])):c("",!0)])}const Qo=F(Co,[["render",Ko]]),Ho={name:"BotManagement",components:{ConsultationTable:Ke,MaterialCategoryTree:to,BotSettingsForm:ho,BotStatistics:Qo},setup(){const a=Z(),e=Y(()=>a.params.botId),u=g(!1),o=g(null),m=g(null),y=g("consultations"),s=[{key:"consultations",label:"Ð—Ð°ÑÐ²ÐºÐ¸"},{key:"materials",label:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"},{key:"settings",label:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"},{key:"statistics",label:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"}],r=async()=>{u.value=!0,o.value=null;try{const f=await S(`/bots/${e.value}`);if(!f.ok){const k=await f.json().catch(()=>({}));throw new Error(k.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°")}const w=await f.json();m.value=w.data||null}catch(f){o.value=f.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°"}finally{u.value=!1}};return j(()=>{r()}),{botId:e,loading:u,error:o,bot:m,activeTab:y,tabs:s,fetchBot:r}}},Jo={class:"bot-management-page space-y-6"},Wo={class:"flex items-center justify-between"},Xo={key:0,class:"text-muted-foreground mt-1"},Yo={key:0,class:"flex items-center justify-center py-12"},Zo={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},$o={class:"text-destructive"},es={key:2,class:"bg-card rounded-lg border border-border"},ts={class:"border-b border-border"},os={class:"flex -mb-px"},ss=["onClick"],rs={class:"p-6"},ls={key:0},ns={key:1},ds={key:2},as={key:3};function is(a,e,u,o,m,y){const s=T("ConsultationTable"),r=T("MaterialCategoryTree"),f=T("BotSettingsForm"),w=T("BotStatistics");return l(),n("div",Jo,[t("div",Wo,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-3xl font-semibold text-foreground"},"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð¾Ð¼",-1)),o.bot?(l(),n("p",Xo,i(o.bot.name),1)):c("",!0)]),t("button",{onClick:e[0]||(e[0]=k=>a.$router.push({name:"admin.bots"})),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"}," â† ÐÐ°Ð·Ð°Ð´ Ðº Ð±Ð¾Ñ‚Ð°Ð¼ ")]),o.loading?(l(),n("div",Yo,[...e[2]||(e[2]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…...",-1)])])):c("",!0),o.error?(l(),n("div",Zo,[t("p",$o,i(o.error),1)])):c("",!0),!o.loading&&o.bot?(l(),n("div",es,[t("div",ts,[t("nav",os,[(l(!0),n(U,null,V(o.tabs,k=>(l(),n("button",{key:k.key,onClick:M=>o.activeTab=k.key,class:A(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===k.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},i(k.label),11,ss))),128))])]),t("div",rs,[o.activeTab==="consultations"?(l(),n("div",ls,[P(s,{"bot-id":o.botId},null,8,["bot-id"])])):c("",!0),o.activeTab==="materials"?(l(),n("div",ns,[P(r,{"bot-id":o.botId},null,8,["bot-id"])])):c("",!0),o.activeTab==="settings"?(l(),n("div",ds,[P(f,{"bot-id":o.botId,onUpdated:o.fetchBot},null,8,["bot-id","onUpdated"])])):c("",!0),o.activeTab==="statistics"?(l(),n("div",as,[P(w,{"bot-id":o.botId},null,8,["bot-id"])])):c("",!0)])])):c("",!0)])}const fs=F(Ho,[["render",is]]);export{fs as default};
