import{_ as q,r as c,c as n,a as t,t as a,b as f,d as b,I as O,v as x,o as r,n as H,k as z,x as $,F as S,q as V,h as L,p as R,w as X,N as Y,e as ee,f as K,m as te,l as oe}from"./admin-_-eYyiWE.js";import{a as P,c as T,b as Z,d as W}from"./api-BACpyIk9.js";import{S as w}from"./sweetalert2.esm.all-C0u8rGqG.js";const se={name:"ConsultationDetail",props:{consultation:{type:Object,required:!0},botId:{type:[String,Number],required:!0}},emits:["close","updated"],setup(d,{emit:e}){const i=c(!1),o=c({status:d.consultation.status,admin_notes:d.consultation.admin_notes||""});return{form:o,saving:i,saveConsultation:async()=>{i.value=!0;try{const s=await P(`/bot-management/${d.botId}/consultations/${d.consultation.id}`,o.value);if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ")}await w.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated"),e("close")}catch(s){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:s.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ",icon:"error",confirmButtonText:"ÐžÐš"})}finally{i.value=!1}},formatDate:s=>new Date(s).toLocaleString("ru-RU")}}},re={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},le={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},ne={class:"sticky top-0 bg-background border-b border-border p-6"},de={class:"flex items-center justify-between"},ae={class:"text-lg font-semibold"},ie={class:"p-6 space-y-6"},ue={key:0},me={class:"bg-muted/30 rounded-lg p-4"},be={class:"text-sm"},ce={key:0,class:"text-sm"},fe={key:1,class:"text-sm"},ge={class:"space-y-3"},xe={class:"text-sm"},ve={class:"text-sm"},pe={key:0},_e={class:"text-sm whitespace-pre-wrap"},ye={class:"text-sm"},ke={class:"flex gap-2 pt-4 border-t border-border"},we=["disabled"];function he(d,e,i,o,m,y){return r(),n("div",re,[t("div",le,[t("div",ne,[t("div",de,[t("h3",ae,"Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÑÐ²ÐºÐ¸ #"+a(i.consultation.id),1),t("button",{onClick:e[0]||(e[0]=s=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",ie,[i.consultation.user?(r(),n("div",ue,[e[5]||(e[5]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",-1)),t("div",me,[t("p",be,"ID: "+a(i.consultation.user.telegram_user_id),1),i.consultation.user.username?(r(),n("p",ce,"@"+a(i.consultation.user.username),1)):f("",!0),i.consultation.user.first_name?(r(),n("p",fe,a(i.consultation.user.first_name)+" "+a(i.consultation.user.last_name||""),1)):f("",!0)])])):f("",!0),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð·Ð°ÑÐ²ÐºÐµ",-1)),t("div",ge,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð˜Ð¼Ñ",-1)),t("p",xe,a(i.consultation.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½",-1)),t("p",ve,a(i.consultation.phone),1)]),i.consultation.description?(r(),n("div",pe,[e[8]||(e[8]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),t("p",_e,a(i.consultation.description),1)])):f("",!0),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.status=s),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[9]||(e[9]=[t("option",{value:"new"},"ÐÐ¾Ð²Ð°Ñ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°",-1)])],512),[[O,o.form.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°",-1)),b(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.admin_notes=s),rows:"4",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ..."},null,512),[[x,o.form.admin_notes]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ",-1)),t("p",ye,a(o.formatDate(i.consultation.created_at)),1)])])]),t("div",ke,[t("button",{onClick:e[3]||(e[3]=s=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{onClick:e[4]||(e[4]=(...s)=>o.saveConsultation&&o.saveConsultation(...s)),disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,we)])])])])}const Ce=q(se,[["render",he]]),Me={name:"ConsultationTable",components:{ConsultationDetail:Ce},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),i=c([]),o=c(null),m=c(1),y=c(20),s=c(0),l=c({status:"",date_from:"",date_to:""}),_=async()=>{e.value=!0;try{const M={page:m.value,per_page:y.value,...l.value},I=await T(`/bot-management/${d.botId}/consultations`,M);if(!I.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº");const U=await I.json();i.value=U.data.consultations||[],s.value=U.data.total||0}catch(M){console.error("Error fetching consultations:",M)}finally{e.value=!1}},h=()=>{l.value={status:"",date_from:"",date_to:""},m.value=1,_()},k=M=>{o.value=M},F=M=>({new:"ÐÐ¾Ð²Ð°Ñ",in_progress:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",closed:"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°"})[M]||M,v=M=>({new:"bg-blue-500/10 text-blue-500",in_progress:"bg-yellow-500/10 text-yellow-500",closed:"bg-green-500/10 text-green-500"})[M]||"bg-gray-500/10 text-gray-500",A=M=>new Date(M).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return H(m,()=>{_()}),z(()=>{_()}),{loading:e,consultations:i,selectedConsultation:o,currentPage:m,perPage:y,total:s,filters:l,fetchConsultations:_,resetFilters:h,showDetail:k,getStatusLabel:F,getStatusClass:v,formatDate:A}}},Be={class:"consultation-table space-y-4"},Fe={class:"bg-muted/30 rounded-lg border border-border p-4"},Ie={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ue={class:"flex items-end"},Se={key:0,class:"text-center py-12"},Ve={key:1,class:"bg-background rounded-lg border border-border overflow-hidden"},Te={class:"overflow-x-auto"},Ee={class:"w-full"},je={class:"divide-y divide-border"},qe={class:"px-6 py-4 text-sm"},De={class:"px-6 py-4 text-sm"},Pe={class:"px-6 py-4 text-sm"},ze={class:"px-6 py-4"},Ae={class:"px-6 py-4 text-sm"},Ne={class:"px-6 py-4 text-right"},Le=["onClick"],Re={key:0,class:"px-6 py-4 border-t border-border flex items-center justify-between"},Ge={class:"text-sm text-muted-foreground"},Ke={class:"flex gap-2"},Oe=["disabled"],Qe=["disabled"];function He(d,e,i,o,m,y){const s=L("ConsultationDetail");return r(),n("div",Be,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between"},[t("h2",{class:"text-2xl font-semibold"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ")],-1)),t("div",Fe,[t("div",Ie,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.filters.status=l),onChange:e[1]||(e[1]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[10]||(e[10]=[t("option",{value:""},"Ð’ÑÐµ",-1),t("option",{value:"new"},"ÐÐ¾Ð²Ñ‹Ðµ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)])],544),[[O,o.filters.status]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð¾Ñ‚",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.filters.date_from=l),type:"date",onChange:e[3]||(e[3]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[x,o.filters.date_from]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð´Ð¾",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.filters.date_to=l),type:"date",onChange:e[5]||(e[5]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[x,o.filters.date_to]])]),t("div",Ue,[t("button",{onClick:e[6]||(e[6]=(...l)=>o.resetFilters&&o.resetFilters(...l)),class:"w-full h-10 px-4 border border-border bg-background hover:bg-muted/10 rounded-lg"}," Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ")])])]),o.loading?(r(),n("div",Se,[...e[14]||(e[14]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°ÑÐ²Ð¾Ðº...",-1)])])):f("",!0),o.loading?f("",!0):(r(),n("div",Ve,[t("div",Te,[t("table",Ee,[e[15]||(e[15]=t("thead",{class:"bg-muted/30 border-b border-border"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð˜Ð¼Ñ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð”Ð°Ñ‚Ð°"),t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase"},"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ")])],-1)),t("tbody",je,[(r(!0),n(S,null,V(o.consultations,l=>(r(),n("tr",{key:l.id,class:"hover:bg-muted/10"},[t("td",qe,a(l.id),1),t("td",De,a(l.name),1),t("td",Pe,a(l.phone),1),t("td",ze,[t("span",{class:R(["px-2 py-1 text-xs rounded-md",o.getStatusClass(l.status)])},a(o.getStatusLabel(l.status)),3)]),t("td",Ae,a(o.formatDate(l.created_at)),1),t("td",Ne,[t("button",{onClick:_=>o.showDetail(l),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð”ÐµÑ‚Ð°Ð»Ð¸ ",8,Le)])]))),128))])])]),o.total>o.perPage?(r(),n("div",Re,[t("div",Ge," ÐŸÐ¾ÐºÐ°Ð·Ð°Ð½Ð¾ "+a((o.currentPage-1)*o.perPage+1)+" - "+a(Math.min(o.currentPage*o.perPage,o.total))+" Ð¸Ð· "+a(o.total),1),t("div",Ke,[t("button",{onClick:e[7]||(e[7]=l=>o.currentPage--),disabled:o.currentPage===1,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," ÐÐ°Ð·Ð°Ð´ ",8,Oe),t("button",{onClick:e[8]||(e[8]=l=>o.currentPage++),disabled:o.currentPage*o.perPage>=o.total,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," Ð’Ð¿ÐµÑ€ÐµÐ´ ",8,Qe)])])):f("",!0)])),o.selectedConsultation?(r(),$(s,{key:2,consultation:o.selectedConsultation,"bot-id":i.botId,onClose:e[9]||(e[9]=l=>o.selectedConsultation=null),onUpdated:o.fetchConsultations},null,8,["consultation","bot-id","onUpdated"])):f("",!0)])}const Je=q(Me,[["render",He]]),We={name:"MaterialForm",props:{botId:{type:[String,Number],required:!0},categoryId:{type:[String,Number],default:null},material:{type:Object,default:null}},emits:["close","saved"],setup(d,{emit:e}){const i=c(!1),o=c(!1),m=c(!1),y=c(""),s=c([]),l=c(null),_=c(null),h=c(null),k=c(!!d.material),F=c([]),v=c({title:"",category_id:d.categoryId||null,description:"",file_type:"file",file_url:"",file_id:"",media_id:null,order_index:0,is_active:!0}),A=async()=>{try{const g=await T(`/bot-management/${d.botId}/materials/categories`);if(g.ok){const B=await g.json();F.value=B.data||[]}}catch(g){console.error("Error fetching categories:",g)}},M=async()=>{o.value=!0;try{const g={};y.value&&(g.search=y.value);const B=await T("/media",g);if(B.ok){const j=await B.json();s.value=j.data||[]}}catch(g){console.error("Error fetching media:",g)}finally{o.value=!1}},I=()=>{v.value.file_url="",v.value.file_id="",v.value.media_id=null,l.value=null,_.value=null},U=g=>{const B=g.target.files[0];B&&(l.value=B,v.value.media_id=null,_.value=null)},N=g=>{v.value.media_id=g.id,_.value=g,l.value=null},D=()=>{v.value.media_id&&(m.value=!1)},E=g=>{if(!g)return"0 B";const B=1024,j=["B","KB","MB","GB"],G=Math.floor(Math.log(g)/Math.log(B));return Math.round(g/Math.pow(B,G)*100)/100+" "+j[G]},Q=async()=>{i.value=!0;try{const g=new FormData;if(g.append("title",v.value.title),g.append("category_id",v.value.category_id),g.append("description",v.value.description||""),g.append("file_type",v.value.file_type),g.append("order_index",v.value.order_index||0),g.append("is_active",v.value.is_active?1:0),v.value.file_type==="file")if(l.value)g.append("file",l.value);else if(v.value.media_id)g.append("media_id",v.value.media_id);else throw new Error("ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð»Ð¸ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸");else v.value.file_type==="url"?g.append("file_url",v.value.file_url):v.value.file_type==="telegram_file_id"&&g.append("file_id",v.value.file_id);let B;if(k.value?B=await P(`/bot-management/${d.botId}/materials/${d.material.id}`,g):B=await Z(`/bot-management/${d.botId}/materials`,g),!B.ok){const j=await B.json().catch(()=>({}));throw new Error(j.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°")}await w.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("saved"),e("close")}catch(g){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:g.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error",confirmButtonText:"ÐžÐš"})}finally{i.value=!1}};return d.material&&(v.value={title:d.material.title||"",category_id:d.material.category_id||d.categoryId||null,description:d.material.description||"",file_type:d.material.file_type||"file",file_url:d.material.file_url||"",file_id:d.material.file_id||"",media_id:d.material.media_id||null,order_index:d.material.order_index||0,is_active:d.material.is_active!==void 0?d.material.is_active:!0},d.material.media&&(_.value=d.material.media)),H(m,g=>{g&&M()}),H(y,()=>{m.value&&M()}),z(()=>{A()}),{saving:i,loadingMedia:o,showMediaPicker:m,mediaSearch:y,mediaFiles:s,selectedFile:l,selectedMedia:_,fileInput:h,isEditMode:k,categories:F,form:v,fetchMediaFiles:M,handleFileTypeChange:I,handleFileSelect:U,selectMedia:N,confirmMediaSelection:D,formatFileSize:E,saveMaterial:Q}}},Xe={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Ye={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},Ze={class:"sticky top-0 bg-background border-b border-border p-6"},$e={class:"flex items-center justify-between"},et={class:"text-lg font-semibold"},tt=["value"],ot={key:0},st={class:"space-y-3"},rt={key:0,class:"text-xs text-muted-foreground mt-1"},lt={key:0,class:"text-xs text-muted-foreground mt-1"},nt={key:1},dt={key:2},at={class:"flex items-center gap-2"},it={class:"flex gap-4 pt-4 border-t border-border"},ut=["disabled"],mt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},bt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},ct={class:"p-6 border-b border-border"},ft={class:"flex items-center justify-between"},gt={class:"flex-1 overflow-y-auto p-6"},xt={key:0,class:"text-center py-12"},vt={key:1,class:"text-center py-12 text-muted-foreground"},pt={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},_t=["onClick"],yt={class:"text-sm font-medium truncate"},kt={class:"text-xs text-muted-foreground mt-1"},wt={class:"p-6 border-t border-border"},ht=["disabled"];function Ct(d,e,i,o,m,y){return r(),n("div",Xe,[t("div",Ye,[t("div",Ze,[t("div",$e,[t("h3",et,a(o.isEditMode?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»"),1),t("button",{onClick:e[0]||(e[0]=s=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("form",{onSubmit:e[13]||(e[13]=X((...s)=>o.saveMaterial&&o.saveMaterial(...s),["prevent"])),class:"p-6 space-y-6"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.title=s),type:"text",required:"",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.title]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ *",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.category_id=s),required:"",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[e[18]||(e[18]=t("option",{value:""},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",-1)),(r(!0),n(S,null,V(o.categories,s=>(r(),n("option",{key:s.id,value:s.id},a(s.name),9,tt))),128))],512),[[O,o.form.category_id,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.description=s),rows:"4",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.description]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° *",-1)),b(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.file_type=s),required:"",onChange:e[5]||(e[5]=(...s)=>o.handleFileTypeChange&&o.handleFileTypeChange(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[21]||(e[21]=[t("option",{value:"file"},"Ð¤Ð°Ð¹Ð» (Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð»Ð¸ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸)",-1),t("option",{value:"url"},"Ð’Ð½ÐµÑˆÐ½ÑÑ ÑÑÑ‹Ð»ÐºÐ°",-1),t("option",{value:"telegram_file_id"},"Telegram file_id",-1)])],544),[[O,o.form.file_type]])]),o.form.file_type==="file"?(r(),n("div",ot,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¤Ð°Ð¹Ð»",-1)),t("div",st,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» ",-1)),t("input",{ref:"fileInput",type:"file",onChange:e[6]||(e[6]=(...s)=>o.handleFileSelect&&o.handleFileSelect(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),o.selectedFile?(r(),n("p",rt," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+a(o.selectedFile.name),1)):f("",!0)]),e[25]||(e[25]=t("div",{class:"text-center text-sm text-muted-foreground"},"Ð¸Ð»Ð¸",-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=s=>o.showMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.form.media_id?"Ð¤Ð°Ð¹Ð» Ð²Ñ‹Ð±Ñ€Ð°Ð½":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»"),1),o.selectedMedia?(r(),n("p",lt," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+a(o.selectedMedia.name),1)):f("",!0)])])])):f("",!0),o.form.file_type==="url"?(r(),n("div",nt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"URL *",-1)),b(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.file_url=s),type:"url",required:"",placeholder:"https://example.com/file.pdf",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.file_url]])])):f("",!0),o.form.file_type==="telegram_file_id"?(r(),n("div",dt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram file_id *",-1)),b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.file_id=s),type:"text",required:"",placeholder:"BQACAgIAAxkBAAI...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background font-mono text-sm"},null,512),[[x,o.form.file_id]]),e[29]||(e[29]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ file_id Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ð² Ñ„Ð°Ð¹Ð» Ð±Ð¾Ñ‚Ñƒ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð² Ð¾Ñ‚Ð²ÐµÑ‚ API ",-1))])):f("",!0),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.order_index=s),type:"number",min:"0",placeholder:"0",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.order_index,void 0,{number:!0}]])]),t("div",null,[t("label",at,[b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.is_active=s),type:"checkbox",class:"w-4 h-4"},null,512),[[Y,o.form.is_active]]),e[31]||(e[31]=t("span",null,"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» Ð°ÐºÑ‚Ð¸Ð²ÐµÐ½",-1))])]),t("div",it,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,ut)])],32),o.showMediaPicker?(r(),n("div",mt,[t("div",bt,[t("div",ct,[t("div",ft,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[14]||(e[14]=s=>o.showMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")]),b(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.mediaSearch=s),type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ„Ð°Ð¹Ð»Ð°...",class:"w-full mt-4 h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.mediaSearch]])]),t("div",gt,[o.loadingMedia?(r(),n("div",xt,[...e[33]||(e[33]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð²...",-1)])])):o.mediaFiles.length===0?(r(),n("div",vt," Ð¤Ð°Ð¹Ð»Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ ")):(r(),n("div",pt,[(r(!0),n(S,null,V(o.mediaFiles,s=>(r(),n("div",{key:s.id,onClick:l=>o.selectMedia(s),class:R(["p-4 border rounded-lg cursor-pointer transition-colors",o.form.media_id===s.id?"border-accent bg-accent/10":"border-border hover:bg-muted/10"])},[t("div",yt,a(s.name),1),t("div",kt,a(o.formatFileSize(s.size)),1)],10,_t))),128))]))]),t("div",wt,[t("button",{onClick:e[16]||(e[16]=(...s)=>o.confirmMediaSelection&&o.confirmMediaSelection(...s)),disabled:!o.form.media_id,class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ",8,ht)])])])):f("",!0)])])}const Mt=q(We,[["render",Ct]]),Bt={name:"MaterialCategoryTree",components:{MaterialForm:Mt},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),i=c([]),o=c(!1),m=c(!1),y=c(null),s=c(null),l=async()=>{e.value=!0;try{const u=await T(`/bot-management/${d.botId}/materials/categories`);if(!u.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹");const p=await u.json();i.value=p.data||[];for(const C of i.value)await h(C)}catch(u){console.error("Error fetching categories:",u)}finally{e.value=!1}},_=async()=>{const{value:u}=await w.fire({title:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",html:`
                    <input id="swal-icon" class="swal2-input" placeholder="Ð˜ÐºÐ¾Ð½ÐºÐ° (ÑÐ¼Ð¾Ð´Ð·Ð¸, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ðŸ§©)" maxlength="10">
                    <input id="swal-name" class="swal2-input" placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" required>
                    <textarea id="swal-description" class="swal2-textarea" placeholder="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"></textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº" value="0">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°",preConfirm:()=>{const p=document.getElementById("swal-name").value;return p?{name:p,icon:document.getElementById("swal-icon").value||null,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0}:(w.showValidationMessage("ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"),!1)}});if(u)try{if(!(await Z(`/bot-management/${d.botId}/materials/categories`,u)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await w.fire({title:"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l(),o.value=!1}catch(p){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:p.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},h=async u=>{try{const p=await T(`/bot-management/${d.botId}/materials`,{category_id:u.id});if(p.ok){const C=await p.json();u.materials=C.data||[]}}catch(p){console.error("Error fetching materials:",p)}},k=async u=>{if((await w.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ?",text:`ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ "${u.name}" Ð¸ Ð²ÑÐµ ÐµÑ‘ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await W(`/bot-management/${d.botId}/materials/categories/${u.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await w.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l()}catch(C){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:C.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},F=async u=>{if((await w.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»?",text:`ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» "${u.title}" Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await W(`/bot-management/${d.botId}/materials/${u.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°");await w.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l()}catch(C){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:C.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error"})}},v=async u=>{const{value:p}=await w.fire({title:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",html:`
                    <input id="swal-icon" class="swal2-input" placeholder="Ð˜ÐºÐ¾Ð½ÐºÐ° (ÑÐ¼Ð¾Ð´Ð·Ð¸, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ðŸ§©)" value="${u.icon||""}" maxlength="10">
                    <input id="swal-name" class="swal2-input" placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" value="${u.name}">
                    <textarea id="swal-description" class="swal2-textarea" placeholder="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ">${u.description||""}</textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº" value="${u.order_index}">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°",preConfirm:()=>({name:document.getElementById("swal-name").value,icon:document.getElementById("swal-icon").value||null,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0})});if(p)try{if(!(await P(`/bot-management/${d.botId}/materials/categories/${u.id}`,p)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await w.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l()}catch(C){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:C.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},A=u=>{s.value=u,m.value=!0},M=u=>{y.value=u,s.value=null,m.value=!0},I=c(!1),U=c(null),N=c(!1),D=c(""),E=c([]),Q=async u=>{U.value=u,I.value=!0,await g()},g=async()=>{N.value=!0;try{const u={per_page:100};D.value&&(u.search=D.value);const p=await T("/media",u);if(p.ok){const C=await p.json();C.data&&Array.isArray(C.data)?E.value=C.data:Array.isArray(C)?E.value=C:E.value=[]}else throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ´Ð¸Ð°-Ñ„Ð°Ð¹Ð»Ð¾Ð²")}catch(u){console.error("Error fetching media:",u),w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:u.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð¾Ð²",icon:"error"})}finally{N.value=!1}},B=async u=>{if(U.value)try{if(!(await P(`/bot-management/${d.botId}/materials/categories/${U.value.id}`,{media_id:u.id})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");I.value=!1,U.value=null,D.value="",E.value=[],await w.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l()}catch(p){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:p.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}},j=async u=>{try{if(!(await P(`/bot-management/${d.botId}/materials/categories/${u.id}`,{media_id:null})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°");await w.fire({title:"Ð¤Ð°Ð¹Ð» ÑƒÐ´Ð°Ð»ÐµÐ½",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),l()}catch(p){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:p.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}},G=u=>{if(!u)return"0 B";const p=1024,C=["B","KB","MB","GB"],J=Math.floor(Math.log(u)/Math.log(p));return Math.round(u/Math.pow(p,J)*100)/100+" "+C[J]};return z(()=>{l()}),{loading:e,categories:i,showCategoryModal:o,showMaterialForm:m,selectedCategory:y,selectedMaterial:s,fetchCategories:l,createCategory:_,deleteCategory:k,deleteMaterial:F,editCategory:v,editMaterial:A,showMaterialModal:M,selectCategoryFile:Q,showMediaPicker:I,selectedCategoryForFile:U,loadingMedia:N,mediaSearch:D,mediaFiles:E,fetchMediaFiles:g,selectMedia:B,removeCategoryFile:j,formatFileSize:G}}},Ft={class:"material-category-tree space-y-4"},It={class:"flex items-center justify-between"},Ut={key:0,class:"text-center py-12"},St={key:1,class:"space-y-4"},Vt={class:"flex items-center justify-between mb-4"},Tt={class:"text-lg font-semibold"},Et={key:0},jt={key:0,class:"text-sm text-muted-foreground mt-1"},qt={key:1,class:"text-xs text-muted-foreground mt-1"},Dt={class:"flex gap-2"},Pt=["onClick"],zt=["onClick"],At=["onClick"],Nt=["onClick"],Lt=["onClick"],Rt={key:0,class:"space-y-2"},Gt={class:"font-medium"},Kt={key:0,class:"text-sm text-muted-foreground"},Ot={class:"text-xs text-muted-foreground"},Qt={class:"flex gap-2"},Ht=["onClick"],Jt=["onClick"],Wt={key:1,class:"text-sm text-muted-foreground p-3"},Xt={key:0,class:"text-center py-12 text-muted-foreground"},Yt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Zt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md"},$t={class:"p-6"},eo={key:3,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},to={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},oo={class:"p-6 border-b border-border"},so={class:"flex items-center justify-between"},ro={class:"flex-1 overflow-y-auto p-6"},lo={key:0,class:"text-center py-12"},no={key:1,class:"text-center py-12 text-muted-foreground"},ao={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},io=["onClick"],uo={class:"text-sm font-medium truncate"},mo={class:"text-xs text-muted-foreground mt-1"},bo={class:"p-6 border-t border-border flex items-center justify-between"},co={class:"flex gap-2 ml-auto"};function fo(d,e,i,o,m,y){return r(),n("div",Ft,[t("div",It,[e[8]||(e[8]=t("h2",{class:"text-2xl font-semibold"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("button",{onClick:e[0]||(e[0]=s=>o.showCategoryModal=!0),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ ")]),o.loading?(r(),n("div",Ut,[...e[9]||(e[9]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²...",-1)])])):f("",!0),o.loading?f("",!0):(r(),n("div",St,[(r(!0),n(S,null,V(o.categories,s=>(r(),n("div",{key:s.id,class:"bg-card rounded-lg border border-border p-4"},[t("div",Vt,[t("div",null,[t("h3",Tt,[s.icon?(r(),n("span",Et,a(s.icon),1)):f("",!0),ee(a(s.name),1)]),s.description?(r(),n("p",jt,a(s.description),1)):f("",!0),s.media?(r(),n("p",qt," ðŸ“Ž Ð¤Ð°Ð¹Ð»: "+a(s.media.name),1)):f("",!0)]),t("div",Dt,[t("button",{onClick:l=>o.editCategory(s),class:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white rounded"}," Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",8,Pt),s.media_id?(r(),n("button",{key:1,onClick:l=>o.removeCategoryFile(s),class:"px-3 py-1 text-xs bg-orange-500 hover:bg-orange-600 text-white rounded"}," ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» ",8,At)):(r(),n("button",{key:0,onClick:l=>o.selectCategoryFile(s),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," ðŸ“Ž Ð¤Ð°Ð¹Ð» ",8,zt)),t("button",{onClick:l=>o.deleteCategory(s),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Nt),t("button",{onClick:l=>o.showMaterialModal(s),class:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded"}," + ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» ",8,Lt)])]),s.materials&&s.materials.length>0?(r(),n("div",Rt,[(r(!0),n(S,null,V(s.materials,l=>(r(),n("div",{key:l.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("div",null,[t("p",Gt,a(l.title),1),l.description?(r(),n("p",Kt,a(l.description),1)):f("",!0),t("p",Ot," Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹: "+a(l.download_count||0),1)]),t("div",Qt,[t("button",{onClick:_=>o.editMaterial(l),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",8,Ht),t("button",{onClick:_=>o.deleteMaterial(l),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Jt)])]))),128))])):(r(),n("div",Wt," ÐÐµÑ‚ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² "))]))),128)),o.categories.length===0?(r(),n("div",Xt," ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ. ")):f("",!0)])),o.showCategoryModal?(r(),n("div",Yt,[t("div",Zt,[t("div",$t,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",-1)),t("button",{onClick:e[1]||(e[1]=(...s)=>o.createCategory&&o.createCategory(...s)),class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg"}," ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ñƒ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ "),t("button",{onClick:e[2]||(e[2]=s=>o.showCategoryModal=!1),class:"w-full mt-2 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° ")])])])):f("",!0),o.showMediaPicker?(r(),n("div",eo,[t("div",to,[t("div",oo,[t("div",so,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[3]||(e[3]=s=>{o.showMediaPicker=!1,o.selectedCategoryForFile=null,o.mediaSearch="",o.mediaFiles=[]}),class:"text-muted-foreground hover:text-foreground"}," âœ• ")]),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.mediaSearch=s),onInput:e[5]||(e[5]=(...s)=>o.fetchMediaFiles&&o.fetchMediaFiles(...s)),type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ„Ð°Ð¹Ð»Ð°...",class:"w-full mt-4 h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[x,o.mediaSearch]])]),t("div",ro,[o.loadingMedia?(r(),n("div",lo,[...e[12]||(e[12]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð²...",-1)])])):o.mediaFiles.length===0?(r(),n("div",no," Ð¤Ð°Ð¹Ð»Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ ")):(r(),n("div",ao,[(r(!0),n(S,null,V(o.mediaFiles,s=>(r(),n("div",{key:s.id,onClick:l=>o.selectMedia(s),class:R(["p-4 border rounded-lg cursor-pointer transition-colors",o.selectedCategoryForFile?.media_id===s.id?"border-accent bg-accent/10":"border-border hover:bg-muted/10"])},[t("div",uo,a(s.original_name||s.name),1),t("div",mo,a(o.formatFileSize(s.size)),1)],10,io))),128))]))]),t("div",bo,[o.selectedCategoryForFile?.media_id?(r(),n("button",{key:0,onClick:e[6]||(e[6]=s=>o.removeCategoryFile(o.selectedCategoryForFile)),class:"px-4 py-2 text-sm bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 rounded-lg"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» ")):f("",!0),t("div",co,[t("button",{onClick:e[7]||(e[7]=s=>{o.showMediaPicker=!1,o.selectedCategoryForFile=null,o.mediaSearch="",o.mediaFiles=[]}),class:"px-4 py-2 text-sm border border-border rounded-lg hover:bg-muted/10"}," ÐžÑ‚Ð¼ÐµÐ½Ð° ")])])])])):f("",!0)])}const go=q(Bt,[["render",fo]]),xo={name:"BotSettingsForm",props:{botId:{type:[String,Number],required:!0}},emits:["updated"],setup(d,{emit:e}){const i=c(!1),o=c(!1),m=c({required_channel_id:null,required_channel_username:"",admin_telegram_ids:[],yandex_maps_url:"",welcome_message:"",other_settings:{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}),y=async()=>{i.value=!0;try{const h=await T(`/bot-management/${d.botId}/settings`);if(!h.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº");const k=await h.json();if(k.success&&k.data){const F=k.data.settings||{},v=F.messages||{};m.value={required_channel_id:k.data.required_channel_id||null,required_channel_username:k.data.required_channel_username||"",admin_telegram_ids:k.data.admin_telegram_ids||[],yandex_maps_url:k.data.yandex_maps_url||"",welcome_message:k.data.welcome_message||"",messages:{subscription:v.subscription||{required_text:"",subscribe_button:"",check_button:""},consultation:v.consultation||{description:"",form_name_label:"",form_phone_label:"",form_description_label:"",thank_you:"",start_button:"",skip_description_button:""},materials:v.materials||{list_description:"",download_button:"",back_to_list:""},menu:v.menu||{materials_button:"",consultation_button:"",review_button:"",back_to_menu:""},notifications:v.notifications||{consultation_template:""}},other_settings:F.other_settings||{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}}}catch(h){console.error("Error fetching settings:",h)}finally{i.value=!1}},s=async()=>{o.value=!0;try{const h=await P(`/bot-management/${d.botId}/settings`,{required_channel_id:m.value.required_channel_id,required_channel_username:m.value.required_channel_username,admin_telegram_ids:m.value.admin_telegram_ids,yandex_maps_url:m.value.yandex_maps_url,welcome_message:m.value.welcome_message,settings:{messages:m.value.messages,other_settings:m.value.other_settings}});if(!h.ok){const k=await h.json().catch(()=>({}));throw new Error(k.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº")}await w.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated")}catch(h){w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:h.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº",icon:"error",confirmButtonText:"ÐžÐš"})}finally{o.value=!1}},l=()=>{m.value.admin_telegram_ids.push(null)},_=h=>{m.value.admin_telegram_ids.splice(h,1)};return z(()=>{y()}),{loading:i,saving:o,activeTab,tabs,form:m,fetchSettings:y,saveSettings:s,addAdmin:l,removeAdmin:_}}},vo={class:"bot-settings-form space-y-6"},po={class:"border-b border-border"},_o={class:"flex -mb-px"},yo=["onClick"],ko={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-4"},wo={class:"space-y-2"},ho=["onUpdate:modelValue"],Co=["onClick"],Mo={key:1,class:"bg-card rounded-lg border border-border p-6 space-y-6"},Bo={class:"space-y-4"},Fo={class:"space-y-4 pt-4 border-t border-border"},Io={class:"space-y-4 pt-4 border-t border-border"},Uo={class:"space-y-4 pt-4 border-t border-border"},So={class:"space-y-4 pt-4 border-t border-border"},Vo={key:2,class:"bg-card rounded-lg border border-border p-6 space-y-4"},To={class:"flex items-center gap-2"},Eo={class:"flex gap-4"},jo=["disabled"];function qo(d,e,i,o,m,y){return r(),n("div",vo,[e[64]||(e[64]=t("h2",{class:"text-2xl font-semibold"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±Ð¾Ñ‚Ð°",-1)),t("div",po,[t("nav",_o,[(r(!0),n(S,null,V(o.tabs,s=>(r(),n("button",{key:s.key,onClick:l=>o.activeTab=s.key,class:R(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===s.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},a(s.label),11,yo))),128))])]),t("form",{onSubmit:e[26]||(e[26]=X((...s)=>o.saveSettings&&o.saveSettings(...s),["prevent"])),class:"space-y-6"},[o.activeTab==="main"?(r(),n("div",ko,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold"},"ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"ID ÐºÐ°Ð½Ð°Ð»Ð°",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.required_channel_id=s),type:"number",placeholder:"-1001234567890",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.required_channel_id,void 0,{number:!0}]]),e[28]||(e[28]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ID ÐºÐ°Ð½Ð°Ð»Ð° (Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¾Ñ‚Ð° @userinfobot) ",-1))]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium mb-2"},"Username ÐºÐ°Ð½Ð°Ð»Ð°",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.required_channel_username=s),type:"text",placeholder:"aip_channel",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.required_channel_username]]),e[30]||(e[30]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Username ÐºÐ°Ð½Ð°Ð»Ð° Ð±ÐµÐ· ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° @ ",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram ID Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²",-1)),t("div",wo,[(r(!0),n(S,null,V(o.form.admin_telegram_ids,(s,l)=>(r(),n("div",{key:l,class:"flex gap-2"},[b(t("input",{"onUpdate:modelValue":_=>o.form.admin_telegram_ids[l]=_,type:"number",placeholder:"123456789",class:"flex-1 h-10 px-3 border border-border rounded-lg bg-background"},null,8,ho),[[x,o.form.admin_telegram_ids[l],void 0,{number:!0}]]),t("button",{type:"button",onClick:_=>o.removeAdmin(l),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Co)]))),128)),t("button",{type:"button",onClick:e[2]||(e[2]=(...s)=>o.addAdmin&&o.addAdmin(...s)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° ")])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ñ‹",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.yandex_maps_url=s),type:"url",placeholder:"https://yandex.ru/maps/org/...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.yandex_maps_url]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.welcome_message=s),rows:"6",placeholder:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.welcome_message]])])])):f("",!0),o.activeTab==="messages"?(r(),n("div",Mo,[e[59]||(e[59]=t("h3",{class:"text-lg font-semibold"},"Ð¢ÐµÐºÑÑ‚Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð±Ð¾Ñ‚Ð°",-1)),t("div",Bo,[e[38]||(e[38]=t("h4",{class:"text-md font-medium"},"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° ÐºÐ°Ð½Ð°Ð»",-1)),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.form.messages.subscription.required_text=s),rows:"3",placeholder:"Ð”Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð±ÐµÑ‚Ð°-Ð²ÐµÑ€ÑÐ¸Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.subscription.required_text]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),b(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.messages.subscription.subscribe_button=s),type:"text",placeholder:"ðŸ”” ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° Telegram",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.subscription.subscribe_button]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸",-1)),b(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.form.messages.subscription.check_button=s),type:"text",placeholder:"âœ… Ð¯ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð»ÑÑ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.subscription.check_button]])])]),t("div",Fo,[e[46]||(e[46]=t("h4",{class:"text-md font-medium"},"ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ",-1)),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.messages.consultation.description=s),rows:"4",placeholder:"Ð•ÑÐ»Ð¸ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð±Ð¸Ð·Ð½ÐµÑÑƒ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.consultation.description]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð˜Ð¼Ñ"',-1)),b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.messages.consultation.form_name_label=s),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¸Ð¼Ñ:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_name_label]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"',-1)),b(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.messages.consultation.form_phone_label=s),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_phone_label]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"',-1)),b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.messages.consultation.form_description_label=s),type:"text",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾...):",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_description_label]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸",-1)),b(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.messages.consultation.thank_you=s),rows:"2",placeholder:"Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾. ÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.consultation.thank_you]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"',-1)),b(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.form.messages.consultation.start_button=s),type:"text",placeholder:"ðŸ“ Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.start_button]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"',-1)),b(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.form.messages.consultation.skip_description_button=s),type:"text",placeholder:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.skip_description_button]])])]),t("div",Io,[e[50]||(e[50]=t("h4",{class:"text-md font-medium"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),b(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.form.messages.materials.list_description=s),rows:"3",placeholder:"ÐœÑ‹ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð»Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¿Ð¾ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑÐ¼...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.materials.list_description]])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.form.messages.materials.download_button=s),type:"text",placeholder:"â¬‡ï¸ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.materials.download_button]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´"',-1)),b(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.form.messages.materials.back_to_list=s),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.materials.back_to_list]])])]),t("div",Uo,[e[55]||(e[55]=t("h4",{class:"text-md font-medium"},"Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",-1)),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"',-1)),b(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.form.messages.menu.materials_button=s),type:"text",placeholder:"ðŸ“‚ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.materials_button]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ"',-1)),b(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>o.form.messages.menu.consultation_button=s),type:"text",placeholder:"ðŸ“ž Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.consultation_button]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐžÑ‚Ð·Ñ‹Ð²"',-1)),b(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.form.messages.menu.review_button=s),type:"text",placeholder:"â­ ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð² Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ð°Ñ…",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.review_button]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ"',-1)),b(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.form.messages.menu.back_to_menu=s),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.back_to_menu]])])]),t("div",So,[e[58]||(e[58]=t("h4",{class:"text-md font-medium"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼",-1)),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¨Ð°Ð±Ð»Ð¾Ð½ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½Ð¾Ð²Ð¾Ð¹ Ð·Ð°ÑÐ²ÐºÐµ",-1)),b(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=s=>o.form.messages.notifications.consultation_template=s),rows:"6",placeholder:`ÐÐ¾Ð²Ð°Ñ Ð·Ð°ÑÐ²ÐºÐ° Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ

Ð˜Ð¼Ñ: {name}
Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: {phone}
ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: {description}
Ð”Ð°Ñ‚Ð°: {date}`,class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none font-mono text-sm"},null,512),[[x,o.form.messages.notifications.consultation_template]]),e[57]||(e[57]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: {name}, {phone}, {description}, {date} ",-1))])])])):f("",!0),o.activeTab==="advanced"?(r(),n("div",Vo,[e[63]||(e[63]=t("h3",{class:"text-lg font-semibold"},"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[t("label",To,[b(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>o.form.other_settings.phone_validation_strict=s),type:"checkbox",class:"w-4 h-4"},null,512),[[Y,o.form.other_settings.phone_validation_strict]]),e[60]||(e[60]=t("span",null,"Ð¡Ñ‚Ñ€Ð¾Ð³Ð°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°",-1))])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium mb-2"},"ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð»Ð¸Ð½Ð° Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ",-1)),b(t("input",{"onUpdate:modelValue":e[24]||(e[24]=s=>o.form.other_settings.max_description_length=s),type:"number",min:"10",max:"5000",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.max_description_length,void 0,{number:!0}]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸ (ÑÐµÐº)",-1)),b(t("input",{"onUpdate:modelValue":e[25]||(e[25]=s=>o.form.other_settings.subscription_check_timeout=s),type:"number",min:"1",max:"30",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.subscription_check_timeout,void 0,{number:!0}]])])])):f("",!0),t("div",Eo,[t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"),9,jo)])],32)])}const Do=q(xo,[["render",qo]]),Po={name:"BotStatistics",props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),i=c(null),o=async()=>{e.value=!0;try{const m=await T(`/bot-management/${d.botId}/statistics`);if(!m.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸");const y=await m.json();y.success&&y.data&&(i.value=y.data)}catch(m){console.error("Error fetching statistics:",m)}finally{e.value=!1}};return z(()=>{o()}),{loading:e,statistics:i}}},zo={class:"bot-statistics space-y-6"},Ao={key:0,class:"text-center py-12"},No={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Lo={class:"bg-card rounded-lg border border-border p-6"},Ro={class:"text-3xl font-semibold"},Go={class:"bg-card rounded-lg border border-border p-6"},Ko={class:"text-3xl font-semibold"},Oo={class:"bg-card rounded-lg border border-border p-6"},Qo={class:"text-3xl font-semibold"},Ho={class:"bg-card rounded-lg border border-border p-6"},Jo={class:"text-3xl font-semibold"},Wo={key:2,class:"bg-card rounded-lg border border-border p-6"},Xo={class:"grid grid-cols-3 gap-4"},Yo={class:"text-2xl font-semibold"},Zo={class:"text-2xl font-semibold"},$o={class:"text-2xl font-semibold"},es={key:3,class:"bg-card rounded-lg border border-border p-6"},ts={class:"space-y-2"},os={class:"font-medium"},ss={class:"text-sm text-muted-foreground"};function rs(d,e,i,o,m,y){return r(),n("div",zo,[e[10]||(e[10]=t("h2",{class:"text-2xl font-semibold"},"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",-1)),o.loading?(r(),n("div",Ao,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸...",-1)])])):f("",!0),!o.loading&&o.statistics?(r(),n("div",No,[t("div",Lo,[e[1]||(e[1]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",-1)),t("p",Ro,a(o.statistics.total_users||0),1)]),t("div",Go,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð° 30 Ð´Ð½ÐµÐ¹",-1)),t("p",Ko,a(o.statistics.active_users_30d||0),1)]),t("div",Oo,[e[3]||(e[3]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÑÐ²Ð¾Ðº",-1)),t("p",Qo,a(o.statistics.total_consultations||0),1)]),t("div",Ho,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),t("p",Jo,a(o.statistics.materials_downloads||0),1)])])):f("",!0),!o.loading&&o.statistics?(r(),n("div",Wo,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼",-1)),t("div",Xo,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-muted-foreground"},"ÐÐ¾Ð²Ñ‹Ðµ",-1)),t("p",Yo,a(o.statistics.consultations_by_status?.new||0),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-muted-foreground"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1)),t("p",Zo,a(o.statistics.consultations_by_status?.in_progress||0),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-muted-foreground"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)),t("p",$o,a(o.statistics.consultations_by_status?.closed||0),1)])])])):f("",!0),!o.loading&&o.statistics&&o.statistics.popular_materials?.length>0?(r(),n("div",es,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",ts,[(r(!0),n(S,null,V(o.statistics.popular_materials,s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("p",os,a(s.title),1),t("p",ss,a(s.download_count||0)+" ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹",1)]))),128))])])):f("",!0)])}const ls=q(Po,[["render",rs]]),ns={name:"BotManagement",components:{ConsultationTable:Je,MaterialCategoryTree:go,BotSettingsForm:Do,BotStatistics:ls},setup(){const d=oe(),e=te(()=>d.params.botId),i=c(!1),o=c(null),m=c(null),y=c("consultations"),s=[{key:"consultations",label:"Ð—Ð°ÑÐ²ÐºÐ¸"},{key:"materials",label:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"},{key:"settings",label:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"},{key:"statistics",label:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"}],l=async()=>{i.value=!0,o.value=null;try{const _=await T(`/bots/${e.value}`);if(!_.ok){const k=await _.json().catch(()=>({}));throw new Error(k.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°")}const h=await _.json();m.value=h.data||null}catch(_){o.value=_.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°"}finally{i.value=!1}};return z(()=>{l()}),{botId:e,loading:i,error:o,bot:m,activeTab:y,tabs:s,fetchBot:l}}},ds={class:"bot-management-page space-y-6"},as={class:"flex items-center justify-between"},is={key:0,class:"text-muted-foreground mt-1"},us={key:0,class:"flex items-center justify-center py-12"},ms={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},bs={class:"text-destructive"},cs={key:2,class:"bg-card rounded-lg border border-border"},fs={class:"border-b border-border"},gs={class:"flex -mb-px"},xs=["onClick"],vs={class:"p-6"},ps={key:0},_s={key:1},ys={key:2},ks={key:3};function ws(d,e,i,o,m,y){const s=L("ConsultationTable"),l=L("MaterialCategoryTree"),_=L("BotSettingsForm"),h=L("BotStatistics");return r(),n("div",ds,[t("div",as,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-3xl font-semibold text-foreground"},"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð¾Ð¼",-1)),o.bot?(r(),n("p",is,a(o.bot.name),1)):f("",!0)]),t("button",{onClick:e[0]||(e[0]=k=>d.$router.push({name:"admin.bots"})),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"}," â† ÐÐ°Ð·Ð°Ð´ Ðº Ð±Ð¾Ñ‚Ð°Ð¼ ")]),o.loading?(r(),n("div",us,[...e[2]||(e[2]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…...",-1)])])):f("",!0),o.error?(r(),n("div",ms,[t("p",bs,a(o.error),1)])):f("",!0),!o.loading&&o.bot?(r(),n("div",cs,[t("div",fs,[t("nav",gs,[(r(!0),n(S,null,V(o.tabs,k=>(r(),n("button",{key:k.key,onClick:F=>o.activeTab=k.key,class:R(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===k.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},a(k.label),11,xs))),128))])]),t("div",vs,[o.activeTab==="consultations"?(r(),n("div",ps,[K(s,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="materials"?(r(),n("div",_s,[K(l,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="settings"?(r(),n("div",ys,[K(_,{"bot-id":o.botId,onUpdated:o.fetchBot},null,8,["bot-id","onUpdated"])])):f("",!0),o.activeTab==="statistics"?(r(),n("div",ks,[K(h,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0)])])):f("",!0)])}const Bs=q(ns,[["render",ws]]);export{Bs as default};
