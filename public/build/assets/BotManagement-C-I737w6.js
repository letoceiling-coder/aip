import{_ as O,r as c,c as n,a as t,t as a,b as f,d as u,C as J,v as x,o as s,n as fe,k as Z,x as ge,F as z,q as W,h as A,p as X,w as re,D as de,f as G,e as ve,m as ye,l as ke}from"./admin-DB5RB5Gb.js";import{b as Y,a as I,c as ae,d as pe}from"./api-DccBIR6h.js";import{S as D}from"./sweetalert2.esm.all-C0u8rGqG.js";import xe from"./Media-CMVwlJ4t.js";const we={name:"ConsultationDetail",props:{consultation:{type:Object,required:!0},botId:{type:[String,Number],required:!0}},emits:["close","updated"],setup(d,{emit:e}){const m=c(!1),o=c({status:d.consultation.status,admin_notes:d.consultation.admin_notes||""});return{form:o,saving:m,saveConsultation:async()=>{m.value=!0;try{const r=await Y(`/bot-management/${d.botId}/consultations/${d.consultation.id}`,o.value);if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error(l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ")}await D.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated"),e("close")}catch(r){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:r.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ",icon:"error",confirmButtonText:"ÐžÐš"})}finally{m.value=!1}},formatDate:r=>new Date(r).toLocaleString("ru-RU")}}},he={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Ce={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Me={class:"sticky top-0 bg-background border-b border-border p-6"},Fe={class:"flex items-center justify-between"},Se={class:"text-lg font-semibold"},De={class:"p-6 space-y-6"},Ue={key:0},Ve={class:"bg-muted/30 rounded-lg p-4"},Be={class:"text-sm"},je={key:0,class:"text-sm"},Te={key:1,class:"text-sm"},Pe={class:"space-y-3"},Ie={class:"text-sm"},Ee={class:"text-sm"},ze={key:0},We={class:"text-sm whitespace-pre-wrap"},qe={class:"text-sm"},Ae={class:"flex gap-2 pt-4 border-t border-border"},Ge=["disabled"];function Ne(d,e,m,o,w,M){return s(),n("div",he,[t("div",Ce,[t("div",Me,[t("div",Fe,[t("h3",Se,"Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÑÐ²ÐºÐ¸ #"+a(m.consultation.id),1),t("button",{onClick:e[0]||(e[0]=r=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",De,[m.consultation.user?(s(),n("div",Ue,[e[5]||(e[5]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",-1)),t("div",Ve,[t("p",Be,"ID: "+a(m.consultation.user.telegram_user_id),1),m.consultation.user.username?(s(),n("p",je,"@"+a(m.consultation.user.username),1)):f("",!0),m.consultation.user.first_name?(s(),n("p",Te,a(m.consultation.user.first_name)+" "+a(m.consultation.user.last_name||""),1)):f("",!0)])])):f("",!0),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð·Ð°ÑÐ²ÐºÐµ",-1)),t("div",Pe,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð˜Ð¼Ñ",-1)),t("p",Ie,a(m.consultation.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½",-1)),t("p",Ee,a(m.consultation.phone),1)]),m.consultation.description?(s(),n("div",ze,[e[8]||(e[8]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),t("p",We,a(m.consultation.description),1)])):f("",!0),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.status=r),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[9]||(e[9]=[t("option",{value:"new"},"ÐÐ¾Ð²Ð°Ñ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°",-1)])],512),[[J,o.form.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°",-1)),u(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.admin_notes=r),rows:"4",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ..."},null,512),[[x,o.form.admin_notes]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ",-1)),t("p",qe,a(o.formatDate(m.consultation.created_at)),1)])])]),t("div",Ae,[t("button",{onClick:e[3]||(e[3]=r=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{onClick:e[4]||(e[4]=(...r)=>o.saveConsultation&&o.saveConsultation(...r)),disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,Ge)])])])])}const Oe=O(we,[["render",Ne]]),Le={name:"ConsultationTable",components:{ConsultationDetail:Oe},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),m=c([]),o=c(null),w=c(1),M=c(20),r=c(0),l=c({status:"",date_from:"",date_to:""}),_=async()=>{e.value=!0;try{const F={page:w.value,per_page:M.value,...l.value},E=await I(`/bot-management/${d.botId}/consultations`,F);if(!E.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº");const N=await E.json();m.value=N.data.consultations||[],r.value=N.data.total||0}catch(F){console.error("Error fetching consultations:",F)}finally{e.value=!1}},g=()=>{l.value={status:"",date_from:"",date_to:""},w.value=1,_()},h=F=>{o.value=F},v=F=>({new:"ÐÐ¾Ð²Ð°Ñ",in_progress:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",closed:"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð°"})[F]||F,b=F=>({new:"bg-blue-500/10 text-blue-500",in_progress:"bg-yellow-500/10 text-yellow-500",closed:"bg-green-500/10 text-green-500"})[F]||"bg-gray-500/10 text-gray-500",U=F=>new Date(F).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return fe(w,()=>{_()}),Z(()=>{_()}),{loading:e,consultations:m,selectedConsultation:o,currentPage:w,perPage:M,total:r,filters:l,fetchConsultations:_,resetFilters:g,showDetail:h,getStatusLabel:v,getStatusClass:b,formatDate:U}}},Re={class:"consultation-table space-y-4"},Ke={class:"bg-muted/30 rounded-lg border border-border p-4"},He={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Qe={class:"flex items-end"},Je={key:0,class:"text-center py-12"},Xe={key:1,class:"bg-background rounded-lg border border-border overflow-hidden"},Ye={class:"overflow-x-auto"},Ze={class:"w-full"},$e={class:"divide-y divide-border"},et={class:"px-6 py-4 text-sm"},tt={class:"px-6 py-4 text-sm"},ot={class:"px-6 py-4 text-sm"},lt={class:"px-6 py-4"},rt={class:"px-6 py-4 text-sm"},st={class:"px-6 py-4 text-right"},nt=["onClick"],dt={key:0,class:"px-6 py-4 border-t border-border flex items-center justify-between"},at={class:"text-sm text-muted-foreground"},it={class:"flex gap-2"},ut=["disabled"],mt=["disabled"];function ct(d,e,m,o,w,M){const r=A("ConsultationDetail");return s(),n("div",Re,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between"},[t("h2",{class:"text-2xl font-semibold"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ")],-1)),t("div",Ke,[t("div",He,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.filters.status=l),onChange:e[1]||(e[1]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[10]||(e[10]=[t("option",{value:""},"Ð’ÑÐµ",-1),t("option",{value:"new"},"ÐÐ¾Ð²Ñ‹Ðµ",-1),t("option",{value:"in_progress"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1),t("option",{value:"closed"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)])],544),[[J,o.filters.status]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð¾Ñ‚",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.filters.date_from=l),type:"date",onChange:e[3]||(e[3]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[x,o.filters.date_from]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”Ð°Ñ‚Ð° Ð´Ð¾",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.filters.date_to=l),type:"date",onChange:e[5]||(e[5]=(...l)=>o.fetchConsultations&&o.fetchConsultations(...l)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[x,o.filters.date_to]])]),t("div",Qe,[t("button",{onClick:e[6]||(e[6]=(...l)=>o.resetFilters&&o.resetFilters(...l)),class:"w-full h-10 px-4 border border-border bg-background hover:bg-muted/10 rounded-lg"}," Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ")])])]),o.loading?(s(),n("div",Je,[...e[14]||(e[14]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°ÑÐ²Ð¾Ðº...",-1)])])):f("",!0),o.loading?f("",!0):(s(),n("div",Xe,[t("div",Ye,[t("table",Ze,[e[15]||(e[15]=t("thead",{class:"bg-muted/30 border-b border-border"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð˜Ð¼Ñ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Ð”Ð°Ñ‚Ð°"),t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase"},"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ")])],-1)),t("tbody",$e,[(s(!0),n(z,null,W(o.consultations,l=>(s(),n("tr",{key:l.id,class:"hover:bg-muted/10"},[t("td",et,a(l.id),1),t("td",tt,a(l.name),1),t("td",ot,a(l.phone),1),t("td",lt,[t("span",{class:X(["px-2 py-1 text-xs rounded-md",o.getStatusClass(l.status)])},a(o.getStatusLabel(l.status)),3)]),t("td",rt,a(o.formatDate(l.created_at)),1),t("td",st,[t("button",{onClick:_=>o.showDetail(l),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð”ÐµÑ‚Ð°Ð»Ð¸ ",8,nt)])]))),128))])])]),o.total>o.perPage?(s(),n("div",dt,[t("div",at," ÐŸÐ¾ÐºÐ°Ð·Ð°Ð½Ð¾ "+a((o.currentPage-1)*o.perPage+1)+" - "+a(Math.min(o.currentPage*o.perPage,o.total))+" Ð¸Ð· "+a(o.total),1),t("div",it,[t("button",{onClick:e[7]||(e[7]=l=>o.currentPage--),disabled:o.currentPage===1,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," ÐÐ°Ð·Ð°Ð´ ",8,ut),t("button",{onClick:e[8]||(e[8]=l=>o.currentPage++),disabled:o.currentPage*o.perPage>=o.total,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," Ð’Ð¿ÐµÑ€ÐµÐ´ ",8,mt)])])):f("",!0)])),o.selectedConsultation?(s(),ge(r,{key:2,consultation:o.selectedConsultation,"bot-id":m.botId,onClose:e[9]||(e[9]=l=>o.selectedConsultation=null),onUpdated:o.fetchConsultations},null,8,["consultation","bot-id","onUpdated"])):f("",!0)])}const bt=O(Le,[["render",ct]]),ft={name:"MaterialForm",props:{botId:{type:[String,Number],required:!0},categoryId:{type:[String,Number],default:null},material:{type:Object,default:null}},emits:["close","saved"],setup(d,{emit:e}){const m=c(!1),o=c(!1),w=c(!1),M=c(""),r=c([]),l=c(null),_=c(null),g=c(null),h=c(!!d.material),v=c([]),b=c({title:"",category_id:d.categoryId||null,description:"",file_type:"file",file_url:"",file_id:"",media_id:null,order_index:0,is_active:!0}),U=async()=>{try{const k=await I(`/bot-management/${d.botId}/materials/categories`);if(k.ok){const V=await k.json();v.value=V.data||[]}}catch(k){console.error("Error fetching categories:",k)}},F=async()=>{o.value=!0;try{const k={};M.value&&(k.search=M.value);const V=await I("/media",k);if(V.ok){const P=await V.json();r.value=P.data||[]}}catch(k){console.error("Error fetching media:",k)}finally{o.value=!1}},E=()=>{b.value.file_url="",b.value.file_id="",b.value.media_id=null,l.value=null,_.value=null},N=k=>{const V=k.target.files[0];V&&(l.value=V,b.value.media_id=null,_.value=null)},$=k=>{b.value.media_id=k.id,_.value=k,l.value=null},ee=()=>{b.value.media_id&&(w.value=!1)},te=k=>{if(!k)return"0 B";const V=1024,P=["B","KB","MB","GB"],L=Math.floor(Math.log(k)/Math.log(V));return Math.round(k/Math.pow(V,L)*100)/100+" "+P[L]},oe=async()=>{m.value=!0;try{const k=new FormData;if(k.append("title",b.value.title),k.append("category_id",b.value.category_id),k.append("description",b.value.description||""),k.append("file_type",b.value.file_type),k.append("order_index",b.value.order_index||0),k.append("is_active",b.value.is_active?1:0),b.value.file_type==="file")if(l.value)k.append("file",l.value);else if(b.value.media_id)k.append("media_id",b.value.media_id);else throw new Error("ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð»Ð¸ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸");else b.value.file_type==="url"?k.append("file_url",b.value.file_url):b.value.file_type==="telegram_file_id"&&k.append("file_id",b.value.file_id);let V;if(h.value?V=await Y(`/bot-management/${d.botId}/materials/${d.material.id}`,k):V=await ae(`/bot-management/${d.botId}/materials`,k),!V.ok){const P=await V.json().catch(()=>({}));throw new Error(P.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°")}await D.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("saved"),e("close")}catch(k){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:k.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error",confirmButtonText:"ÐžÐš"})}finally{m.value=!1}};return d.material&&(b.value={title:d.material.title||"",category_id:d.material.category_id||d.categoryId||null,description:d.material.description||"",file_type:d.material.file_type||"file",file_url:d.material.file_url||"",file_id:d.material.file_id||"",media_id:d.material.media_id||null,order_index:d.material.order_index||0,is_active:d.material.is_active!==void 0?d.material.is_active:!0},d.material.media&&(_.value=d.material.media)),fe(w,k=>{k&&F()}),fe(M,()=>{w.value&&F()}),Z(()=>{U()}),{saving:m,loadingMedia:o,showMediaPicker:w,mediaSearch:M,mediaFiles:r,selectedFile:l,selectedMedia:_,fileInput:g,isEditMode:h,categories:v,form:b,fetchMediaFiles:F,handleFileTypeChange:E,handleFileSelect:N,selectMedia:$,confirmMediaSelection:ee,formatFileSize:te,saveMaterial:oe}}},gt={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},xt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},vt={class:"sticky top-0 bg-background border-b border-border p-6"},pt={class:"flex items-center justify-between"},_t={class:"text-lg font-semibold"},yt=["value"],kt={key:0},wt={class:"space-y-3"},ht={key:0,class:"text-xs text-muted-foreground mt-1"},Ct={key:0,class:"text-xs text-muted-foreground mt-1"},Mt={key:1},Ft={key:2},St={class:"flex items-center gap-2"},Dt={class:"flex gap-4 pt-4 border-t border-border"},Ut=["disabled"],Vt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},Bt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},jt={class:"p-6 border-b border-border"},Tt={class:"flex items-center justify-between"},Pt={class:"flex-1 overflow-y-auto p-6"},It={key:0,class:"text-center py-12"},Et={key:1,class:"text-center py-12 text-muted-foreground"},zt={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Wt=["onClick"],qt={class:"text-sm font-medium truncate"},At={class:"text-xs text-muted-foreground mt-1"},Gt={class:"p-6 border-t border-border"},Nt=["disabled"];function Ot(d,e,m,o,w,M){return s(),n("div",gt,[t("div",xt,[t("div",vt,[t("div",pt,[t("h3",_t,a(o.isEditMode?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»"),1),t("button",{onClick:e[0]||(e[0]=r=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("form",{onSubmit:e[13]||(e[13]=re((...r)=>o.saveMaterial&&o.saveMaterial(...r),["prevent"])),class:"p-6 space-y-6"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.title=r),type:"text",required:"",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.title]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ *",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.category_id=r),required:"",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[e[18]||(e[18]=t("option",{value:""},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",-1)),(s(!0),n(z,null,W(o.categories,r=>(s(),n("option",{key:r.id,value:r.id},a(r.name),9,yt))),128))],512),[[J,o.form.category_id,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),u(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.description=r),rows:"4",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.description]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° *",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.file_type=r),required:"",onChange:e[5]||(e[5]=(...r)=>o.handleFileTypeChange&&o.handleFileTypeChange(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[21]||(e[21]=[t("option",{value:"file"},"Ð¤Ð°Ð¹Ð» (Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð»Ð¸ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸)",-1),t("option",{value:"url"},"Ð’Ð½ÐµÑˆÐ½ÑÑ ÑÑÑ‹Ð»ÐºÐ°",-1),t("option",{value:"telegram_file_id"},"Telegram file_id",-1)])],544),[[J,o.form.file_type]])]),o.form.file_type==="file"?(s(),n("div",kt,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¤Ð°Ð¹Ð»",-1)),t("div",wt,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» ",-1)),t("input",{ref:"fileInput",type:"file",onChange:e[6]||(e[6]=(...r)=>o.handleFileSelect&&o.handleFileSelect(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),o.selectedFile?(s(),n("p",ht," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+a(o.selectedFile.name),1)):f("",!0)]),e[25]||(e[25]=t("div",{class:"text-center text-sm text-muted-foreground"},"Ð¸Ð»Ð¸",-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=r=>o.showMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.form.media_id?"Ð¤Ð°Ð¹Ð» Ð²Ñ‹Ð±Ñ€Ð°Ð½":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»"),1),o.selectedMedia?(s(),n("p",Ct," Ð’Ñ‹Ð±Ñ€Ð°Ð½: "+a(o.selectedMedia.name),1)):f("",!0)])])])):f("",!0),o.form.file_type==="url"?(s(),n("div",Mt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"URL *",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>o.form.file_url=r),type:"url",required:"",placeholder:"https://example.com/file.pdf",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.file_url]])])):f("",!0),o.form.file_type==="telegram_file_id"?(s(),n("div",Ft,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram file_id *",-1)),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>o.form.file_id=r),type:"text",required:"",placeholder:"BQACAgIAAxkBAAI...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background font-mono text-sm"},null,512),[[x,o.form.file_id]]),e[29]||(e[29]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ file_id Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ð² Ñ„Ð°Ð¹Ð» Ð±Ð¾Ñ‚Ñƒ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð² Ð¾Ñ‚Ð²ÐµÑ‚ API ",-1))])):f("",!0),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",-1)),u(t("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>o.form.order_index=r),type:"number",min:"0",placeholder:"0",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.order_index,void 0,{number:!0}]])]),t("div",null,[t("label",St,[u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>o.form.is_active=r),type:"checkbox",class:"w-4 h-4"},null,512),[[de,o.form.is_active]]),e[31]||(e[31]=t("span",null,"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» Ð°ÐºÑ‚Ð¸Ð²ÐµÐ½",-1))])]),t("div",Dt,[t("button",{type:"button",onClick:e[12]||(e[12]=r=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,Ut)])],32),o.showMediaPicker?(s(),n("div",Vt,[t("div",Bt,[t("div",jt,[t("div",Tt,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[14]||(e[14]=r=>o.showMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")]),u(t("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>o.mediaSearch=r),type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ„Ð°Ð¹Ð»Ð°...",class:"w-full mt-4 h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.mediaSearch]])]),t("div",Pt,[o.loadingMedia?(s(),n("div",It,[...e[33]||(e[33]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð²...",-1)])])):o.mediaFiles.length===0?(s(),n("div",Et," Ð¤Ð°Ð¹Ð»Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ ")):(s(),n("div",zt,[(s(!0),n(z,null,W(o.mediaFiles,r=>(s(),n("div",{key:r.id,onClick:l=>o.selectMedia(r),class:X(["p-4 border rounded-lg cursor-pointer transition-colors",o.form.media_id===r.id?"border-accent bg-accent/10":"border-border hover:bg-muted/10"])},[t("div",qt,a(r.name),1),t("div",At,a(o.formatFileSize(r.size)),1)],10,Wt))),128))]))]),t("div",Gt,[t("button",{onClick:e[16]||(e[16]=(...r)=>o.confirmMediaSelection&&o.confirmMediaSelection(...r)),disabled:!o.form.media_id,class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ",8,Nt)])])])):f("",!0)])])}const Lt=O(ft,[["render",Ot]]),Rt={name:"CategoryForm",components:{Media:xe},props:{botId:{type:[String,Number],required:!0},category:{type:Object,default:null}},emits:["close","saved"],setup(d,{emit:e}){const m=c(!1),o=c(!1),w=c(null),M=c(!!d.category),r=c({name:"",icon:"",description:"",order_index:0,media_id:null,is_active:!0});return d.category&&(r.value={name:d.category.name||"",icon:d.category.icon||"",description:d.category.description||"",order_index:d.category.order_index||0,media_id:d.category.media_id||null,is_active:d.category.is_active!==void 0?d.category.is_active:!0},d.category.media&&(w.value=d.category.media)),{saving:m,showMediaPicker:o,selectedMedia:w,isEditMode:M,form:r,handleFileSelected:v=>{v&&(r.value.media_id=v.id,w.value=v,o.value=!1)},removeMedia:()=>{r.value.media_id=null,w.value=null},formatFileSize:v=>{if(!v)return"0 B";const b=1024,U=["B","KB","MB","GB"],F=Math.floor(Math.log(v)/Math.log(b));return Math.round(v/Math.pow(b,F)*100)/100+" "+U[F]},saveCategory:async()=>{m.value=!0;try{const v={name:r.value.name,icon:r.value.icon||null,description:r.value.description||null,order_index:r.value.order_index||0,media_id:r.value.media_id||null,is_active:r.value.is_active};let b;if(M.value?b=await Y(`/bot-management/${d.botId}/materials/categories/${d.category.id}`,v):b=await ae(`/bot-management/${d.botId}/materials/categories`,v),!b.ok){const U=await b.json().catch(()=>({}));throw new Error(U.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸")}await D.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("saved"),e("close")}catch(v){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:v.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error",confirmButtonText:"ÐžÐš"})}finally{m.value=!1}}}}},Kt={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Ht={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Qt={class:"sticky top-0 bg-background border-b border-border p-6"},Jt={class:"flex items-center justify-between"},Xt={class:"text-lg font-semibold"},Yt={key:0,class:"mb-3 p-3 bg-muted/30 rounded-lg"},Zt={class:"flex items-center justify-between"},$t={class:"text-sm font-medium"},eo={class:"text-xs text-muted-foreground"},to={class:"flex items-center gap-2"},oo={class:"flex gap-4 pt-4 border-t border-border"},lo=["disabled"],ro={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},so={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},no={class:"p-6 border-b border-border flex-shrink-0"},ao={class:"flex items-center justify-between"},io={class:"flex-1 overflow-y-auto min-h-0"};function uo(d,e,m,o,w,M){const r=A("Media");return s(),n("div",Kt,[t("div",Ht,[t("div",Qt,[t("div",Jt,[t("h3",Xt,a(o.isEditMode?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ"),1),t("button",{onClick:e[0]||(e[0]=l=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("form",{onSubmit:e[9]||(e[9]=re((...l)=>o.saveCategory&&o.saveCategory(...l),["prevent"])),class:"p-6 space-y-6"},[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Ð˜ÐºÐ¾Ð½ÐºÐ° (ÑÐ¼Ð¾Ð´Ð·Ð¸)",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.icon=l),type:"text",placeholder:"ðŸ§©",maxlength:"10",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.icon]]),e[12]||(e[12]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð² Ð±Ð¾Ñ‚Ðµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ðŸ§©, ðŸ“š, ðŸ“„) ",-1))]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.name=l),type:"text",required:"",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.name]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),u(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.description=l),rows:"4",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.description]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.form.order_index=l),type:"number",min:"0",placeholder:"0",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.order_index,void 0,{number:!0}]]),e[16]||(e[16]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð§ÐµÐ¼ Ð¼ÐµÐ½ÑŒÑˆÐµ Ñ‡Ð¸ÑÐ»Ð¾, Ñ‚ÐµÐ¼ Ð²Ñ‹ÑˆÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð² ÑÐ¿Ð¸ÑÐºÐµ ",-1))]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¤Ð°Ð¹Ð» ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",-1)),o.form.media_id&&o.selectedMedia?(s(),n("div",Yt,[t("div",Zt,[t("div",null,[t("p",$t,a(o.selectedMedia.name),1),t("p",eo,a(o.formatFileSize(o.selectedMedia.size)),1)]),t("button",{type:"button",onClick:e[5]||(e[5]=(...l)=>o.removeMedia&&o.removeMedia(...l)),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ")])])):f("",!0),t("button",{type:"button",onClick:e[6]||(e[6]=l=>o.showMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.form.media_id?"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸"),1)]),t("div",null,[t("label",to,[u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>o.form.is_active=l),type:"checkbox",class:"w-4 h-4"},null,512),[[de,o.form.is_active]]),e[18]||(e[18]=t("span",null,"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°",-1))])]),t("div",oo,[t("button",{type:"button",onClick:e[8]||(e[8]=l=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"),9,lo)])],32),o.showMediaPicker?(s(),n("div",ro,[t("div",so,[t("div",no,[t("div",ao,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[10]||(e[10]=l=>o.showMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",io,[G(r,{"selection-mode":!0,"count-file":1,"selected-files":o.form.media_id?[{id:o.form.media_id}]:[],onFileSelected:o.handleFileSelected},null,8,["selected-files","onFileSelected"])])])])):f("",!0)])])}const mo=O(Rt,[["render",uo]]),co={name:"MaterialCategoryTree",components:{MaterialForm:Lt,CategoryForm:mo,Media:xe},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),m=c([]),o=c(!1),w=c(!1),M=c(null),r=c(null),l=c(null),_=c(null),g=c(null),h=c(null),v=c(null),b=async()=>{e.value=!0;try{const p=await I(`/bot-management/${d.botId}/materials/categories`);if(!p.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹");const S=await p.json();m.value=S.data||[];for(const B of m.value)await F(B)}catch(p){console.error("Error fetching categories:",p)}finally{e.value=!1}},U=()=>{r.value=null,o.value=!0},F=async p=>{try{const S=await I(`/bot-management/${d.botId}/materials`,{category_id:p.id});if(S.ok){const B=await S.json();p.materials=B.data||[]}}catch(S){console.error("Error fetching materials:",S)}},E=async p=>{if((await D.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ?",text:`ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ "${p.name}" Ð¸ Ð²ÑÐµ ÐµÑ‘ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await pe(`/bot-management/${d.botId}/materials/categories/${p.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");await D.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),b()}catch(B){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:B.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"})}},N=async p=>{if((await D.fire({title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»?",text:`ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» "${p.title}" Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",cancelButtonText:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})).isConfirmed)try{if(!(await pe(`/bot-management/${d.botId}/materials/${p.id}`)).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°");await D.fire({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),b()}catch(B){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:B.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error"})}},$=p=>{r.value=p,o.value=!0},ee=()=>{o.value=!1,r.value=null},te=()=>{b()},oe=p=>{l.value=p,w.value=!0},k=p=>{M.value=p,l.value=null,w.value=!0},V=c(!1),P=c(null),L=async p=>{P.value=p,V.value=!0},ie=async p=>{if(!(!P.value||!p))try{if(!(await Y(`/bot-management/${d.botId}/materials/categories/${P.value.id}`,{media_id:p.id})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸");V.value=!1,P.value=null,await D.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),b()}catch(S){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:S.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}},ue=async p=>{try{if(!(await Y(`/bot-management/${d.botId}/materials/categories/${p.id}`,{media_id:null})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°");await D.fire({title:"Ð¤Ð°Ð¹Ð» ÑƒÐ´Ð°Ð»ÐµÐ½",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),b()}catch(S){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:S.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°",icon:"error"})}},me=()=>{w.value=!1,l.value=null,M.value=null},ce=()=>{b()},i=(p,S)=>{_.value=S,p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML)},C=(p,S)=>{p.preventDefault(),_.value!==null&&_.value!==S&&(p.dataTransfer.dropEffect="move")},j=async(p,S)=>{if(p.preventDefault(),_.value===null||_.value===S)return;const B=_.value,K=[...m.value],[se]=K.splice(B,1);K.splice(S,0,se);const H=K.map((Q,be)=>({id:Q.id,order_index:be}));try{(await ae(`/bot-management/${d.botId}/materials/categories/update-positions`,{categories:H})).ok&&(m.value=K,await D.fire({title:"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°",icon:"success",timer:1500,showConfirmButton:!1,toast:!0,position:"top-end"}))}catch(Q){console.error("Error updating category positions:",Q),D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸",icon:"error"}),b()}},y=()=>{_.value=null},T=(p,S,B)=>{g.value=B,h.value=S,p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML)},q=(p,S,B)=>{p.preventDefault(),g.value!==null&&h.value===S&&g.value!==B&&(p.dataTransfer.dropEffect="move")},R=async(p,S,B)=>{if(p.preventDefault(),g.value===null||h.value!==S||g.value===B)return;const K=g.value,se=m.value[S],H=[...se.materials],[Q]=H.splice(K,1);H.splice(B,0,Q);const be=H.map((ne,_e)=>({id:ne.id,order_index:_e}));try{(await ae(`/bot-management/${d.botId}/materials/update-positions`,{materials:be})).ok&&(se.materials=H,await D.fire({title:"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°",icon:"success",timer:1500,showConfirmButton:!1,toast:!0,position:"top-end"}))}catch(ne){console.error("Error updating material positions:",ne),D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°",icon:"error"}),b()}},le=()=>{g.value=null,h.value=null};return Z(()=>{b()}),{loading:e,categories:m,showCategoryForm:o,showMaterialForm:w,selectedCategory:M,selectedCategoryForEdit:r,selectedMaterial:l,draggedCategoryIndex:_,draggedMaterialIndex:g,categoriesContainer:v,fetchCategories:b,createCategory:U,deleteCategory:E,deleteMaterial:N,editCategory:$,editMaterial:oe,showMaterialModal:k,selectCategoryFile:L,showMediaPicker:V,selectedCategoryForFile:P,handleFileSelected:ie,removeCategoryFile:ue,handleMaterialFormClose:me,handleMaterialSaved:ce,handleCategoryFormClose:ee,handleCategorySaved:te,handleCategoryDragStart:i,handleCategoryDragOver:C,handleCategoryDrop:j,handleCategoryDragEnd:y,handleMaterialDragStart:T,handleMaterialDragOver:q,handleMaterialDrop:R,handleMaterialDragEnd:le}}},bo={class:"material-category-tree space-y-4"},fo={class:"flex items-center justify-between"},go={key:0,class:"text-center py-12"},xo={key:1,class:"space-y-4",ref:"categoriesContainer"},vo=["onDragstart","onDragover","onDrop"],po={class:"flex items-center justify-between mb-4"},_o={class:"text-lg font-semibold"},yo={key:0},ko={key:0,class:"text-sm text-muted-foreground mt-1"},wo={key:1,class:"text-xs text-muted-foreground mt-1"},ho={class:"flex gap-2"},Co=["onClick"],Mo=["onClick"],Fo=["onClick"],So=["onClick"],Do={key:0,class:"space-y-2"},Uo=["onDragstart","onDragover","onDrop"],Vo={class:"font-medium"},Bo={key:0,class:"text-sm text-muted-foreground"},jo={class:"text-xs text-muted-foreground"},To={class:"flex gap-2"},Po=["onClick"],Io=["onClick"],Eo={key:1,class:"text-sm text-muted-foreground p-3"},zo=["onClick"],Wo={key:0,class:"text-center py-12 text-muted-foreground"},qo={key:4,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},Ao={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},Go={class:"p-6 border-b border-border flex-shrink-0"},No={class:"flex items-center justify-between"},Oo={class:"flex-1 overflow-y-auto min-h-0"};function Lo(d,e,m,o,w,M){const r=A("MaterialForm"),l=A("CategoryForm"),_=A("Media");return s(),n("div",bo,[t("div",fo,[e[4]||(e[4]=t("h2",{class:"text-2xl font-semibold"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("button",{onClick:e[0]||(e[0]=(...g)=>o.createCategory&&o.createCategory(...g)),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ ")]),o.loading?(s(),n("div",go,[...e[5]||(e[5]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²...",-1)])])):f("",!0),o.loading?f("",!0):(s(),n("div",xo,[(s(!0),n(z,null,W(o.categories,(g,h)=>(s(),n("div",{key:g.id,draggable:!0,onDragstart:v=>o.handleCategoryDragStart(v,h),onDragover:re(v=>o.handleCategoryDragOver(v,h),["prevent"]),onDrop:v=>o.handleCategoryDrop(v,h),onDragend:e[2]||(e[2]=(...v)=>o.handleCategoryDragEnd&&o.handleCategoryDragEnd(...v)),class:X(["bg-card rounded-lg border border-border p-4 cursor-move transition-all",o.draggedCategoryIndex===h?"opacity-50 border-accent":""])},[t("div",po,[t("div",null,[t("h3",_o,[g.icon?(s(),n("span",yo,a(g.icon),1)):f("",!0),ve(a(g.name),1)]),g.description?(s(),n("p",ko,a(g.description),1)):f("",!0),g.media?(s(),n("p",wo," ðŸ“Ž Ð¤Ð°Ð¹Ð»: "+a(g.media.name),1)):f("",!0)]),t("div",ho,[t("button",{onClick:v=>o.editCategory(g),class:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded"}," âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",8,Co),g.media_id?(s(),n("button",{key:1,onClick:v=>o.removeCategoryFile(g),class:"px-3 py-1 text-xs bg-orange-500 hover:bg-orange-600 text-white rounded"}," ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» ",8,Fo)):(s(),n("button",{key:0,onClick:v=>o.selectCategoryFile(g),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," ðŸ“Ž Ð¤Ð°Ð¹Ð» ",8,Mo)),t("button",{onClick:v=>o.deleteCategory(g),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,So)])]),g.materials&&g.materials.length>0?(s(),n("div",Do,[(s(!0),n(z,null,W(g.materials,(v,b)=>(s(),n("div",{key:v.id,draggable:!0,onDragstart:U=>o.handleMaterialDragStart(U,h,b),onDragover:re(U=>o.handleMaterialDragOver(U,h,b),["prevent"]),onDrop:U=>o.handleMaterialDrop(U,h,b),onDragend:e[1]||(e[1]=(...U)=>o.handleMaterialDragEnd&&o.handleMaterialDragEnd(...U)),class:X(["flex items-center justify-between p-3 bg-muted/30 rounded-lg cursor-move transition-all",o.draggedMaterialIndex===b&&o.draggedCategoryIndex===h?"opacity-50 border-2 border-accent":""])},[t("div",null,[t("p",Vo,a(v.title),1),v.description?(s(),n("p",Bo,a(v.description),1)):f("",!0),t("p",jo," Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹: "+a(v.download_count||0),1)]),t("div",To,[t("button",{onClick:U=>o.editMaterial(v),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",8,Po),t("button",{onClick:U=>o.deleteMaterial(v),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Io)])],42,Uo))),128))])):(s(),n("div",Eo,[e[6]||(e[6]=ve(" ÐÐµÑ‚ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² ",-1)),t("button",{onClick:v=>o.showMaterialModal(g),class:"ml-2 px-3 py-1 text-xs bg-accent/10 text-accent border border-accent/40 hover:bg-accent/20 rounded"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð» ",8,zo)]))],42,vo))),128)),o.categories.length===0?(s(),n("div",Wo," ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ. ")):f("",!0)],512)),o.showMaterialForm?(s(),ge(r,{key:2,"bot-id":m.botId,"category-id":o.selectedCategory?.id||o.selectedMaterial?.category_id,material:o.selectedMaterial,onClose:o.handleMaterialFormClose,onSaved:o.handleMaterialSaved},null,8,["bot-id","category-id","material","onClose","onSaved"])):f("",!0),o.showCategoryForm?(s(),ge(l,{key:3,"bot-id":m.botId,category:o.selectedCategoryForEdit,onClose:o.handleCategoryFormClose,onSaved:o.handleCategorySaved},null,8,["bot-id","category","onClose","onSaved"])):f("",!0),o.showMediaPicker?(s(),n("div",qo,[t("div",Ao,[t("div",Go,[t("div",No,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸",-1)),t("button",{onClick:e[3]||(e[3]=g=>{o.showMediaPicker=!1,o.selectedCategoryForFile=null}),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",Oo,[G(_,{"selection-mode":!0,"count-file":1,"selected-files":o.selectedCategoryForFile?.media_id?[{id:o.selectedCategoryForFile.media_id}]:[],onFileSelected:o.handleFileSelected},null,8,["selected-files","onFileSelected"])])])])):f("",!0)])}const Ro=O(co,[["render",Lo]]),Ko={name:"BotSettingsForm",components:{Media:xe},props:{botId:{type:[String,Number],required:!0}},emits:["updated"],setup(d,{emit:e}){const m=c(!1),o=c(!1),w=c("main"),M=[{key:"main",label:"ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ"},{key:"messages",label:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"},{key:"advanced",label:"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾"}],r=c({required_channel_id:null,required_channel_username:"",admin_telegram_ids:[],yandex_maps_url:"",welcome_message:"",welcome_media_type:"",welcome_media_id:null,welcome_media_gallery:[],presentation_media_id:null,reply_buttons:{materials_button_text:"",materials_files:[],consultation_button_text:"",office_button_text:""},office_location:{latitude:null,longitude:null,address:""},other_settings:{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5,canceledOrdersTtlDays:7,canceledOrdersAfterTtlAction:"hide",unpaidNotificationsEnabled:!0,unpaidNotifyAfterMinutes:30}}),l=c(!1),_=c(!1),g=c(null),h=c([]),v=c(!1),b=c(null),U=c(!1),F=c([]),E=async()=>{m.value=!0;try{const i=await I(`/bot-management/${d.botId}/settings`);if(!i.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº");const C=await i.json();if(C.success&&C.data){const j=C.data.settings||{},y=j.messages||{},T=j.welcome_media||{},q=j.presentation||{},R=j.reply_buttons||{},le=j.office_location||{};r.value={required_channel_id:C.data.required_channel_id||null,required_channel_username:C.data.required_channel_username||"",admin_telegram_ids:C.data.admin_telegram_ids||[],yandex_maps_url:C.data.yandex_maps_url||"",welcome_message:C.data.welcome_message||"",welcome_media_type:T.type||"",welcome_media_id:T.media_id||null,welcome_media_gallery:T.gallery||[],presentation_media_id:q.media_id||null,reply_buttons:{materials_button_text:R.materials_button_text||"",materials_files:R.materials_files||[],consultation_button_text:R.consultation_button_text||"",office_button_text:R.office_button_text||""},office_location:{latitude:le.latitude||null,longitude:le.longitude||null,address:le.address||""},messages:{subscription:y.subscription||{required_text:"",subscribe_button:"",check_button:""},consultation:y.consultation||{description:"",form_name_label:"",form_phone_label:"",form_description_label:"",thank_you:"",start_button:"",skip_description_button:""},materials:y.materials||{list_description:"",download_button:"",back_to_list:""},menu:y.menu||{materials_button:"",consultation_button:"",review_button:"",back_to_menu:"",presentation_button:""},notifications:y.notifications||{consultation_template:""}},other_settings:j.other_settings||{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5,canceledOrdersTtlDays:7,canceledOrdersAfterTtlAction:"hide",unpaidNotificationsEnabled:!0,unpaidNotifyAfterMinutes:30}}}}catch(i){console.error("Error fetching settings:",i)}finally{m.value=!1}},N=async()=>{o.value=!0;try{const i={};r.value.welcome_media_type&&(i.type=r.value.welcome_media_type,r.value.welcome_media_type==="gallery"?i.gallery=r.value.welcome_media_gallery.map(q=>q.id):i.media_id=r.value.welcome_media_id);const C={};r.value.presentation_media_id&&(C.media_id=r.value.presentation_media_id);const j={materials_button_text:r.value.reply_buttons.materials_button_text||"",materials_files:r.value.reply_buttons.materials_files.map(q=>q.id||q)||[],consultation_button_text:r.value.reply_buttons.consultation_button_text||"",office_button_text:r.value.reply_buttons.office_button_text||""},y={latitude:r.value.office_location.latitude||null,longitude:r.value.office_location.longitude||null,address:r.value.office_location.address||""},T=await Y(`/bot-management/${d.botId}/settings`,{required_channel_id:r.value.required_channel_id,required_channel_username:r.value.required_channel_username,admin_telegram_ids:r.value.admin_telegram_ids,yandex_maps_url:r.value.yandex_maps_url,welcome_message:r.value.welcome_message,settings:{messages:r.value.messages,other_settings:r.value.other_settings,welcome_media:i,presentation:C,reply_buttons:j,office_location:y}});if(!T.ok){const q=await T.json().catch(()=>({}));throw new Error(q.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº")}await D.fire({title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated")}catch(i){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:i.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº",icon:"error",confirmButtonText:"ÐžÐš"})}finally{o.value=!1}},$=()=>{r.value.admin_telegram_ids.push(null)},ee=i=>{r.value.admin_telegram_ids.splice(i,1)},te=i=>{i&&(r.value.welcome_media_id=i.id,g.value=i,l.value=!1)},oe=()=>{r.value.welcome_media_id=null,g.value=null,!r.value.welcome_media_id&&!r.value.welcome_media_gallery.length&&(r.value.welcome_media_type="")},k=i=>{if(i){if(i.type!=="photo"&&!i.extension?.match(/^(jpg|jpeg|png|gif|webp)$/i)){D.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:"ÐœÐ¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ„Ð¾Ñ‚Ð¾",icon:"error",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});return}if(h.value.some(C=>C.id===i.id)){D.fire({title:"Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ",text:"Ð­Ñ‚Ð¾ Ñ„Ð¾Ñ‚Ð¾ ÑƒÐ¶Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾",icon:"warning",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});return}if(h.value.length>=10){D.fire({title:"Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ",text:"ÐœÐ¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 10 Ñ„Ð¾Ñ‚Ð¾",icon:"warning",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});return}h.value.push(i),r.value.welcome_media_gallery=h.value.map(C=>C.id)}},V=i=>{h.value.splice(i,1),r.value.welcome_media_gallery=h.value.map(C=>({id:C.id})),h.value.length===0&&(r.value.welcome_media_type="")},P=i=>{if(!i)return"0 B";const C=1024,j=["B","KB","MB","GB"],y=Math.floor(Math.log(i)/Math.log(C));return Math.round(i/Math.pow(C,y)*100)/100+" "+j[y]},L=async()=>{if(r.value.welcome_media_id)try{const i=await I(`/v1/media/${r.value.welcome_media_id}`);if(i.ok){const C=await i.json();g.value=C.data||null}}catch(i){console.error("Error loading welcome media:",i)}if(r.value.welcome_media_gallery&&r.value.welcome_media_gallery.length>0)try{const C=r.value.welcome_media_gallery.map(y=>typeof y=="object"&&y!==null&&y.id||y).filter(y=>y!=null).map(y=>I(`/v1/media/${y}`)),j=await Promise.all(C);h.value=[];for(const y of j)if(y.ok){const T=await y.json();T.data&&h.value.push(T.data)}}catch(i){console.error("Error loading welcome media gallery:",i)}if(r.value.presentation_media_id)try{const i=await I(`/v1/media/${r.value.presentation_media_id}`);if(i.ok){const C=await i.json();b.value=C.data||null}}catch(i){console.error("Error loading presentation file:",i)}if(r.value.reply_buttons.materials_files&&r.value.reply_buttons.materials_files.length>0)try{const C=r.value.reply_buttons.materials_files.map(y=>typeof y=="object"&&y!==null&&y.id||y).filter(y=>y!=null).map(y=>I(`/v1/media/${y}`)),j=await Promise.all(C);F.value=[];for(const y of j)if(y.ok){const T=await y.json();T.data&&F.value.push(T.data)}}catch(i){console.error("Error loading materials files:",i)}},ie=i=>{i&&(r.value.presentation_media_id=i.id,b.value=i,v.value=!1)},ue=()=>{r.value.presentation_media_id=null,b.value=null},me=i=>{if(i){if(F.value.some(C=>C.id===i.id)){D.fire({title:"Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ",text:"Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑƒÐ¶Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½",icon:"warning",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});return}F.value.push(i),r.value.reply_buttons.materials_files=F.value.map(C=>({id:C.id}))}},ce=i=>{F.value.splice(i,1),r.value.reply_buttons.materials_files=F.value.map(C=>({id:C.id}))};return Z(async()=>{await E(),await L()}),{loading:m,saving:o,activeTab:w,tabs:M,form:r,showWelcomeMediaPicker:l,showWelcomeMediaGalleryPicker:_,selectedWelcomeMedia:g,selectedWelcomeMediaGallery:h,fetchSettings:E,saveSettings:N,addAdmin:$,removeAdmin:ee,handleWelcomeMediaSelected:te,removeWelcomeMedia:oe,handleWelcomeMediaGallerySelected:k,removeWelcomeMediaFromGallery:V,formatFileSize:P,showPresentationPicker:v,selectedPresentationFile:b,handlePresentationFileSelected:ie,removePresentationFile:ue,showMaterialsPicker:U,selectedMaterialsFiles:F,handleMaterialsFilesSelected:me,removeMaterialsFile:ce}}},Ho={class:"bot-settings-form space-y-6"},Qo={class:"border-b border-border"},Jo={class:"flex -mb-px"},Xo=["onClick"],Yo={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-4"},Zo={class:"space-y-2"},$o=["onUpdate:modelValue"],el=["onClick"],tl={class:"space-y-3"},ol={key:0},ll={key:0,class:"mb-3 p-3 bg-muted/30 rounded-lg"},rl={class:"flex items-center justify-between"},sl={class:"text-sm font-medium"},nl={class:"text-xs text-muted-foreground"},dl={key:1},al={key:0,class:"mb-3 space-y-2"},il={class:"flex items-center justify-between"},ul={class:"text-sm font-medium"},ml={class:"text-xs text-muted-foreground"},cl=["onClick"],bl={key:1,class:"text-xs text-muted-foreground mt-1"},fl={class:"space-y-3"},gl={key:0,class:"mb-3 p-3 bg-muted/30 rounded-lg"},xl={class:"flex items-center justify-between"},vl={class:"text-sm font-medium"},pl={class:"text-xs text-muted-foreground"},_l={class:"border-t border-border pt-4"},yl={class:"space-y-3 mb-6"},kl={key:0,class:"mb-3 space-y-2"},wl={class:"flex items-center justify-between"},hl={class:"text-sm font-medium"},Cl={class:"text-xs text-muted-foreground"},Ml=["onClick"],Fl={class:"text-xs text-muted-foreground mt-1"},Sl={class:"space-y-3 mb-6"},Dl={class:"space-y-3 mb-6"},Ul={key:1,class:"bg-card rounded-lg border border-border p-6 space-y-6"},Vl={class:"space-y-4"},Bl={class:"space-y-4 pt-4 border-t border-border"},jl={class:"space-y-4 pt-4 border-t border-border"},Tl={class:"space-y-4 pt-4 border-t border-border"},Pl={class:"space-y-4 pt-4 border-t border-border"},Il={key:2,class:"bg-card rounded-lg border border-border p-6 space-y-4"},El={class:"flex items-center gap-2"},zl={class:"border-t border-border pt-4 mt-4"},Wl={class:"mb-4"},ql={class:"border-t border-border pt-4 mt-4"},Al={class:"mb-4"},Gl={class:"flex items-center gap-2"},Nl={class:"flex gap-4"},Ol=["disabled"],Ll={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},Rl={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},Kl={class:"p-6 border-b border-border flex-shrink-0"},Hl={class:"flex items-center justify-between"},Ql={class:"text-lg font-semibold"},Jl={class:"flex-1 overflow-y-auto min-h-0"},Xl={key:1,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},Yl={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},Zl={class:"p-6 border-b border-border flex-shrink-0"},$l={class:"flex items-center justify-between"},er={class:"text-lg font-semibold"},tr={class:"flex-1 overflow-y-auto min-h-0"},or={key:2,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},lr={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},rr={class:"p-6 border-b border-border flex-shrink-0"},sr={class:"flex items-center justify-between"},nr={class:"flex-1 overflow-y-auto min-h-0"};function dr(d,e,m,o,w,M){const r=A("Media");return s(),n("div",Ho,[e[116]||(e[116]=t("h2",{class:"text-2xl font-semibold"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±Ð¾Ñ‚Ð°",-1)),t("div",Qo,[t("nav",Jo,[(s(!0),n(z,null,W(o.tabs,l=>(s(),n("button",{key:l.key,onClick:_=>o.activeTab=l.key,class:X(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===l.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},a(l.label),11,Xo))),128))])]),t("form",{onSubmit:e[44]||(e[44]=re((...l)=>o.saveSettings&&o.saveSettings(...l),["prevent"])),class:"space-y-6"},[o.activeTab==="main"?(s(),n("div",Yo,[e[73]||(e[73]=t("h3",{class:"text-lg font-semibold"},"ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium mb-2"},"ID ÐºÐ°Ð½Ð°Ð»Ð°",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.required_channel_id=l),type:"number",placeholder:"-1001234567890",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.required_channel_id,void 0,{number:!0}]]),e[49]||(e[49]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ID ÐºÐ°Ð½Ð°Ð»Ð° (Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¾Ñ‚Ð° @userinfobot) ",-1))]),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium mb-2"},"Username ÐºÐ°Ð½Ð°Ð»Ð°",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.required_channel_username=l),type:"text",placeholder:"aip_channel",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.required_channel_username]]),e[51]||(e[51]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Username ÐºÐ°Ð½Ð°Ð»Ð° Ð±ÐµÐ· ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° @ ",-1))]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram ID Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²",-1)),t("div",Zo,[(s(!0),n(z,null,W(o.form.admin_telegram_ids,(l,_)=>(s(),n("div",{key:_,class:"flex gap-2"},[u(t("input",{"onUpdate:modelValue":g=>o.form.admin_telegram_ids[_]=g,type:"number",placeholder:"123456789",class:"flex-1 h-10 px-3 border border-border rounded-lg bg-background"},null,8,$o),[[x,o.form.admin_telegram_ids[_],void 0,{number:!0}]]),t("button",{type:"button",onClick:g=>o.removeAdmin(_),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,el)]))),128)),t("button",{type:"button",onClick:e[2]||(e[2]=(...l)=>o.addAdmin&&o.addAdmin(...l)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg"}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° ")])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ñ‹",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.yandex_maps_url=l),type:"url",placeholder:"https://yandex.ru/maps/org/...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.yandex_maps_url]])]),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium mb-2"},"ÐœÐµÐ´Ð¸Ð° Ð¿ÐµÑ€ÐµÐ´ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÐµÐ¼",-1)),t("div",tl,[t("div",null,[e[55]||(e[55]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¢Ð¸Ð¿ Ð¼ÐµÐ´Ð¸Ð°",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.form.welcome_media_type=l),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[54]||(e[54]=[t("option",{value:""},"ÐÐµÑ‚ Ð¼ÐµÐ´Ð¸Ð°",-1),t("option",{value:"photo"},"Ð¤Ð¾Ñ‚Ð¾",-1),t("option",{value:"video"},"Ð’Ð¸Ð´ÐµÐ¾",-1),t("option",{value:"gallery"},"Ð“Ð°Ð»ÐµÑ€ÐµÑ Ñ„Ð¾Ñ‚Ð¾ (Ð´Ð¾ 10)",-1)])],512),[[J,o.form.welcome_media_type]])]),o.form.welcome_media_type==="photo"||o.form.welcome_media_type==="video"?(s(),n("div",ol,[o.selectedWelcomeMedia?(s(),n("div",ll,[t("div",rl,[t("div",null,[t("p",sl,a(o.selectedWelcomeMedia.name),1),t("p",nl,a(o.formatFileSize(o.selectedWelcomeMedia.size)),1)]),t("button",{type:"button",onClick:e[5]||(e[5]=(...l)=>o.removeWelcomeMedia&&o.removeWelcomeMedia(...l)),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ")])])):f("",!0),t("button",{type:"button",onClick:e[6]||(e[6]=l=>o.showWelcomeMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.selectedWelcomeMedia?"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸"),1)])):f("",!0),o.form.welcome_media_type==="gallery"?(s(),n("div",dl,[o.selectedWelcomeMediaGallery.length>0?(s(),n("div",al,[(s(!0),n(z,null,W(o.selectedWelcomeMediaGallery,(l,_)=>(s(),n("div",{key:l.id,class:"p-3 bg-muted/30 rounded-lg"},[t("div",il,[t("div",null,[t("p",ul,a(l.name),1),t("p",ml,a(o.formatFileSize(l.size)),1)]),t("button",{type:"button",onClick:g=>o.removeWelcomeMediaFromGallery(_),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,cl)])]))),128))])):f("",!0),t("button",{type:"button",onClick:e[7]||(e[7]=l=>o.showWelcomeMediaGalleryPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.selectedWelcomeMediaGallery.length>0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ„Ð¾Ñ‚Ð¾":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸"),1),o.selectedWelcomeMediaGallery.length>0?(s(),n("p",bl," Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾: "+a(o.selectedWelcomeMediaGallery.length)+" Ñ„Ð¾Ñ‚Ð¾ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 10) ",1)):f("",!0)])):f("",!0)])]),t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",-1)),u(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>o.form.welcome_message=l),rows:"6",placeholder:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.welcome_message]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium mb-2"},"ÐŸÑ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ",-1)),t("div",fl,[o.selectedPresentationFile?(s(),n("div",gl,[t("div",xl,[t("div",null,[t("p",vl,a(o.selectedPresentationFile.name),1),t("p",pl,a(o.formatFileSize(o.selectedPresentationFile.size)),1)]),t("button",{type:"button",onClick:e[9]||(e[9]=(...l)=>o.removePresentationFile&&o.removePresentationFile(...l)),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ")])])):f("",!0),t("button",{type:"button",onClick:e[10]||(e[10]=l=>o.showPresentationPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.selectedPresentationFile?"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸"),1),e[58]||(e[58]=t("p",{class:"text-xs text-muted-foreground"},' Ð•ÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½, ÐºÐ½Ð¾Ð¿ÐºÐ° "Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ" Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ Ð² Ð±Ð¾Ñ‚Ðµ ',-1))])]),t("div",_l,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold mb-4"},"Reply ÐºÐ½Ð¾Ð¿ÐºÐ¸ (ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð¾Ð´ Ð¿Ð¾Ð»ÐµÐ¼ Ð²Ð²Ð¾Ð´Ð°)",-1)),t("div",yl,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium"},"ÐšÐ½Ð¾Ð¿ÐºÐ° 1: ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð°, Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸",-1)),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸",-1)),u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>o.form.reply_buttons.materials_button_text=l),type:"text",placeholder:"ðŸ“‚ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð°, Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.reply_buttons.materials_button_text]])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ (Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€)",-1)),o.selectedMaterialsFiles.length>0?(s(),n("div",kl,[(s(!0),n(z,null,W(o.selectedMaterialsFiles,(l,_)=>(s(),n("div",{key:l.id,class:"p-3 bg-muted/30 rounded-lg"},[t("div",wl,[t("div",null,[t("p",hl,a(l.name),1),t("p",Cl,a(o.formatFileSize(l.size)),1)]),t("button",{type:"button",onClick:g=>o.removeMaterialsFile(_),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",8,Ml)])]))),128))])):f("",!0),t("button",{type:"button",onClick:e[12]||(e[12]=l=>o.showMaterialsPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},a(o.selectedMaterialsFiles.length>0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ„Ð°Ð¹Ð»Ñ‹":"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸"),1),t("p",Fl," Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾: "+a(o.selectedMaterialsFiles.length)+" Ñ„Ð°Ð¹Ð»Ð¾Ð² ",1)])]),t("div",Sl,[e[64]||(e[64]=t("label",{class:"block text-sm font-medium"},"ÐšÐ½Ð¾Ð¿ÐºÐ° 2: Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",-1)),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸",-1)),u(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>o.form.reply_buttons.consultation_button_text=l),type:"text",placeholder:"ðŸ“ž Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.reply_buttons.consultation_button_text]])]),e[65]||(e[65]=t("p",{class:"text-xs text-muted-foreground"}," ÐŸÑ€Ð¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð» Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ ",-1))]),t("div",Dl,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium"},"ÐšÐ½Ð¾Ð¿ÐºÐ° 3: ÐÐ°Ñˆ Ð¾Ñ„Ð¸Ñ Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ð°Ñ…",-1)),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸",-1)),u(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.form.reply_buttons.office_button_text=l),type:"text",placeholder:"ðŸ“ ÐÐ°Ñˆ Ð¾Ñ„Ð¸Ñ Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ð°Ñ…",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.reply_buttons.office_button_text]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð¨Ð¸Ñ€Ð¾Ñ‚Ð° (latitude)",-1)),u(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>o.form.office_location.latitude=l),type:"number",step:"0.000001",placeholder:"55.7558",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.office_location.latitude,void 0,{number:!0}]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"Ð”Ð¾Ð»Ð³Ð¾Ñ‚Ð° (longitude)",-1)),u(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>o.form.office_location.longitude=l),type:"number",step:"0.000001",placeholder:"37.6173",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.office_location.longitude,void 0,{number:!0}]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-xs text-muted-foreground mb-2"},"ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ",-1)),u(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=l=>o.form.office_location.address=l),rows:"3",placeholder:"Ð³. ÐœÐ¾ÑÐºÐ²Ð°, ÑƒÐ». ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð°Ñ, Ð´. 1",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.office_location.address]])]),e[71]||(e[71]=t("p",{class:"text-xs text-muted-foreground"}," ÐŸÑ€Ð¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° ÐºÐ°Ñ€Ñ‚Ð° Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ð¼Ð¸ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ð¼Ð¸ Ð¸ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ñ Ð°Ð´Ñ€ÐµÑÐ¾Ð¼ ",-1))])])])):f("",!0),o.activeTab==="messages"?(s(),n("div",Ul,[e[99]||(e[99]=t("h3",{class:"text-lg font-semibold"},"Ð¢ÐµÐºÑÑ‚Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð±Ð¾Ñ‚Ð°",-1)),t("div",Vl,[e[77]||(e[77]=t("h4",{class:"text-md font-medium"},"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° ÐºÐ°Ð½Ð°Ð»",-1)),t("div",null,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),u(t("textarea",{"onUpdate:modelValue":e[18]||(e[18]=l=>o.form.messages.subscription.required_text=l),rows:"3",placeholder:"Ð”Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð±ÐµÑ‚Ð°-Ð²ÐµÑ€ÑÐ¸Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.subscription.required_text]])]),t("div",null,[e[75]||(e[75]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸",-1)),u(t("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>o.form.messages.subscription.subscribe_button=l),type:"text",placeholder:"ðŸ”” ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° Telegram",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.subscription.subscribe_button]])]),t("div",null,[e[76]||(e[76]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸",-1)),u(t("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>o.form.messages.subscription.check_button=l),type:"text",placeholder:"âœ… Ð¯ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð»ÑÑ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.subscription.check_button]])])]),t("div",Bl,[e[85]||(e[85]=t("h4",{class:"text-md font-medium"},"ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ",-1)),t("div",null,[e[78]||(e[78]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸",-1)),u(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=l=>o.form.messages.consultation.description=l),rows:"4",placeholder:"Ð•ÑÐ»Ð¸ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð±Ð¸Ð·Ð½ÐµÑÑƒ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.consultation.description]])]),t("div",null,[e[79]||(e[79]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð˜Ð¼Ñ"',-1)),u(t("input",{"onUpdate:modelValue":e[22]||(e[22]=l=>o.form.messages.consultation.form_name_label=l),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¸Ð¼Ñ:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_name_label]])]),t("div",null,[e[80]||(e[80]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½"',-1)),u(t("input",{"onUpdate:modelValue":e[23]||(e[23]=l=>o.form.messages.consultation.form_phone_label=l),type:"text",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_phone_label]])]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð»Ñ "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"',-1)),u(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>o.form.messages.consultation.form_description_label=l),type:"text",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾...):",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.form_description_label]])]),t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸",-1)),u(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=l=>o.form.messages.consultation.thank_you=l),rows:"2",placeholder:"Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾. ÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.consultation.thank_you]])]),t("div",null,[e[83]||(e[83]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"',-1)),u(t("input",{"onUpdate:modelValue":e[26]||(e[26]=l=>o.form.messages.consultation.start_button=l),type:"text",placeholder:"ðŸ“ Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.start_button]])]),t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"',-1)),u(t("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>o.form.messages.consultation.skip_description_button=l),type:"text",placeholder:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.consultation.skip_description_button]])])]),t("div",jl,[e[89]||(e[89]=t("h4",{class:"text-md font-medium"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",null,[e[86]||(e[86]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),u(t("textarea",{"onUpdate:modelValue":e[28]||(e[28]=l=>o.form.messages.materials.list_description=l),rows:"3",placeholder:"ÐœÑ‹ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð»Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¿Ð¾ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑÐ¼...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[x,o.form.messages.materials.list_description]])]),t("div",null,[e[87]||(e[87]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ",-1)),u(t("input",{"onUpdate:modelValue":e[29]||(e[29]=l=>o.form.messages.materials.download_button=l),type:"text",placeholder:"â¬‡ï¸ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.materials.download_button]])]),t("div",null,[e[88]||(e[88]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´"',-1)),u(t("input",{"onUpdate:modelValue":e[30]||(e[30]=l=>o.form.messages.materials.back_to_list=l),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.materials.back_to_list]])])]),t("div",Tl,[e[95]||(e[95]=t("h4",{class:"text-md font-medium"},"Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",-1)),t("div",null,[e[90]||(e[90]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"',-1)),u(t("input",{"onUpdate:modelValue":e[31]||(e[31]=l=>o.form.messages.menu.materials_button=l),type:"text",placeholder:"ðŸ“‚ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ñ‹",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.materials_button]])]),t("div",null,[e[91]||(e[91]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ"',-1)),u(t("input",{"onUpdate:modelValue":e[32]||(e[32]=l=>o.form.messages.menu.consultation_button=l),type:"text",placeholder:"ðŸ“ž Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.consultation_button]])]),t("div",null,[e[92]||(e[92]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐžÑ‚Ð·Ñ‹Ð²"',-1)),u(t("input",{"onUpdate:modelValue":e[33]||(e[33]=l=>o.form.messages.menu.review_button=l),type:"text",placeholder:"â­ ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð² Ð½Ð° Ð¯Ð½Ð´ÐµÐºÑ ÐšÐ°Ñ€Ñ‚Ð°Ñ…",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.review_button]])]),t("div",null,[e[93]||(e[93]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ"',-1)),u(t("input",{"onUpdate:modelValue":e[34]||(e[34]=l=>o.form.messages.menu.back_to_menu=l),type:"text",placeholder:"â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.back_to_menu]])]),t("div",null,[e[94]||(e[94]=t("label",{class:"block text-sm font-medium mb-2"},'Ð¢ÐµÐºÑÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ"',-1)),u(t("input",{"onUpdate:modelValue":e[35]||(e[35]=l=>o.form.messages.menu.presentation_button=l),type:"text",placeholder:"ðŸ“¥ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.messages.menu.presentation_button]])])]),t("div",Pl,[e[98]||(e[98]=t("h4",{class:"text-md font-medium"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼",-1)),t("div",null,[e[96]||(e[96]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¨Ð°Ð±Ð»Ð¾Ð½ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½Ð¾Ð²Ð¾Ð¹ Ð·Ð°ÑÐ²ÐºÐµ",-1)),u(t("textarea",{"onUpdate:modelValue":e[36]||(e[36]=l=>o.form.messages.notifications.consultation_template=l),rows:"6",placeholder:`ÐÐ¾Ð²Ð°Ñ Ð·Ð°ÑÐ²ÐºÐ° Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ

Ð˜Ð¼Ñ: {name}
Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: {phone}
ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: {description}
Ð”Ð°Ñ‚Ð°: {date}`,class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none font-mono text-sm"},null,512),[[x,o.form.messages.notifications.consultation_template]]),e[97]||(e[97]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: {name}, {phone}, {description}, {date} ",-1))])])])):f("",!0),o.activeTab==="advanced"?(s(),n("div",Il,[e[114]||(e[114]=t("h3",{class:"text-lg font-semibold"},"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",-1)),t("div",null,[t("label",El,[u(t("input",{"onUpdate:modelValue":e[37]||(e[37]=l=>o.form.other_settings.phone_validation_strict=l),type:"checkbox",class:"w-4 h-4"},null,512),[[de,o.form.other_settings.phone_validation_strict]]),e[100]||(e[100]=t("span",null,"Ð¡Ñ‚Ñ€Ð¾Ð³Ð°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°",-1))])]),t("div",null,[e[101]||(e[101]=t("label",{class:"block text-sm font-medium mb-2"},"ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð»Ð¸Ð½Ð° Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ",-1)),u(t("input",{"onUpdate:modelValue":e[38]||(e[38]=l=>o.form.other_settings.max_description_length=l),type:"number",min:"10",max:"5000",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.max_description_length,void 0,{number:!0}]])]),t("div",null,[e[102]||(e[102]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸ (ÑÐµÐº)",-1)),u(t("input",{"onUpdate:modelValue":e[39]||(e[39]=l=>o.form.other_settings.subscription_check_timeout=l),type:"number",min:"1",max:"30",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.subscription_check_timeout,void 0,{number:!0}]])]),t("div",zl,[e[108]||(e[108]=t("h4",{class:"text-md font-semibold mb-4"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‘Ð½Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð²",-1)),t("div",Wl,[e[103]||(e[103]=t("label",{class:"block text-sm font-medium mb-2"},"Ð¡Ñ€Ð¾Ðº Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‘Ð½Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð² (Ð´Ð½ÐµÐ¹)",-1)),u(t("input",{"onUpdate:modelValue":e[40]||(e[40]=l=>o.form.other_settings.canceledOrdersTtlDays=l),type:"number",min:"1",max:"365",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.canceledOrdersTtlDays,void 0,{number:!0}]]),e[104]||(e[104]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð§ÐµÑ€ÐµÐ· ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð´Ð½ÐµÐ¹ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‘Ð½Ð½Ñ‹Ðµ Ð·Ð°ÐºÐ°Ð·Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ ÑÐºÑ€Ñ‹Ñ‚Ñ‹ Ð¸Ð»Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ ",-1))]),t("div",null,[e[106]||(e[106]=t("label",{class:"block text-sm font-medium mb-2"},"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¸ÑÑ‚ÐµÑ‡ÐµÐ½Ð¸Ñ ÑÑ€Ð¾ÐºÐ°",-1)),u(t("select",{"onUpdate:modelValue":e[41]||(e[41]=l=>o.form.other_settings.canceledOrdersAfterTtlAction=l),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[105]||(e[105]=[t("option",{value:"hide"},"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ",-1),t("option",{value:"delete"},"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð±ÐµÐ·Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð½Ð¾",-1)])],512),[[J,o.form.other_settings.canceledOrdersAfterTtlAction]]),e[107]||(e[107]=t("p",{class:"text-xs text-muted-foreground mt-1"},' ÐŸÑ€Ð¸ "Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ" Ð·Ð°ÐºÐ°Ð·Ñ‹ Ð¾ÑÑ‚Ð°Ð½ÑƒÑ‚ÑÑ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ, Ð½Ð¾ Ð½Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð²Ð¸Ð´Ð½Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ. ÐŸÑ€Ð¸ "Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Ð·Ð°ÐºÐ°Ð·Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð±ÐµÐ·Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹. ',-1))])]),t("div",ql,[e[113]||(e[113]=t("h4",{class:"text-md font-semibold mb-4"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½ÐµÐ¾Ð¿Ð»Ð°Ñ‡ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð°Ñ…",-1)),t("div",Al,[t("label",Gl,[u(t("input",{"onUpdate:modelValue":e[42]||(e[42]=l=>o.form.other_settings.unpaidNotificationsEnabled=l),type:"checkbox",class:"w-4 h-4"},null,512),[[de,o.form.other_settings.unpaidNotificationsEnabled]]),e[109]||(e[109]=t("span",null,"Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½ÐµÐ¾Ð¿Ð»Ð°Ñ‡ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð°Ñ…",-1))]),e[110]||(e[110]=t("p",{class:"text-xs text-muted-foreground mt-1 ml-6"},' Ð‘Ð¾Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼, ÐµÑÐ»Ð¸ Ð·Ð°ÐºÐ°Ð· Ð² ÑÑ‚Ð°Ñ‚ÑƒÑÐµ "ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹" Ð½Ðµ Ð¾Ð¿Ð»Ð°Ñ‡ÐµÐ½ ',-1))]),t("div",null,[e[111]||(e[111]=t("label",{class:"block text-sm font-medium mb-2"},"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· (Ð¼Ð¸Ð½ÑƒÑ‚)",-1)),u(t("input",{"onUpdate:modelValue":e[43]||(e[43]=l=>o.form.other_settings.unpaidNotifyAfterMinutes=l),type:"number",min:"1",max:"1440",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[x,o.form.other_settings.unpaidNotifyAfterMinutes,void 0,{number:!0}]]),e[112]||(e[112]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼Ð¸Ð½ÑƒÑ‚ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ ",-1))])])])):f("",!0),t("div",Nl,[t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50"},a(o.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"),9,Ol)])],32),o.showWelcomeMediaPicker?(s(),n("div",Ll,[t("div",Rl,[t("div",Kl,[t("div",Hl,[t("h3",Ql,a(o.form.welcome_media_type==="photo"?"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð¾Ñ‚Ð¾":"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð¸Ð´ÐµÐ¾"),1),t("button",{onClick:e[45]||(e[45]=l=>o.showWelcomeMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",Jl,[G(r,{"selection-mode":!0,"count-file":1,"selected-files":o.selectedWelcomeMedia?[{id:o.selectedWelcomeMedia.id}]:[],onFileSelected:o.handleWelcomeMediaSelected},null,8,["selected-files","onFileSelected"])])])])):f("",!0),o.showWelcomeMediaGalleryPicker?(s(),n("div",Xl,[t("div",Yl,[t("div",Zl,[t("div",$l,[t("h3",er," Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð¾Ñ‚Ð¾ Ð´Ð»Ñ Ð³Ð°Ð»ÐµÑ€ÐµÐ¸ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ "+a(10-o.selectedWelcomeMediaGallery.length)+") ",1),t("button",{onClick:e[46]||(e[46]=l=>o.showWelcomeMediaGalleryPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",tr,[G(r,{"selection-mode":!0,"count-file":10,"selected-files":o.selectedWelcomeMediaGallery.map(l=>({id:l.id})),onFileSelected:o.handleWelcomeMediaGallerySelected},null,8,["selected-files","onFileSelected"])])])])):f("",!0),o.showMaterialsPicker?(s(),n("div",or,[t("div",lr,[t("div",rr,[t("div",sr,[e[115]||(e[115]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸",-1)),t("button",{onClick:e[47]||(e[47]=l=>o.showMaterialsPicker=!1),class:"text-muted-foreground hover:text-foreground"}," âœ• ")])]),t("div",nr,[G(r,{"selection-mode":!0,"count-file":100,"selected-files":o.selectedMaterialsFiles.map(l=>({id:l.id})),onFileSelected:o.handleMaterialsFilesSelected},null,8,["selected-files","onFileSelected"])])])])):f("",!0)])}const ar=O(Ko,[["render",dr]]),ir={name:"BotStatistics",props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),m=c(null),o=async()=>{e.value=!0;try{const w=await I(`/bot-management/${d.botId}/statistics`);if(!w.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸");const M=await w.json();M.success&&M.data&&(m.value=M.data)}catch(w){console.error("Error fetching statistics:",w)}finally{e.value=!1}};return Z(()=>{o()}),{loading:e,statistics:m}}},ur={class:"bot-statistics space-y-6"},mr={key:0,class:"text-center py-12"},cr={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},br={class:"bg-card rounded-lg border border-border p-6"},fr={class:"text-3xl font-semibold"},gr={class:"bg-card rounded-lg border border-border p-6"},xr={class:"text-3xl font-semibold"},vr={class:"bg-card rounded-lg border border-border p-6"},pr={class:"text-3xl font-semibold"},_r={class:"bg-card rounded-lg border border-border p-6"},yr={class:"text-3xl font-semibold"},kr={key:2,class:"bg-card rounded-lg border border-border p-6"},wr={class:"grid grid-cols-3 gap-4"},hr={class:"text-2xl font-semibold"},Cr={class:"text-2xl font-semibold"},Mr={class:"text-2xl font-semibold"},Fr={key:3,class:"bg-card rounded-lg border border-border p-6"},Sr={class:"space-y-2"},Dr={class:"font-medium"},Ur={class:"text-sm text-muted-foreground"};function Vr(d,e,m,o,w,M){return s(),n("div",ur,[e[10]||(e[10]=t("h2",{class:"text-2xl font-semibold"},"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",-1)),o.loading?(s(),n("div",mr,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸...",-1)])])):f("",!0),!o.loading&&o.statistics?(s(),n("div",cr,[t("div",br,[e[1]||(e[1]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",-1)),t("p",fr,a(o.statistics.total_users||0),1)]),t("div",gr,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð° 30 Ð´Ð½ÐµÐ¹",-1)),t("p",xr,a(o.statistics.active_users_30d||0),1)]),t("div",vr,[e[3]||(e[3]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÑÐ²Ð¾Ðº",-1)),t("p",pr,a(o.statistics.total_consultations||0),1)]),t("div",_r,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²",-1)),t("p",yr,a(o.statistics.materials_downloads||0),1)])])):f("",!0),!o.loading&&o.statistics?(s(),n("div",kr,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð—Ð°ÑÐ²ÐºÐ¸ Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼",-1)),t("div",wr,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-muted-foreground"},"ÐÐ¾Ð²Ñ‹Ðµ",-1)),t("p",hr,a(o.statistics.consultations_by_status?.new||0),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-muted-foreground"},"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1)),t("p",Cr,a(o.statistics.consultations_by_status?.in_progress||0),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-muted-foreground"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ",-1)),t("p",Mr,a(o.statistics.consultations_by_status?.closed||0),1)])])])):f("",!0),!o.loading&&o.statistics&&o.statistics.popular_materials?.length>0?(s(),n("div",Fr,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),t("div",Sr,[(s(!0),n(z,null,W(o.statistics.popular_materials,r=>(s(),n("div",{key:r.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("p",Dr,a(r.title),1),t("p",Ur,a(r.download_count||0)+" ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ð¹",1)]))),128))])])):f("",!0)])}const Br=O(ir,[["render",Vr]]),jr={name:"BotManagement",components:{ConsultationTable:bt,MaterialCategoryTree:Ro,BotSettingsForm:ar,BotStatistics:Br},setup(){const d=ke(),e=ye(()=>d.params.botId),m=c(!1),o=c(null),w=c(null),M=c("consultations"),r=[{key:"consultations",label:"Ð—Ð°ÑÐ²ÐºÐ¸"},{key:"materials",label:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹"},{key:"settings",label:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"},{key:"statistics",label:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"}],l=async()=>{m.value=!0,o.value=null;try{const _=await I(`/bots/${e.value}`);if(!_.ok){const h=await _.json().catch(()=>({}));throw new Error(h.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°")}const g=await _.json();w.value=g.data||null}catch(_){o.value=_.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¾Ñ‚Ð°"}finally{m.value=!1}};return Z(()=>{l()}),{botId:e,loading:m,error:o,bot:w,activeTab:M,tabs:r,fetchBot:l}}},Tr={class:"bot-management-page space-y-6"},Pr={class:"flex items-center justify-between"},Ir={key:0,class:"text-muted-foreground mt-1"},Er={key:0,class:"flex items-center justify-center py-12"},zr={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Wr={class:"text-destructive"},qr={key:2,class:"bg-card rounded-lg border border-border"},Ar={class:"border-b border-border"},Gr={class:"flex -mb-px"},Nr=["onClick"],Or={class:"p-6"},Lr={key:0},Rr={key:1},Kr={key:2},Hr={key:3};function Qr(d,e,m,o,w,M){const r=A("ConsultationTable"),l=A("MaterialCategoryTree"),_=A("BotSettingsForm"),g=A("BotStatistics");return s(),n("div",Tr,[t("div",Pr,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-3xl font-semibold text-foreground"},"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð¾Ð¼",-1)),o.bot?(s(),n("p",Ir,a(o.bot.name),1)):f("",!0)]),t("button",{onClick:e[0]||(e[0]=h=>d.$router.push({name:"admin.bots"})),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"}," â† ÐÐ°Ð·Ð°Ð´ Ðº Ð±Ð¾Ñ‚Ð°Ð¼ ")]),o.loading?(s(),n("div",Er,[...e[2]||(e[2]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…...",-1)])])):f("",!0),o.error?(s(),n("div",zr,[t("p",Wr,a(o.error),1)])):f("",!0),!o.loading&&o.bot?(s(),n("div",qr,[t("div",Ar,[t("nav",Gr,[(s(!0),n(z,null,W(o.tabs,h=>(s(),n("button",{key:h.key,onClick:v=>o.activeTab=h.key,class:X(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===h.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},a(h.label),11,Nr))),128))])]),t("div",Or,[o.activeTab==="consultations"?(s(),n("div",Lr,[G(r,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="materials"?(s(),n("div",Rr,[G(l,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="settings"?(s(),n("div",Kr,[G(_,{"bot-id":o.botId,onUpdated:o.fetchBot},null,8,["bot-id","onUpdated"])])):f("",!0),o.activeTab==="statistics"?(s(),n("div",Hr,[G(g,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0)])])):f("",!0)])}const $r=O(jr,[["render",Qr]]);export{$r as default};
